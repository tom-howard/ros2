<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Practical Robotics Lab Courses with ROS 2 and the TurtleBot3 Waffle.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/ros2/amr/lab2/">
      
      
        <link rel="prev" href="../lab1/">
      
      
        <link rel="next" href="../../waffles/">
      
      
        
      
      
      <link rel="icon" href="../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Lab 2: Feedback Control - ROS 2 Lab Courses in The Diamond</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
<meta property="og:type" content="website">
<meta property="og:title" content="Lab 2: Feedback Control - ROS 2 Lab Courses in The Diamond">
<meta property="og:description" content="Practical Robotics Lab Courses with ROS 2 and the TurtleBot3 Waffle.">
<meta property="og:image" content="https://tom-howard.github.io/ros2/assets/images/social/amr/lab2.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:url" content="https://tom-howard.github.io/ros2/amr/lab2/">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="Lab 2: Feedback Control - ROS 2 Lab Courses in The Diamond">
<meta property="twitter:description" content="Practical Robotics Lab Courses with ROS 2 and the TurtleBot3 Waffle.">
<meta property="twitter:image" content="https://tom-howard.github.io/ros2/assets/images/social/amr/lab2.png">
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-header__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS 2 Lab Courses in The Diamond
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 2: Feedback Control
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software/" class="md-tabs__link">
          
  
  
    
  
  Software

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../course/" class="md-tabs__link">
          
  
  
    
  
  The ROS 2 Course

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../com/" class="md-tabs__link">
          
  
  
    
  
  COM2009

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  AMR31001

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../waffles/" class="md-tabs__link">
          
  
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-nav__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    ROS 2 Lab Courses in The Diamond
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/robots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducing the Robots
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version History
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Software
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/installing-wsl-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing WSL-ROS2 on Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/using-wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Accessing WSL-ROS2 on University Computers
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Accessing WSL-ROS2 on University Computers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started with WSL-ROS2 on the University Managed Desktops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/linux-term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A Quick Introduction to the Linux Terminal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VS Code and WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/docker-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing ROS 2 Using Docker (Linux &amp; Mac)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../course/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    The ROS 2 Course
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    The ROS 2 Course
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 1: Getting Started with ROS 2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 2: Odometry &amp; Navigation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 3: Beyond the Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 4: Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 5: Actions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 6: Cameras, Machine Vision &amp; OpenCV
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../course/extras/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Extras
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Extras
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/extras/launch-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Launch Files (Advanced)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/extras/course-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The TUoS ROS Course Repo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    COM2009
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    COM2009
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assignment #1: An Introduction to ROS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Assignment #2: Team Robotics Project
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignment #2: Team Robotics Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Week 1: Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-a/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Part A (Weeks 1-6)
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part A (Weeks 1-6)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task 1: Velocity Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task 2: Avoiding Obstacles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with your ROS Package (in the Lab)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Key Assessment Info &amp; Requirements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    AMR31001
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    AMR31001
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 1: Mobile Robotics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Lab 2: Feedback Control
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 2: Feedback Control
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aims
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intended Learning Outcomes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Links
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-lab" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Lab
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      
        Getting Started
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-ros-package" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a ROS Package
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launching-ros" class="md-nav__link">
    <span class="md-ellipsis">
      
        Launching ROS
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Odometry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Exploring Odometry Data
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 1: Exploring Odometry Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: Odometry-based Navigation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-lidar-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      
        The LiDAR Sensor
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The LiDAR Sensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Wall Following
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cameras-and-robot-vision" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cameras and Robot Vision
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cameras and Robot Vision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 4: Line Following
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 4: Line Following">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4a" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part A: Establishing a Feedback Signal (Detecting the Line)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4b" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part B: Implementing Proportional Control (Following the Line)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wrapping Up
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../waffles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    The Waffles
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    The Waffles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/launching-ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Launching ROS (and Pairing the Laptop)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Waffle (&amp; ROS) Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Further (Essential) Exercises
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shutdown Procedures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aims
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intended Learning Outcomes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Links
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-lab" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Lab
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      
        Getting Started
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-ros-package" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a ROS Package
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launching-ros" class="md-nav__link">
    <span class="md-ellipsis">
      
        Launching ROS
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      
        Odometry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Exploring Odometry Data
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 1: Exploring Odometry Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: Odometry-based Navigation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-lidar-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      
        The LiDAR Sensor
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The LiDAR Sensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Wall Following
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cameras-and-robot-vision" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cameras and Robot Vision
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cameras and Robot Vision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 4: Line Following
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 4: Line Following">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4a" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part A: Establishing a Feedback Signal (Detecting the Line)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4b" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part B: Implementing Proportional Control (Following the Line)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wrapping Up
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/tom-howard/ros2/edit/main/docs/amr/lab2.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/ros2/raw/main/docs/amr/lab2.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


  <h1>Lab 2: Feedback Control</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"></a></h2>
<p>In Lab 1 we explored how ROS works and how to bring a robot to life. Let's quickly recap the key points:</p>
<p><strong>Nodes</strong></p>
<ul>
<li>Are executable programs (Python, C++ scripts) that perform specific robot tasks and operations.</li>
<li>Typically, there'll be many Nodes running on a robot simultaneously in order to make it work.</li>
<li>We can create our own Nodes on top of what's already running, to add extra functionality.</li>
<li>You may recall that we created our own Node (in Python) to make our TurtleBot3 Waffle follow a square motion path.</li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="ros_network.png" width="500px"></a></p>
</figure>
<p><strong>Topics and Message interfaces</strong></p>
<ul>
<li>All the ROS Nodes running on a network can communicate and pass data between one another using a Publisher/Subscriber-based Communication Principle.</li>
<li>ROS Topics are key to this - they are essentially the communication channels (or the plumbing) on which all data is passed around between the nodes.</li>
<li>Different topics communicate different types of information using standardised data structures (called <em>"Message Interfaces"</em>).</li>
<li>Any Node can publish (<em>write</em>) and/or subscribe to (<em>read</em>) any ROS Topic in order to pass information around or make things happen.</li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="ros_comms.png" width="500px"></a></p>
</figure>
<p>One of the key ROS Topics that we worked with last time was <code>/cmd_vel</code>, which is a topic that communicates velocity commands to make a robot move. You may recall that to make our TurtleBot3 Waffle move, we publish <code>TwistStamped</code> <em>Interface Messages</em> to the <code>/cmd_vel</code> topic. Interfaces messages are <em>structured data types</em> defined in ROS, and we will remind ourselves about the structure of the <code>TwistStamped</code> data type shortly...</p>
<p><strong>Open-Loop Control</strong></p>
<p>We used a time-based method to control the motion of our robot in order to get it to generate a square motion path. This type of control is <em>open-loop</em>: we hoped that the robot had moved (or turned) by the amount that was required, but had no <em>feedback</em> to tell us whether this had actually been achieved.</p>
<p><strong>Closed-Loop Control</strong></p>
<p>In this lab we'll look at how this can be improved, making use of some of our robot's on-board sensors to tell us where the robot is or what it can see in its environment, in order to complete a task more reliably and be able to better adapt to changes and uncertainty in the environment.</p>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link"></a></h3>
<p>In this lab, we'll build some ROS Nodes (in Python) that incorporate data from some of our robot's sensors. This sensor data is published to specific topics on the ROS Network, and we can build ROS Nodes to <em>subscribe</em> to these. We'll see how the data from these sensors can be used as <em>feedback</em> to inform decision-making, thus allowing us to implement some different forms of <em>closed-loop control</em>, and make our robot more autonomous. </p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link"></a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Interpret the data from a ROS Robot's Odometry System and understand what this tells you about a Robot's position and orientation within its environment.</li>
<li>Use feedback from a robot's odometry system to <em>control</em> its position in an environment.</li>
<li>Use data from a Robot's LiDAR sensor to make a robot follow a wall.</li>
<li>Analyse images from a Robot's Camera and use this information to follow a coloured line on the floor.</li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link"></a></h3>
<ul>
<li><a href="#ex1">Exercise 1: Exploring Odometry Data</a></li>
<li><a href="#ex2">Exercise 2: Odometry-based Navigation</a></li>
<li><a href="#ex3">Exercise 3: Wall Following</a></li>
<li><a href="#ex4">Exercise 4: Line Following</a></li>
</ul>
<h2 id="the-lab">The Lab<a class="headerlink" href="#the-lab" title="Permanent link"></a></h2>
<div class="admonition info">
<p class="admonition-title">Assessment Info</p>
<p>This lab is <strong>summatively assessed</strong>.</p>
<ol>
<li>There's a <strong>post-lab quiz</strong> that you'll need to complete after this lab session has taken place, which will be released on Blackboard.</li>
<li>You'll also be marked on the work that you do <strong>in the lab</strong> for Exercises 3 &amp; 4.</li>
</ol>
</div>
<h3 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link"></a></h3>
<h4 id="creating-a-ros-package">Creating a ROS Package<a class="headerlink" href="#creating-a-ros-package" title="Permanent link"></a></h4>
<p>We'll need a ROS package to work with for this lab session. We've created a template for you, which contains all the resources that you'll need for today. Download and install this as follows.</p>
<ol>
<li>
<p>Open up a terminal instance on the laptop, either by using the <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span> keyboard shortcut, or by clicking the Terminal App icon in the favourites bar on the left-hand side of the desktop:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/terminal_icon.svg" width="60px"></a>
</figure><p></p>
<p>We'll call this <strong>TERMINAL 1</strong>.</p>
</li>
<li>
<p>In <strong>TERMINAL 1</strong>, run the following commands in order:</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To <strong>paste</strong> the following commands into the terminal use <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-shift">Shift</kbd><span>+</span><kbd class="key-v">V</kbd></span></p>
</div>
<hr>
<p><strong>TERMINAL 1</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>cd ~/ros2_ws/src/
</code></pre></div><p></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>git clone https://github.com/tom-howard/amr31001_lab2.git
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>cd ~/ros2_ws &amp;&amp; \
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>  colcon build --symlink-install \
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  --packages-select amr31001_lab2 &amp;&amp; \
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>  source ~/.bashrc 
</code></pre></div>
<hr>
</li>
<li>
<p>Next, open the package in VS Code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>code<span class="w"> </span>./src/amr31001_lab2
</code></pre></div>
</li>
<li>
<p>When VS Code opens, navigate to the <em>File Explorer</em>: </p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="vscode_explorer_package_xml.png" width="400px"></a>
</figure><p></p>
<p>... find a file here called <code>package.xml</code> and click on it. </p>
</li>
<li>
<p>Look for the following lines in the <code>package.xml</code> file:</p>
<div class="highlight"><span class="filename">package.xml</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>&lt;maintainer email="name1@sheffield.ac.uk"&gt;Name 1&lt;/maintainer&gt;
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>&lt;maintainer email="name2@sheffield.ac.uk"&gt;Name 2&lt;/maintainer&gt;
</code></pre></div>
<p>Change <code>Name 1</code> to your name, and then change <code>name1@sheffield.ac.uk</code> to your Sheffield email address! Then, do the same for your other Group member on the line below it. (If you're working in a group of more than 2 people, then you can add additional lines below this for your other group members.)</p>
<div class="admonition warning">
<p class="admonition-title">Post-lab</p>
<p><strong>This is important for the post-lab</strong>!</p>
<p>Some of the work that you do in this lab will be assed as part of the post-lab, so it's important that we can identify each member of your group. If any group members aren't listed here, then they won't receive any marks! </p>
<p>When entering your names, make sure you provide first names <strong>AND</strong> surnames for each group member.</p>
</div>
</li>
<li>
<p>Save the changes that you have just made to your <code>package.xml</code> file.</p>
</li>
</ol>
<h4 id="launching-ros">Launching ROS<a class="headerlink" href="#launching-ros" title="Permanent link"></a></h4>
<p>Much the same as last time, you'll now need to get ROS up and running on your robot. </p>
<ol>
<li>
<p>First, identify the robot that you have been provided with. Each of our robots are uniquely named: <code>dia-waffleX</code>, where <code>X</code> is the <em>'Robot Number'</em> (a number between 1 and 50). Check the label printed on top of the robot to find out which one you have!</p>
</li>
<li>
<p>In <strong>TERMINAL 1</strong> type the following command to <em>pair</em> the laptop and robot, so that they can work together:</p>
<hr>
<p><strong>TERMINAL 1</strong>:
</p><div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>waffle X pair
</code></pre></div>
<strong>... replacing <code>X</code> with the number of the robot that you have been provided with</strong>.<p></p>
<hr>
</li>
<li>
<p>Enter the password for the robot when requested (we'll tell you what this is in the lab).</p>
<p>You <em>may</em> see a message like this early on in the pairing process:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/ssh_auth.svg" width="600px"></a>
</figure><p></p>
<p>If so, just type <code>yes</code> and then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm that you want to continue.</p>
</li>
<li>
<p>Once the pairing process is finished you should see a message saying <code>pairing complete</code>, displayed in blue in the terminal. </p>
</li>
<li>
<p>Then, in the same terminal (<strong>TERMINAL 1</strong>), enter the following command:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>waffle X term
</code></pre></div>
(again, replacing <code>X</code> with the number of <strong>your</strong> robot).<p></p>
<hr>
<p>Any text that was in the terminal should now disappear, and a green banner should appear across the bottom of the terminal window:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/tmux.svg" width="600px"></a>
</figure><p></p>
<p>This is a terminal instance running <strong>on the robot</strong>, and any commands that you enter here will be <strong>executed on the robot</strong> (not the laptop!)</p>
</li>
<li>
<p>Now, launch ROS on the robot by entering the following command:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>ros.launch.py
</code></pre></div><p></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To paste text into a Linux terminal you'll need to use the Control + <strong>Shift</strong> + V keyboard keys: <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-shift">Shift</kbd><span>+</span><kbd class="key-v">V</kbd></span></p>
</div>
<hr>
<p>If all is well then the robot will play a nice <em>"do-re-me"</em> sound and a message like this should appear (amongst all the other text):</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>[tb3_status.py-#] ######################################
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>[tb3_status.py-#] ### dia-waffleX is up and running! ###
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>[tb3_status.py-#] ######################################
</code></pre></div>
<p>ROS is now up and running on the robot, and we're ready to go!</p>
</li>
<li>
<p>Next, connect the laptop to the ROS network that we've just established on the robot. The Robot and Laptop communicate with one another via the University Wireless network, but there's one more step required to link them together. </p>
<p>Open up <strong>a new terminal instance</strong> on the laptop (either by using the <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span> keyboard shortcut, or by clicking the Terminal App icon) and enter the following command:</p>
<hr>
<p><strong>TERMINAL 2</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rmw_zenoh_cpp<span class="w"> </span>rmw_zenohd
</code></pre></div><p></p>
<hr>
<p>Leave <strong>TERMINAL 1</strong> and <strong>TERMINAL 2</strong> running in the background at all times while working with your robot in the lab today.</p>
</li>
</ol>
<h3 id="odometry">Odometry<a class="headerlink" href="#odometry" title="Permanent link"></a></h3>
<p>First, let's look at our robot's <em>odometry</em> system, and what this is useful for.</p>
<blockquote>
<p>Odometry is the use of data from motion sensors to estimate change in position over time. It is used in robotics by some legged or wheeled robots to estimate their position relative to a starting location. <sup id="fnref:wiki"><a class="footnote-ref" href="#fn:wiki">1</a></sup></p>
</blockquote>
<p>Our robot can therefore keep track of its position (and orientation) as it moves around. It does this using data from two sources:</p>
<ol>
<li><strong>Wheel encoders</strong>: Our robot has two wheels, each is equipped with an encoder that measures the number of rotations that the wheel makes. </li>
<li>An <strong>Inertial Measurement Unit (IMU)</strong>: Using accelerometers, gyroscopes and compasses, the IMU can monitor the linear and angular velocity of the robot, and which direction it is heading, at all times.</li>
</ol>
<p>This data is published to a ROS Topic called <code>/odom</code>. </p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 1: Exploring Odometry Data<a class="headerlink" href="#ex1" title="Permanent link"></a></h4>
<p>In the previous lab we used some ROS commands to identify and interrogate active topics on the ROS network, let's give that another go now, but on the <code>/odom</code> topic this time.</p>
<ol>
<li>
<p>Open up a new terminal instance on the laptop (by pressing <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span>, or clicking the Terminal App desktop icon, as you did before). Well call this one <strong>TERMINAL 3</strong>.</p>
</li>
<li>
<p>As you may recall from last time, we can use the <code>ros2 topic</code> command to <em>list</em> all the topics that are currently active on the network. Enter the following in <strong>TERMINAL 3</strong>:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div><p></p>
<hr>
<p>A large list of items should appear on the screen. Can you spot the <code>/odom</code> topic?</p>
</li>
<li>
<p>Let's find out more about this using the <code>ros2 topic info</code> command.</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ros2 topic info /odom
</code></pre></div><p></p>
<hr>
<p>This should provide the following output:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Type: nav_msgs/msg/Odometry
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Publisher count: 1
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Subscription count: 0
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Post-lab Quiz</p>
<p>What does all this mean? We discussed this <a href="../lab1/#rostopic_info_explained">last time (in relation to the <code>/cmd_vel</code> topic)</a>, and you may want to have a look back at this to refresh your memory! </p>
</div>
<p>Based on the above, we know that the <code>/odom</code> topic uses a <code>nav_msgs/msg/Odometry</code> data structure (or <em>"interface"</em>). </p>
<p><strong>Interfaces</strong> (revisited)</p>
<p>Recall from Lab 1 that data structures in ROS 2 are called <em>Interfaces</em>. </p>
<p>From the output above, <code>Type</code> refers to the <em>type</em> of data structure (i.e. the type of interface). The <code>Type</code> definition always has three parts to it, in this case: <code>nav_msgs</code>, <code>msg</code> and <code>Odometry</code>:</p>
<ol>
<li><code>nav_msgs</code> is the name of the ROS package that this interface (data structure) belongs to</li>
<li><code>msg</code> tells us that it's a topic <em>message</em> interface (rather than another interface type, of which there are others, but we don't need to worry about them here)</li>
<li><code>Odometry</code> is the <em>name</em> of the message interface.</li>
</ol>
</li>
<li>
<p>We can use the <code>ros2 interface</code> command to find out more about this:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>ros2 interface show nav_msgs/msg/Odometry
</code></pre></div><p></p>
<hr>
<p>You'll see a lot of information there, but try to find the line that reads <code>Pose pose</code>: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Pose pose
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>        Point position
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>                float64 x
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>                float64 y
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>                float64 z
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>        Quaternion orientation
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>                float64 x 0
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>                float64 y 0
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>                float64 z 0
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>                float64 w 1
</code></pre></div>
<p>Here's where we'll find information about the robot's position and orientation (aka <em>"Pose"</em>) in the environment. Let's have a look at this data in real time...</p>
</li>
<li>
<p>We can look at the live data being streamed across the <code>/odom</code> topic, using the <code>ros2 topic echo</code> command. We know that the data type is called <code>nav_msgs/msg/Odometry</code>, and nested within this is the <code>pose</code> attribute that we are interested in, so:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>ros2 topic echo /odom --field pose.pose
</code></pre></div><p></p>
<hr>
</li>
<li>
<p>What we're presented with now is live Odometry data from the robot.</p>
<p>Let's drive the robot around a bit and observe how our robot's pose changes as we do so.</p>
</li>
<li>
<p>Open up a new terminal instance by pressing <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span>, or clicking the Terminal App desktop icon, as you did before. We'll call this one <strong>TERMINAL 4</strong>:</p>
<hr>
<p><strong>TERMINAL 4</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div><p></p>
<hr>
</li>
<li>
<p>Follow the instructions provided in the terminal to drive the robot around:</p>
<details class="tip">
<summary>Reminder</summary>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/cli/teleop_keymap.svg"></a>
</figure><p></p>
</details>
<p>As you're doing this, look at how the <code>position</code> and <code>orientation</code> data is changing in <strong>TERMINAL 3</strong>, in real-time!</p>
<div class="admonition info">
<p class="admonition-title">Post-lab Quiz</p>
<p>Which position and orientation values change (by a significant amount) when:</p>
<ol>
<li>The robot turns on the spot (i.e. only an <em>angular</em> velocity is applied)?</li>
<li>The robot moves forwards (i.e. only a <em>linear</em> velocity is applied)?</li>
<li>The robot moves in a circle (i.e. both a linear <em>and</em> angular velocity are applied simultaneously)?</li>
</ol>
<p><strong>Make a note of the answers to these questions, as they may feature in the post-lab quiz!</strong></p>
</div>
</li>
<li>
<p>When you've seen enough enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 4</strong> to stop the <code>teleop_keyboard</code> node. Then, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> as well, which will stop the live stream of Odometery messages from being displayed.</p>
</li>
</ol>
<h5 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link"></a></h5>
<p><strong>Pose</strong> is a combination of a robot's <em>position</em> and <em>orientation</em> in its environment.</p>
<p><strong>Position</strong> tells us the location (in meters) of the robot in its environment. Wherever the robot was when it was turned on is the reference point, and so the distance values that we observed in the exercise above were all quoted relative to this initial position.</p>
<p>You should have noticed that (as the robot moved around) the <code>x</code> and <code>y</code> terms changed, but the <code>z</code> term should have remained at zero. This is because the <code>X-Y</code> plane is the floor, and any change in <code>z</code> position would mean that the robot was floating or flying above the floor! </p>
<p><strong>Orientation</strong> tells us where the robot is pointing in its environment, expressed in units of <em>Quaternions</em>; a four-term orientation system. You should have noticed some of these values changing too, but it may not have been immediately obvious what the values really meant! For the further exercises in this lab we'll convert this to Euler angles (in degrees/radians) for you, to make the data a bit easier to understand.</p>
<p>Ultimately though, our robots <em>position</em> can change in both the <code>X</code> and <code>Y</code> axes (i.e. the plane of the floor), while its <em>orientation</em> can only change about the <code>Z</code> axis (i.e. it can only "yaw"): </p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/pose.svg" width="700px"></a></p>
</figure>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 2: Odometry-based Navigation<a class="headerlink" href="#ex2" title="Permanent link"></a></h4>
<p>Now that we know about the odometry system and what it tells us, let's see how this could be used as a feedback signal to inform robot navigation. You may recall that last time you created a ROS Node to make your robot to follow a square motion path on the floor. This was time-based though: for a given speed of motion (turning or moving forwards) how long would it take for the robot to move by a required distance? Having determined this, we then used timers to control the execution of two different motion states: moving forwards and turning on the spot, in order to generate the square motion path (approximately). </p>
<p>In theory though, we can do all this much more effectively with odometry data instead, so let's have a go at that now...</p>
<ol>
<li>
<p>Head back to VS Code, which should still be open from earlier.</p>
</li>
<li>
<p>In the File Explorer on the left-hand side find a folder called <code>scripts</code>, and click on the <code>ex2.py</code> file in here, to display it in the editor.</p>
</li>
<li>
<p>Have a look through the code and see if you can work out what's going on. There are a few things to be aware of:</p>
<ol>
<li>
<p>Motion control is handled by an external Python class called <code>Motion</code>, which is imported on line 7 (along with another class called <code>Pose</code> which we'll talk about shortly):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">amr31001_lab2_modules.tb3_tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">Motion</span><span class="p">,</span> <span class="n">Pose</span>
</code></pre></div>
<p>The <code>Motion</code> class is instantiated on line 15:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">motion</span> <span class="o">=</span> <span class="n">Motion</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="c1"># (1)!</span>
</code></pre></div>
<ol>
<li>
<p>Most of the code in the <code>ex2.py</code> file is contained within a Python class called <code>Square</code>. See line 10:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Square</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="o">...</span>
</code></pre></div>
<p><code class="highlight"><span class="bp">self</span></code> allows our class to refer to itself!</p>
<p><code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">motion</span></code> for example allows us to access the <code>motion</code> attribute elsewhere within the class (as long as we refer to it as <code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">motion</span></code>). </p>
<p>See this in action below...</p>
</li>
</ol>
<p>A class <em>method</em> called <code>move_square()</code> contains the main part of the code, and it's here that we call the <code>motion</code> attribute to make the robot move, e.g.:</p>
<ol>
<li>
<p>To make the robot move at a linear velocity of <code>x</code> (m/s) and/or an angular velocity of <code>y</code> (rad/s):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">move_at_velocity</span><span class="p">(</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    <span class="n">linear</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">angular</span> <span class="o">=</span> <span class="n">y</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>To make the robot stop moving:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Obtaining our robot's Odometry data was discussed in the previous exercise, where we learnt that can be done by subscribing to the <code>/odom</code> topic, which provides us with this data in a <code>nav_msgs/msg/Odometry</code>-type format. This is quite a complex data structure, so to make life easier during this lab, we've done all the hard work for you, inside another class called <code>Pose</code> (also imported earlier). This class is instantiated on line 16:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">pose</span> <span class="o">=</span> <span class="n">Pose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
<p>We can then use this to access the robot's odometry data, by calling the appropriate attribute whenever we need it:</p>
<ol>
<li><code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">posx</span></code> to obtain the robot's current position (in meters) in the <code>X</code> axis.</li>
<li><code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">posy</span></code> to obtain the robot's current position (in meters) in the <code>Y</code> axis.</li>
<li><code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">pose</span><span class="o">.</span><span class="n">yaw</span></code> to obtain the robot's current orientation (in degrees) about the <code>Z</code> axis.</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Run the code in <strong>TERMINAL 3</strong> and observe what happens:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab2<span class="w"> </span>ex2.py
</code></pre></div><p></p>
<hr>
<p>The robot should start turning on the spot, and you should see some interesting information being printed to the terminal. After it has turned by 45 the robot should stop. </p>
</li>
<li>
<p>Stop the Node by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> and then run it again if you missed what happened the first time!</p>
</li>
<li>
<p><strong>What you need to do</strong>:</p>
<ol>
<li>
<p>The <code>move_square()</code> class method is called over and over again at a controlled rate. This was established in the <code class="highlight"><span class="fm">__init__</span><span class="p">()</span></code> class method: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    <span class="n">timer_period_sec</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="c1"># (1)!</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">move_square</span><span class="p">,</span> <span class="c1"># (2)!</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="p">)</span>
</code></pre></div>
<ol>
<li>The rate at which to execute a <em>"callback function"</em>. Note: defined in terms of <em>period</em> (in seconds), not <em>frequency</em> (in Hz).</li>
<li>The callback function to execute at the specified rate, i.e. <code>move_square()</code>.</li>
</ol>
</li>
<li>
<p>The <code>move_square()</code> class method is therefore essentially the main part of our code: a series of operations that will be called over and over again at a specified rate.</p>
<p><strong>It's this part of the code that you will need to modify!</strong></p>
<p>Within this there is an <code class="highlight"><span class="k">if</span></code> statement that controls whether the robot should be turning or moving forwards: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">turn</span><span class="p">:</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="c1"># Turning State</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="o">...</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="k">else</span><span class="p">:</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    <span class="c1"># Moving Forwards </span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>    <span class="o">...</span>
</code></pre></div>
<p>... where <code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">turn</span></code> is a boolean whose value can either be <code class="highlight"><span class="kc">True</span></code> or <code class="highlight"><span class="kc">False</span></code>.</p>
</li>
<li>
<p>Within this, look at what happens in the <code>Turning State</code>. Consider how the robot's yaw angle is being monitored and updated as the robot turns. Then, look at how the turn angle is being controlled. See if you can adapt this to make sure the robot turns by 90.</p>
</li>
<li>
<p>Ultimately, after the robot has turned by the desired angle it needs to move forwards by 0.5m, in order to achieve a 0.5x0.5m square motion path.</p>
<p>Moving forwards is handled in the <code>Moving Forwards</code> state.</p>
<p>See if you can adapt the code within this block to make the robot move forwards by the required amount (0.5 meters) in between each turn. <a name="the_hint"></a></p>
<details class="note">
<summary>Hint</summary>
<p>Consider how the turn angle is monitored and updated whist turning (<code>current_yaw</code>), and take a similar approach with the linear displacement (<code>current_distance</code>). Bear in mind that you'll need to consider the <em>euclidean distance</em>, which you'll need to calculate based on the robot's position in both the <code>x</code> and <code>y</code> axis.</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="euclidean_distance.png" width="500px"></a>
</figure><p></p>
</details>
</li>
<li>
<p><strong>Make sure that you've saved any changes to the code (in VS Code) before trying to test it out on the robot!</strong></p>
<p>Do this by using the <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-s">S</kbd></span> keyboard shortcut, or going to <code>File</code> &gt; <code>Save</code> from the menu at the top of the screen.</p>
</li>
<li>
<p>Once you've saved it, you can re-run the code at any time by using the same <code>ros2 run</code> command as before:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab2<span class="w"> </span>ex2.py
</code></pre></div><p></p>
<hr>
<p>... and you can stop it at any time by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in the terminal.</p>
<details class="tip">
<summary>Python Tips</summary>
<p>You'll need to do a bit of maths here (see <a href="#the_hint">the "Hint" above</a>). Here's how to implement a couple of mathematical functions in Python:</p>
<ol>
<li>
<p><strong>To the power of X</strong>: </p>
<p>Use <code>**</code> to raise a number to the power of another number (i.e. <span class="arithmatex">\(2^{3}\)</span>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="mi">8</span>
</code></pre></div>
<p>Or, use the <code class="highlight"><span class="nb">pow</span><span class="p">()</span></code> method:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="mi">8</span>
</code></pre></div>
</li>
<li>
<p><strong>Square Root</strong>: </p>
<p>To calculate the square root of a number (i.e. <span class="arithmatex">\(\sqrt{4}\)</span>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="mf">2.0</span> 
</code></pre></div>
</li>
</ol>
</details>
</li>
</ol>
</li>
</ol>
<h3 id="the-lidar-sensor">The LiDAR Sensor<a class="headerlink" href="#the-lidar-sensor" title="Permanent link"></a></h3>
<p>As you'll know, the black spinning device on the top of your robot is a <em>LiDAR Sensor</em>. As discussed previously, this sensor uses laser pulses to measure the distance to nearby objects. The sensor spins continuously so that it can fire these laser pulses through a full 360 arc, and generate a full 2-dimensional map of the robot's surroundings.</p>
<p>This data is published onto the ROS network to a topic called <code>/scan</code>. Use the same methods that you used in <a href="#ex1">Exercise 1</a> to find out what data type (<em>"interface"</em>) this topic uses.</p>
<div class="admonition info">
<p class="admonition-title">Post-lab Quiz</p>
<p>Make a note of this, there'll be a post-lab quiz question on it!</p>
</div>
<p>Launch RViz, so that we can see the data coming from this sensor in real-time:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>rviz.launch.py<span class="w"> </span>environment:<span class="o">=</span>real
</code></pre></div><p></p>
<hr>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/real_rviz_vs_arena.png" width="700px"></a></p>
</figure>
<p>The green dots illustrate the LiDAR data. Hold your hand out to the robot and see if you can see it being detected by the sensor... a cluster of green dots should form on the screen to indicate where your hand is located in relation to the robot. Move your hand around and watch the cluster of dots move accordingly. Move your hand closer and farther away from the robot and observe how the dots also move towards or away from the robot on the screen. </p>
<p>This data is really useful and (as we observed during the previous lab session) it allows us to build up 2-dimensional maps of an environment with considerable accuracy. This is, of course, a very valuable skill for a robot to have if we want it to be able to navigate autonomously, and we'll explore this further later on. For now though, we'll look at how we can use the LiDAR data ourselves to build Nodes that make the robot detect and follow walls!</p>
<p>Once you're done, close down RViz by hitting <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong>. </p>
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 3: Wall Following<a class="headerlink" href="#ex3" title="Permanent link"></a></h4>
<ol>
<li>
<p>In VS Code, click on the <code>ex3.py</code> file in the File Explorer to display it in the editor.</p>
</li>
<li>
<p>Have a look through the code and see if you can work out what's going on. Here's a few points to start with:</p>
<ol>
<li>
<p>Velocity control is handled in the same way as in the previous exercise:</p>
<ol>
<li>
<p>To make the robot move at a linear velocity of <code>x</code> (m/s) and/or an angular velocity of <code>y</code> (rad/s):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">move_at_velocity</span><span class="p">(</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>    <span class="n">linear</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">angular</span> <span class="o">=</span> <span class="n">y</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>To make the robot stop moving:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>The data from the LiDAR sensor has been preprocessed and encapsulated in a separate class (much like <code>Pose</code> in the previous exercise). This one is called <code>Lidar</code>, which is instantiated on line 15:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">lidar</span> <span class="o">=</span> <span class="n">Lidar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
<p>This class splits up data from the LiDAR sensor into a number of different segments to focus on a number of distinct zones around the robot's body (to make the data a bit easier to deal with). For each of the segments (as shown in the figure below) a single distance value can be obtained, which represents the average distance to any object(s) within that particular angular zone:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="lidar_segments.png" width="500px"></a>
</figure><p></p>
<p>In the code, we can obtain the distance measurement (in meters) from each of the above zones as follows:</p>
<ol>
<li><code>self.lidar.distance.front</code> to obtain the average distance to any object(s) in front of the robot (within the frontal zone).</li>
<li><code>self.lidar.distance.l1</code> to obtain the average distance to any object(s) located within LiDAR zone L1.</li>
<li><code>self.lidar.distance.r1</code> to obtain the average distance to any object(s) located within LiDAR zone R1.<br>
    and so on...</li>
</ol>
</li>
<li>
<p>The code template has been developed to detect a wall on the robot's <em>left-hand side</em>.</p>
<ol>
<li>We use distance measurements from LiDAR zones L3 and L4 to determine the alignment of the robot to a left-hand wall.</li>
<li>
<p>This is determined by calculating the difference between the distance measurements reported from these two zones:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="n">wall_slope</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lidar</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">l3</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lidar</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">l4</span>
</code></pre></div>
</li>
<li>
<p>This is a <em>spatial difference</em> between LiDAR beams <code>l3</code> and <code>l4</code>, and can be used as a simple measure of local wall slope or relative offset between the robot and the wall.</p>
<p>If this value is close to zero, then the robot and the wall are well aligned. If not, then the robot is at an angle to the wall, and it needs to adjust its angular velocity in order to correct for this:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="wall_slope.png" width="500px"></a>
</figure>  <p></p>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Run the node as it is, from <strong>TERMINAL 3</strong>:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab2<span class="w"> </span>ex3.py
</code></pre></div><p></p>
<hr>
<p>When you do this, you'll notice that the robot doesn't move at all (yet!), but the following data appears in the terminal:</p>
<ol>
<li>The distance measurements from each of the LiDAR zones.</li>
<li>The current value of the <code>wall_slope</code> parameter, i.e. how well aligned the robot currently is to a wall on its left-hand side.</li>
<li>The decision that has been made by the <code class="highlight"><span class="k">if</span></code> statement on the appropriate action that should be taken, given the current value of <code>wall_slope</code>.</li>
</ol>
</li>
<li>
<p>Now look at the code. The <em>"main"</em> part of the code is once again controlled by a timer.</p>
<div class="admonition info">
<p class="admonition-title">Post-lab Quiz</p>
<ul>
<li>What is the name of the main control method in <code>ex3.py</code>?</li>
<li>At what rate (in Hz) will this control method be executed?</li>
</ul>
</div>
</li>
<li>
<p><strong>Adapting the code</strong>:</p>
<ol>
<li>First, modify the <code>wall_slope</code> calculation so that the robot observes a wall on its <em>right-hand side</em> <strong>NOT</strong> its left. </li>
<li>Next, place the robot on the floor with a wall on its right-hand side</li>
<li>
<p>Manually vary the alignment of the robot and the wall and observe how the information that is being printed to the terminal changes as you do so.</p>
<div class="admonition note">
<p class="admonition-title">Question</p>
<p>The node will tell you if it thinks the robot needs to turn right or left in order to improve its current alignment with the wall. <strong>Is it making the correct decision?</strong></p>
</div>
</li>
<li>
<p>Currently, all velocity parameters inside the <code class="highlight"><span class="n">follow_wall</span><span class="p">()</span></code> method are set to zero.</p>
<ul>
<li>
<p>You'll need to set a constant <em>linear</em> velocity, so that the robot is always moving forwards. Set an appropriate value for this now, by editing the line that currently reads:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="n">lin_vel</span> <span class="o">=</span> <span class="mf">0.0</span>
</code></pre></div>
</li>
<li>
<p>The <em>angular</em> velocity of the robot will need to be adjusted conditionally, in order to ensure that the value of <code>wall_slope</code> is kept as low as possible at all times (i.e. the robot is kept in alignment with the wall). </p>
</li>
</ul>
<p>Adjust the value of <code>ang_vel</code> in each of the <code class="highlight"><span class="k">if</span></code> statement blocks so that this is achieved under each of the three possible scenarios.</p>
</li>
<li>
<p>Hopefully, by following the steps above, you will get to the point where you can make the robot follow a right-hand wall reasonably well, as long as the wall remains reasonably straight! Consider what would happen however if the robot were faced with either of the following situations:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="limitations.png" width="600px"></a>
</figure><p></p>
<p>You may have already observed this during your testing... how could you adapt the code so that such situations can be achieved?</p>
<details class="info">
<summary>Hints</summary>
<ol>
<li>You may need to consider the distance measurements from some other LiDAR zones!</li>
<li>
<p>The <code>ex3.py</code> template that was provided to you uses an <code>if</code> statement with three different cases:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">if</span> <span class="o">...</span><span class="p">:</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="k">else</span><span class="p">:</span>
</code></pre></div>
<p>You may need to add in some further cases to this to accommodate the additional situations discussed above, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">if</span> <span class="o">...</span><span class="p">:</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="k">else</span><span class="p">:</span>
</code></pre></div>
</li>
</ol>
</details>
</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<p>As discussed above, your completion of this exercise will be assessed as part of the post-lab!</p>
</div>
</li>
</ol>
<h3 id="cameras-and-robot-vision">Cameras and Robot Vision<a class="headerlink" href="#cameras-and-robot-vision" title="Permanent link"></a></h3>
<p>Our robot's have cameras, providing them with the ability to <em>"see"</em> their environment. Camera data can be used as yet another feedback signal to inform closed-loop control, which we will leverage now to implement <em>line following</em>. We will achieve this using a well established control algorithm known as <strong>PID Control</strong>, using the data from our robot's camera and applying some image processing techniques to this to detect and <em>locate</em> a coloured line printed on the floor.</p>
<p>Consider the following image obtained from a robot's camera, with a green line visible on the floor: </p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="line_following/overview.png" width="600px"></a></p>
</figure>
<p>PID Control is a clever algorithm that aims to minimise the <strong>Error</strong> between a <strong>Reference Input</strong>: a desired condition that we would like our robot to maintain; and a <strong>Feedback Signal</strong>: the condition that the robot is currently in (based on real-world data). The PID algorithm calculates an appropriate <strong>Controlled Output</strong> for our system that (when tuned appropriately) will act to minimise this error.   </p>
<p>If we want our robot to successfully follow a coloured line on the floor, we will need it to keep that line in the centre of its view point at all times by minimising the <strong>error</strong> between where the line currently is (the <strong>feedback signal</strong>) and where it should be (the <strong>reference input</strong>, i.e. the centre of its view point). In this case then, the PID algorithm provides us with an angular velocity command (the <strong>controlled output</strong>) to achieve this.</p>
<p>The full PID algorithm is as follows:</p>
<div class="arithmatex">\[
u(t)=K_{P} e(t) + K_{I}\int e(t)dt + K_{D}\dfrac{d}{dt}e(t)
\]</div>
<p>Where <span class="arithmatex">\(u(t)\)</span> is the <strong>Controlled Output</strong>, <span class="arithmatex">\(e(t)\)</span> is the <strong>Error</strong> (as illustrated in the figure above) and <span class="arithmatex">\(K_{P}\)</span>, <span class="arithmatex">\(K_{I}\)</span> and <span class="arithmatex">\(K_{D}\)</span> are Proportional, Integral and Differential <strong>Gains</strong> respectively, which each have different effects on a system in terms of its ability to maintain the desired state (the reference input). We must establish appropriate values for these gains by a process called <em>tuning</em>.</p>
<p>In fact, to allow our TurtleBot3 to follow a line, we actually only really need a <em>proportional</em> gain, so our control algorithm can be simplified considerably:</p>
<div class="arithmatex">\[
u(t)=K_{P} e(t)
\]</div>
<p>This is what's referred to as a <strong>"P" Controller</strong>, and the only gain we need to establish here is therefore <span class="arithmatex">\(K_{P}\)</span>.</p>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 4: Line Following<a class="headerlink" href="#ex4" title="Permanent link"></a></h4>
<h5 id="ex4a">Part A: Establishing a Feedback Signal (Detecting the Line)<a class="headerlink" href="#ex4a" title="Permanent link"></a></h5>
<ol>
<li>
<p>Launch RViz again in <strong>TERMINAL 3</strong>:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>rviz.launch.py<span class="w"> </span>environment:<span class="o">=</span>real
</code></pre></div><p></p>
<hr>
</li>
<li>
<p>In the "Displays" menu on the left-hand side, tick the box next to the "Camera" item. Live images from the robot's camera should then be displayed in the bottom left-hand corner of the RViz window.</p>
</li>
<li>
<p>Place the robot in the arena so that line on the arena floor is visible in the robot's vision.</p>
</li>
<li>
<p>Now, launch the <code>ex4_colour_detection.py</code> node in <strong>TERMINAL 4</strong>:</p>
<hr>
<p><strong>TERMINAL 4</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>ros2 run amr31001_lab2 ex4_colour_detection.py
</code></pre></div><p></p>
<hr>
<p>After a brief pause, a window should open displaying a scatter plot alongside a raw image obtained from the robot's camera.</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="line_following/hsv_cam_img.png" width="700px"></a>
</figure><p></p>
<p>The scatter plot shows all the different colours that are present in the raw camera image. These are plotted in terms of the <em>Hue</em> and <em>Saturation</em> values of each pixel in the image.</p>
</li>
<li>
<p>In the plot, you should be able to identify a cluster of data points that are the same colour as the line on the floor. From the plot, make a note of the range of Hue and Saturation values that these dots reside within.</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="line_following/hsv_plot.png" width="500px"></a>
</figure><p></p>
</li>
<li>
<p>Once you've done this, close the figure by clicking the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"></path></svg></span> icon in the top right corner, and also close the RViz window too. This should release <strong>TERMINAL 3</strong> and <strong>TERMINAL 4</strong>.</p>
</li>
</ol>
<h5 id="ex4b">Part B: Implementing Proportional Control (Following the Line)<a class="headerlink" href="#ex4b" title="Permanent link"></a></h5>
<ol>
<li>
<p>In VS Code, click on the <code>ex4_line_following.py</code> file in the File Explorer to display it in the editor.</p>
</li>
<li>
<p>Have a look through the code and see if you can work out what's going on. Here's a few points to start with:</p>
<ol>
<li>
<p>Once again, velocity control is handled in the same way as the previous exercises, using the <code class="highlight"><span class="n">Motion</span><span class="p">()</span></code> class and calls to <code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">move_at_velocity</span><span class="p">()</span></code> and <code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></code> commands.</p>
</li>
<li>
<p>The data from the robot's camera is once again handled by a separate class (much like <code>Pose</code> and <code>Lidar</code> in the previous exercises). This one (instantiated on line 15) is called <code>Camera</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">camera</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
<p>We'll look at how to use this shortly...</p>
</li>
</ol>
</li>
<li>
<p>The <em>"main"</em> part of the code is once again controlled by a timer and a "callback" function. </p>
<div class="admonition info">
<p class="admonition-title">Post-lab Quiz</p>
<ul>
<li>What is the name of the callback function (aka the "main" control method)?</li>
<li>At what rate (in Hz) will this run at?</li>
</ul>
</div>
</li>
<li>
<p>Run the node as it is, from <strong>TERMINAL 3</strong>:</p>
<hr>
<p><strong>TERMINAL 3</strong>:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>ros2 run amr31001_lab2 ex4_line_following.py
</code></pre></div><p></p>
<hr>
<p>To begin with, the robot shouldn't do anything, but a window should open showing a live feed from the robot's camera. You should also see a small blue circle hovering around somewhere in the image too.</p>
<p>Make sure the line on the floor is visible to the robot before proceeding any further.</p>
</li>
<li>
<p>Stop the node with <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>.</p>
</li>
<li>
<p>In VS Code, locate the line in the <code>ex4_line_following.py</code> file that reads:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">colour_filter</span><span class="p">()</span>
</code></pre></div>
<p>Into this, you can provide the Hue and Saturation ranges that you identified in <a href="#ex4a">Part A</a>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">colour_filter</span><span class="p">(</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>    <span class="n">hue</span><span class="o">=</span><span class="p">[</span><span class="n">MIN</span><span class="p">,</span> <span class="n">MAX</span><span class="p">],</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>    <span class="n">saturation</span><span class="o">=</span><span class="p">[</span><span class="n">MIN</span><span class="p">,</span> <span class="n">MAX</span><span class="p">]</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="p">)</span>
</code></pre></div>
<p>Replace <code>MIN</code> and <code>MAX</code> with your upper and lower hue and saturation values.</p>
</li>
<li>
<p>Run the code again. If your Hue and Saturation ranges are correct, and the line is in view then it should now be isolated in the image (all other pixels in the camera stream should be black).</p>
<p>The small blue circle should also now be located roughly in the middle of the line. If you move the robot now (whilst keeping the line in view) then the blue circle should move with the line, indicating that the line is successfully being detected by your filtering, and the image processing algorithms.</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="line_following/line_filtered.png" width="400px"></a>
</figure><p></p>
<p>If the line <em>isn't</em> successfully isolated then <a href="#ex4a">go back to Part A</a> and run the <code>ex4_colour_detection.py</code> node again. </p>
</li>
<li>
<p>The robot is now able to locate the position of the line in its viewpoint, so we have now successfully established the <strong>Feedback Signal</strong> for our proportional controller. In the code, this can be accessed as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">line_position_pixels</span>
</code></pre></div>
<p>Consider the figure from above, once again:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="line_following/overview.png" width="500px"></a>
</figure><p></p>
<p>In our code, we can now use this to calculate the robot's current positional error. Locate the lines that read:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="n">reference_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">image_width</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="n">error</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># TODO</span>
</code></pre></div>
<p>... and edit the <code class="highlight"><span class="n">error</span> <span class="o">=</span> <span class="o">...</span></code> line to correctly calculate the robot's positional error based on the real-time position of the line in its view point (<code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">line_position_pixels</span></code>).</p>
</li>
<li>
<p>Angular Velocity is the <strong>Controlled Output</strong> of our P Controller, calculated (once again) according to:</p>
<div class="arithmatex">\[
u(t)=K_{P} e(t)
\]</div>
<p>This is reflected in the code by the line that reads:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="n">ang_vel</span> <span class="o">=</span> <span class="n">kp</span> <span class="o">*</span> <span class="n">error</span>
</code></pre></div>
<p>Modify the <code class="highlight"><span class="bp">self</span><span class="o">.</span><span class="n">motion</span><span class="o">.</span><span class="n">move_at_velcity</span><span class="p">()</span></code> line in the code to apply this angular velocity to the robot along with a constant (and <em>moderate</em>) linear velocity too. </p>
</li>
<li>
<p>Finally, tune the P Controller by identifying an appropriate proportional gain <code>kp</code> so that the robot successfully follows the line smoothly and consistently.</p>
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<p>As discussed above, your completion of this exercise will be assessed as part of the post-lab!</p>
</div>
</li>
</ol>
<h2 id="wrapping-up">Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permanent link"></a></h2>
<p>Before you leave, please shut everything down properly:</p>
<ol>
<li>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in any terminals that are still active.</li>
<li>
<p>Turn off your robot by entering the following command in <strong>TERMINAL 1</strong>:</p>
<hr>
<p><strong>TERMINAL 1</strong>:
</p><div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>waffle<span class="w"> </span>NUM<span class="w"> </span>off
</code></pre></div>
... replacing <code>NUM</code> with the number of the robot that you have been working with today.<p></p>
<hr>
<p>You'll need to enter <code>y</code> and then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm this.</p>
</li>
<li>
<p>Please then shut down the laptop, which you can do by clicking the battery icon in the top right of the desktop and selecting the "Power Off / Log Out" option in the drop-down menu.</p>
</li>
</ol>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/ubuntu_poweroff.svg" width="300px"></a></p>
</figure>
<p></p><center><p></p>
<p><strong>AMR31001 Lab 2 Complete!</strong>  </p>
<p></p></center><p></p>
<div class="footnote">
<hr>
<ol>
<li id="fn:wiki">
<p>https://en.wikipedia.org/wiki/Odometry&nbsp;<a class="footnote-backref" href="#fnref:wiki" title="Jump back to footnote 1 in the text"></a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 9, 2026 14:43:23 UTC"><span class="timeago" datetime="2026-01-09T14:43:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 9, 2026 14:43:23 UTC">2026-01-09</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="July 17, 2025 14:15:56 UTC"><span class="timeago" datetime="2025-07-17T14:15:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="July 17, 2025 14:15:56 UTC">2025-07-17</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../lab1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Lab 1: Mobile Robotics">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Lab 1: Mobile Robotics
              </div>
            </div>
          </a>
        
        
          
          <a href="../../waffles/" class="md-footer__link md-footer__link--next" aria-label="Next: The Waffles">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                The Waffles
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>   <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2026.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>