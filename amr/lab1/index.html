
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Practical Robotics Course Assignments with ROS2 and the TurtleBot3 Waffle.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/ros2/amr/lab1/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../lab2/">
      
      
      <link rel="icon" href="../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Lab 1: Mobile Robotics - ROS2 Courses in The Diamond</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Lab 1: Mobile Robotics - ROS2 Courses in The Diamond" >
      
        <meta  property="og:description"  content="Practical Robotics Course Assignments with ROS2 and the TurtleBot3 Waffle." >
      
        <meta  property="og:image"  content="https://tom-howard.github.io/ros2/assets/images/social/amr/lab1.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://tom-howard.github.io/ros2/amr/lab1/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Lab 1: Mobile Robotics - ROS2 Courses in The Diamond" >
      
        <meta  name="twitter:description"  content="Practical Robotics Course Assignments with ROS2 and the TurtleBot3 Waffle." >
      
        <meta  name="twitter:image"  content="https://tom-howard.github.io/ros2/assets/images/social/amr/lab1.png" >
      
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROS2 Courses in The Diamond" class="md-header__button md-logo" aria-label="ROS2 Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS2 Courses in The Diamond
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 1: Mobile Robotics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software/" class="md-tabs__link">
          
  
  
    
  
  Running ROS

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../course/" class="md-tabs__link">
          
  
  
    
  
  The ROS 2 Course

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../waffles/" class="md-tabs__link">
          
  
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../com/" class="md-tabs__link">
          
  
  
    
  
  COM2009

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  AMR31001

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROS2 Courses in The Diamond" class="md-nav__button md-logo" aria-label="ROS2 Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    ROS2 Courses in The Diamond
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/robots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducing the Robots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version History
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Running ROS
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Running ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    WSL-ROS2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            WSL-ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/wsl-ros/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing WSL-ROS2 on your Own (Windows) Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing WSL-ROS2 from A University Managed Desktop Computer on Campus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/other-options/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Other Installation Options
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Other Installation Options
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/other-options/docker-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing "docker-ros2" for Linux, Mac (and Windows)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/other-options/utm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing with UTM (on a Mac)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/using-wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Using WSL-ROS2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Using WSL-ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    University Managed Desktops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/linux-term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A Quick Introduction to the Linux Terminal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VS Code and WSL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../course/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The ROS 2 Course
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            The ROS 2 Course
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1: Getting Started with ROS 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 2: Odometry & Navigation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 3: Beyond the Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4: Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 5: Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 6: Cameras, Machine Vision & OpenCV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../course/extras/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Extras
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/extras/launch-file-args/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch File Arguments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/extras/course-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The TUoS ROS Course Repo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../waffles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The Waffles
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/launching-ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launching ROS (and Pairing the Laptop)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Waffle (& ROS) Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Further (Essential) Exercises
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shutdown Procedures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    COM2009
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            COM2009
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assignment #1: An Introduction to ROS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Assignment #2: Team Robotics Project
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment #2: Team Robotics Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 1: Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-a/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part A (Weeks 1-6)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_3" id="__nav_5_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_3">
            <span class="md-nav__icon md-icon"></span>
            Part A (Weeks 1-6)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 1: Velocity Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 2: Avoiding Obstacles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-b/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part B (Weeks 7-12)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_4" id="__nav_5_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_4">
            <span class="md-nav__icon md-icon"></span>
            Part B (Weeks 7-12)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-b/task3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 3: Exploration & Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-b/task4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 4: Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with your ROS Package (in the Lab)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Key Assessment Info & Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    AMR31001
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            AMR31001
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lab 1: Mobile Robotics
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lab 1: Mobile Robotics
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-lab" class="md-nav__link">
    <span class="md-ellipsis">
      The Lab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Launching ROS and Making your Robot Move
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packages-and-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Packages and Nodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Packages and Nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Seeing the Waffle's Sensors in Action!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 2: Seeing the Waffle&#39;s Sensors in Action!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1-the-camera" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1: The Camera
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-the-lidar-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: The LiDAR Sensor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Visualising the ROS Network
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishers-and-subscribers-a-ros-communication-method" class="md-nav__link">
    <span class="md-ellipsis">
      Publishers and Subscribers: A ROS Communication Method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publishers and Subscribers: A ROS Communication Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Exploring ROS Topics and Interfaces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Publishing Velocity Commands to the "cmd_vel" Topic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Creating a ROS Package
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex7" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 7: A Python node to make the robot move
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex8" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 8 (Advanced): Alternative Motion Paths
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 2: Feedback Control
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-lab" class="md-nav__link">
    <span class="md-ellipsis">
      The Lab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Launching ROS and Making your Robot Move
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packages-and-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Packages and Nodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Packages and Nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Seeing the Waffle's Sensors in Action!
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exercise 2: Seeing the Waffle&#39;s Sensors in Action!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1-the-camera" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1: The Camera
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-the-lidar-sensor" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: The LiDAR Sensor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Visualising the ROS Network
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishers-and-subscribers-a-ros-communication-method" class="md-nav__link">
    <span class="md-ellipsis">
      Publishers and Subscribers: A ROS Communication Method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publishers and Subscribers: A ROS Communication Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Exploring ROS Topics and Interfaces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Publishing Velocity Commands to the "cmd_vel" Topic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Creating a ROS Package
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex7" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 7: A Python node to make the robot move
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex8" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 8 (Advanced): Alternative Motion Paths
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/tom-howard/ros2/edit/main/docs/amr/lab1.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/ros2/raw/main/docs/amr/lab1.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Lab 1: Mobile Robotics</h1>

<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You should be able to complete exercises 1-7 on this page within a two-hour lab session.</p>
</div>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>In this first AMR31001 <em>'Industry 4.0'</em> Lab you will learn how to use ROS 2 (the latest version of <a href="https://www.ros.org/" target="_blank">the Robot Operating System</a>) to control a robot's motion.</p>
<p>ROS 2 is an open-source, industry-standard robot programming framework, used in a range of industries such as agriculture, warehouse and factory automation and advanced manufacturing. </p>
<p>ROS 2 allows us to programme robots using a range of different programming languages (including C++, Java, MATLAB etc.), but we'll be using Python for these labs. In addition to this, ROS 2 runs on top of a Linux operating system called <em>'Ubuntu'</em>, and so we'll also learn a bit about how to use this too.</p>
<p>We'll be working with robots called <em>'TurtleBot3 Waffles'</em>, which you can <a href="../../about/robots/">find out a bit more about here</a>. </p>
<div class="admonition warning">
<p class="admonition-title">Pre-Lab Work</p>
<p>You <strong>must</strong> have completed the Pre-Lab Test before you can make a start on this lab. This is available on the AMR31001 Blackboard Course Page.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Assessment Info</p>
<p>This lab is <strong>summatively assessed</strong>.</p>
<ol>
<li>There's a <strong>post-lab quiz</strong> that you'll need to complete after this lab session has taken place, which will be released on Blackboard.</li>
<li>You'll also be marked on the work that you do <strong>in the lab</strong> for <a href="#ex7">Exercise 7</a>.</li>
</ol>
</div>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link">&para;</a></h3>
<p>In this lab you'll learn how to use ROS 2 to make a robot move, and we'll also look at how to create our own basic ROS 2 script (or <em>'Node'</em>), using Python.</p>
<p>From here on, we'll refer to ROS 2 as <em>"ROS"</em> for convenience!</p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link">&para;</a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Control a TurtleBot3 Waffle Robot, from a laptop, using ROS.</li>
<li>Launch ROS applications on the laptop and the robot using <code>ros2 launch</code> and <code>ros2 run</code>.</li>
<li>Interrogate a ROS network using ROS <em>command-line</em> and <em>graphical</em> tools.</li>
<li>Use ROS Communication Methods to publish messages.</li>
<li>Use a Linux operating system and work within a Linux Terminal.</li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="#ex1">Exercise 1: Launching ROS and Making your Robot Move</a></li>
<li><a href="#ex2">Exercise 2: Seeing the Waffle's Sensors in Action!</a></li>
<li><a href="#ex3">Exercise 3: Visualising the ROS Network</a></li>
<li><a href="#ex4">Exercise 4: Exploring ROS Topics and Messages</a></li>
<li><a href="#ex5">Exercise 5: Publishing Velocity Commands to the <code>/cmd_vel</code> Topic</a></li>
<li><a href="#ex6">Exercise 6: Creating a ROS Package</a></li>
<li><a href="#ex7">Exercise 7: A Python node to make the robot move</a></li>
<li><a href="#ex8">Exercise 8 (Advanced): Alternative Motion Paths</a></li>
</ul>
<h2 id="the-lab">The Lab<a class="headerlink" href="#the-lab" title="Permanent link">&para;</a></h2>
<h3 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>Before you do anything, you'll need to get your robot up and running, and make sure ROS is launched.</p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 1: Launching ROS and Making your Robot Move<a class="headerlink" href="#ex1" title="Permanent link">&para;</a></h4>
<p>You should have already been provided with a Robot and a Laptop (in fact, you're probably already reading this on the laptop!) </p>
<ol>
<li>
<p>First, identify the robot that you have been provided with. Each of our robots are uniquely named: <code>dia-waffleX</code>, where <code>X</code> is the <em>'Robot Number'</em> (a number between 1 and 50). Check the label printed on top of the robot to find out which one you have!</p>
</li>
<li>
<p>Open up a terminal instance on the laptop, either by pressing the <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span> buttons on your keyboard all at the same time, or by clicking the Terminal App icon in the favourites bar on the left-hand side of the desktop:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/terminal_icon.svg?width=60px" /></a>
</figure></p>
<p>We'll refer to this terminal as <strong>TERMINAL 1</strong>.</p>
</li>
<li>
<p>In <strong>TERMINAL 1</strong> type the following command to <em>pair</em> the laptop and robot, so that they can work together:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>waffle<span class="w"> </span>X<span class="w"> </span>pair
</code></pre></div>
<strong>... replacing <code>X</code> with the number of the robot that you have been provided with</strong>.</p>
<hr />
</li>
<li>
<p>Enter the password for the robot when requested (we'll tell you what this is in the lab).</p>
<p>You <em>may</em> see a message like this early on in the pairing process:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/ssh_auth.svg" width="600px" /></a>
</figure></p>
<p>If so, just type <code>yes</code> and then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm that you want to continue.</p>
</li>
<li>
<p>Once the pairing process is finished you should see a message saying <code>pairing complete</code>, displayed in blue in the terminal. </p>
</li>
<li>
<p>Then, in the same terminal (<strong>TERMINAL 1</strong>), enter the following command:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>waffle<span class="w"> </span>X<span class="w"> </span>term
</code></pre></div>
(again, replacing <code>X</code> with the number of <strong>your</strong> robot).</p>
<hr />
<p>Any text that was in the terminal should now disappear, and a green banner should appear across the bottom of the terminal window:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/tmux.svg" width="600px" /></a>
</figure></p>
<p>This is a terminal instance running <strong>on the robot</strong>, and any commands that you enter here will be <strong>executed on the robot</strong> (not the laptop!)</p>
</li>
<li>
<p>Now, launch ROS on the robot by entering the following command:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>ros.launch.py<span class="w"> </span>enable_depth:<span class="o">=</span><span class="nb">true</span>
</code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To paste text into a Linux terminal you'll need to use the Control + <strong>Shift</strong> + V keyboard keys: <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-shift">Shift</kbd><span>+</span><kbd class="key-v">V</kbd></span></p>
</div>
<hr />
<p>If all is well then the robot will play a nice <em>"do-re-me"</em> sound and a message like this should appear (amongst all the other text):</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>[tb3_status.py-#] ######################################
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>[tb3_status.py-#] ### dia-waffleX is up and running! ###
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>[tb3_status.py-#] ######################################
</code></pre></div>
<p>You shouldn't need to interact with this terminal instance any more now, but the screen will provide you with some regular real-time info related to the status of the robot. As such, keep this terminal open in the background and check on the <code>Battery</code> indicator every now and then:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Battery: 12.40V [100%]
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Low Battery <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 20H8V6h8m.67-2H15V2H9v2H7.33C6.6 4 6 4.6 6 5.33v15.34C6 21.4 6.6 22 7.33 22h9.34c.74 0 1.33-.59 1.33-1.33V5.33C18 4.6 17.4 4 16.67 4M15 16H9v3h6z"/></svg></span></p>
<p><strong>The robot's battery won't last a full 2-hour lab session!!</strong></p>
<p>When the capacity indicator reaches around 15% then it will start to beep, and when it reaches ~10% it will stop working all together.  Let a member of the teaching team know when the battery is running low and we'll replace it for you. (It's easier to do this when it reaches 15%, rather than waiting until it runs below 10%!)</p>
</div>
<p>ROS is now up and running on the robot, and we're ready to go!</p>
<p>You should leave <strong>TERMINAL 1</strong> alone now, just leave it running in the background for the rest of the lab.</p>
</li>
<li>
<p>The next <strong>crucial step</strong> is to connect the laptop to the ROS network that we've just established on the robot. The two devices will communicate with one another via the University Wireless network, but there's one more step required to link them together. </p>
<p>Open up <strong>a new terminal instance</strong> on the laptop (either by using the <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span> keyboard shortcut, or by clicking the Terminal App icon) and enter the following command:</p>
<hr />
<p><strong>TERMINAL 2:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rmw_zenoh_cpp<span class="w"> </span>rmw_zenohd
</code></pre></div>
<hr />
<p>Leave both of these terminals alone, but <strong>keep them running in the background at all times</strong> while working with your robot.</p>
</li>
<li>
<p>Next, open up a <em>new terminal instance</em> on the laptop (by pressing <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span> or clicking the Terminal App desktop icon, as you did before). We'll call this one <strong>TERMINAL 3</strong>.</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> enter the following command:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div></p>
<hr />
</li>
<li>
<p>Follow the instructions provided in the terminal to drive the robot around using specific buttons on the keyboard:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/cli/teleop_keymap.svg" /></a>
</figure></p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the Teleop node when you've had enough fun.</p>
</li>
</ol>
<h3 id="packages-and-nodes">Packages and Nodes<a class="headerlink" href="#packages-and-nodes" title="Permanent link">&para;</a></h3>
<p>ROS applications are organised into <em>packages</em>. Packages are basically folders containing scripts, configurations and launch files (ways to launch those scripts and configurations).  </p>
<p><em>Scripts</em> tell the robot what to do and how to act. In ROS, these scripts are called <em>nodes</em>. <em>ROS Nodes</em> are executable programs that perform specific robot tasks and operations. These are typically written in C++ or Python, but it's possible to write ROS Nodes using other programming languages too.</p>
<p>In Exercise 1 you launched a whole range of different nodes on the ROS Network using the following two commands: </p>
<ol>
<li><code>ros2 launch tuos_tb3_tools ros.launch.py ...</code> (on the <em>robot</em>, in <strong>TERMINAL 1</strong>).</li>
<li><code>ros2 run turtlebot3_teleop teleop_keyboard</code> (on the <em>laptop</em>, in <strong>TERMINAL 3</strong>).</li>
</ol>
<p>The first of the above was a ROS 2 <code>launch</code> command, which has the following key parts to it (after the <code>ros2 launch</code> bit):</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span><span class="o">{[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Package<span class="w"> </span>name<span class="o">}</span><span class="w"> </span><span class="o">{[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Launch<span class="w"> </span>file<span class="o">}</span><span class="w"> </span><span class="o">{[</span><span class="m">3</span><span class="o">]</span><span class="w"> </span>Arguments<span class="w"> </span><span class="o">(</span>optional<span class="o">)}</span>
</code></pre></div>
<p>The first <strong>two</strong> of these are the most important: </p>
<p><strong>Part [1]</strong> specifies the name of the <em>ROS package</em> containing the functionality that we want to execute.<br />
<strong>Part [2]</strong> is a file within that package that tells ROS exactly what scripts (<em>'nodes'</em>) that we want to launch. We can launch multiple nodes at the same time from a single launch file.  </p>
<p>The second command was a ROS 2 <code>run</code> command: <a name="ros2-run"></a></p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ros2<span class="w"> </span>run<span class="w"> </span><span class="o">{[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Package<span class="w"> </span>name<span class="o">}</span><span class="w"> </span><span class="o">{[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Node<span class="w"> </span>name<span class="o">}</span>
</code></pre></div>
<p>Here, <strong>Part [1]</strong> is the same as the <code>ros2 launch</code> command, but <strong>Part [2]</strong> is slightly different: <code>{[2] Node name}</code>. Here we are directly specifying a single script that we want to execute. We therefore use <code>ros2 run</code> if we only want to launch a <strong>single node</strong> on the ROS network (<code>teleop_keyboard</code> in this case, which is a Python script).</p>
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<p>What were the names of the two packages that we invoked in Exercise 1?</p>
</div>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 2: Seeing the Waffle's Sensors in Action!<a class="headerlink" href="#ex2" title="Permanent link">&para;</a></h4>
<p>Our Waffles have some pretty sophisticated sensors on them, allowing them to "see" the world around them. We won't really make much use of these during this lab, but this next exercise will allow you to see how the data from these devices could be used to help our robots do some very advanced things (with some clever programming, of course!)</p>
<h5 id="part-1-the-camera">Part 1: The Camera<a class="headerlink" href="#part-1-the-camera" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p>There shouldn't be anything running in <strong>TERMINAL 3</strong> now, after you closed down the <code>teleop_keyboard</code> node at the end of the previous exercise (<span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>). Return to this terminal and launch the <code>rqt_image_view</code> node:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rqt_image_view<span class="w"> </span>rqt_image_view
</code></pre></div></p>
<hr />
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<ol>
<li>We're using <code>ros2 run</code> here again, what does this mean?</li>
<li>Why did we have to type <code>rqt_image_view</code> twice?</li>
</ol>
</div>
</li>
<li>
<p>A new window should open. Maximise this (if it isn't already) and then select <code>/camera/color/image_raw</code> from the dropdown menu at the top-left of the application window.</p>
</li>
<li>Live images from the robot's camera should now be visible! Stick your face in front of the camera and see yourself appear on the laptop screen!</li>
<li>
<p>Close down the window once you've had enough (enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong>). This should release <strong>TERMINAL 3</strong> so that you can enter commands in it again.</p>
<p>The camera on the robot is quite a clever device. Inside the unit is two separate image sensors, giving it - effectively - both a left and right eye. The device then combines the data from both of these sensors and uses the combined information to infer depth from the images as well. Let's have a look at that in action now...</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> enter the following command:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>rviz.launch.py
</code></pre></div></p>
<hr />
<p>This will launch an application called <em>RViz</em>, which is a handy tool that allows us to <em>visualise</em> the data from all the sensors on-board our robots. When RViz opens, you should see something similar to the following:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/waffle_rviz.png" width="700px" /></a>
</figure></p>
<p>In the "Displays" menu on the left-hand side, click on the tick box next to the "DepthCloud" item. </p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/waffle_rviz_depth_cloud.png" width="600px" /></a>
</figure></p>
<p>The strange wobbly sheet of colour that should appear in front of the robot is the live image stream from the camera with depth applied to it at the same time. The camera is able to determine how far away each image pixel is from the camera lens, and then uses that to generate this 3-dimensional representation. </p>
</li>
<li>
<p>Again, place your hand or your face in front of the camera and hold steady for a few seconds (there may be a bit of a lag as all of this data is transmitted over the WiFi network). You should see yourself rendered in 3D in front of the robot! </p>
</li>
</ol>
<h5 id="part-2-the-lidar-sensor">Part 2: The LiDAR Sensor<a class="headerlink" href="#part-2-the-lidar-sensor" title="Permanent link">&para;</a></h5>
<p>In RViz you may have also noticed a lot of green dots scattered around the robot. This is a representation of the <em>displacement data</em> coming from the LiDAR sensor (the black device on the top of the robot). The LiDAR sensor spins continuously, sending out laser pulses into the environment as it does so. When a pulse hits an object it is reflected back to the sensor, and the time it takes for this to happen is used to calculate how far away the object is.</p>
<p>The LiDAR sensor spins and performs this process continuously at 1&deg; increments, so a full 360&deg; scan of the environment can be generated. This data is therefore really useful for things like <em>obstacle avoidance</em> and <em>mapping</em>. We'll have a quick look at the latter now.</p>
<ol>
<li>
<p>Close down RViz (click the "Close without saving" button, if asked).</p>
</li>
<li>
<p>Head back to <strong>TERMINAL 3</strong> and run the following command:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>slam.launch.py
</code></pre></div></p>
<hr />
<p>A new RViz screen will open up, this time showing the robot from a top-down view, and with the LiDAR data represented by multi-coloured dots this time instead.</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/waffle_slam.png" width="700px" /></a>
</figure></p>
<p>Underneath the LiDAR dots you should notice a map starting to form, with black lines representing fixed objects in the environment and white areas representing free space that the robot could travel around. ROS is using a process called <em>SLAM</em> (Simultaneous Localisation and Mapping) to generate a map of the environment, using the data from the LiDAR sensor.</p>
</li>
<li>
<p>Open up a new terminal instance now, we'll call this one <strong>TERMINAL 4</strong>. Launch the <code>teleop_keyboard</code> node in this one, in the same way that you did earlier:</p>
<hr />
<p><strong>TERMINAL 4:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div></p>
<hr />
</li>
<li>
<p>Drive the robot around a bit and watch how the map in RViz is updated as the robot explores new parts of the environment.</p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 4</strong> to stop the <code>teleop_keyboard</code> node.</p>
</li>
<li>
<p>Close down the RViz window, or enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop it too.</p>
</li>
</ol>
<p>We've now used both <code>ros2 launch</code> and <code>ros2 run</code> to launch ROS applications. These are both ROS <em>command-line tools</em>, and there are many others at our disposal. </p>
<p>Using <code>ros2 run</code> and <code>ros2 launch</code>, as we have done so far, it's easy to end up with a lot of different processes or <em>ROS Nodes</em> running on the network, some of which we will interact with, but others may just be running in the background. It is often useful to know exactly what <em>is</em> running on the ROS network, and there are a number of ways to do this.</p>
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 3: Visualising the ROS Network<a class="headerlink" href="#ex3" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>There shouldn't be anything running in <strong>TERMINAL 3</strong> now, so return to this terminal and use the <code>ros2 node</code> command to <em>list</em> the nodes that are currently running on the robot:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>ros2<span class="w"> </span>node<span class="w"> </span>list
</code></pre></div></p>
<hr />
<p>You should see a list of 6 items.</p>
</li>
<li>
<p>We can visualise the connections between the active nodes by using a ROS node called <code>rqt_graph</code>. Launch this as follows:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rqt_graph<span class="w"> </span>rqt_graph
</code></pre></div></p>
<hr />
</li>
<li>
<p>In the window that opens, select <code>Nodes/Topics (active)</code> from the dropdown menu in the top left. </p>
<p>What you should then see is a map of all the nodes in the list from above (as ovals), and arrows to illustrate the flow of information between them. This is a visual representation of the ROS network!</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/graph_waffle.png" width="600px" /></a>
</figure></p>
<p>Items that have a rectangular border are <em>ROS Topics</em>. ROS Topics are essentially communication channels, and ROS nodes can read (<em>subscribe</em>) or write (<em>publish</em>) to these topics to access sensor data, pass information around the network and make things happen.</p>
</li>
<li>
<p>Return to <strong>TERMINAL 4</strong> and launch the <code>teleop_keyboard</code> node again:</p>
<hr />
<p><strong>TERMINAL 4:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div></p>
<hr />
</li>
<li>
<p>Go back to the RQT Graph window now and hit the refresh icon (to the left of the <code>Nodes/Topics (active)</code> dropdown menu). </p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/graph_waffle_teleop.png" width="600px" /></a>
</figure></p>
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<p>What's changed? Make sure you know how to interpret these graphs.</p>
</div>
</li>
</ol>
<p>A ROS Robot could have hundreds of individual nodes running simultaneously to carry out all its necessary operations and actions. Each node runs independently, but uses <em>ROS communication methods</em> to communicate and share data with the other nodes on the ROS Network.</p>
<h3 id="publishers-and-subscribers-a-ros-communication-method">Publishers and Subscribers: A <em>ROS Communication Method</em><a class="headerlink" href="#publishers-and-subscribers-a-ros-communication-method" title="Permanent link">&para;</a></h3>
<p>ROS Topics are key to making things happen on a robot. Nodes can publish (<em>write</em>) and/or subscribe to (<em>read</em>) ROS Topics in order to share data around the ROS network. We have to use standardised data structures in ROS in order for this to all work. Different topics use different data structures, and there are a lot of different data structure <em>types</em> available for us to use (we can even define our own, but this is beyond the scope if this lab session). Let's have a look at Topics and their data structures in a bit more detail now...</p>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 4: Exploring ROS Topics and Interfaces<a class="headerlink" href="#ex4" title="Permanent link">&para;</a></h4>
<p>Much like the <code>ros2 node list</code> command, we can use <code>ros2 topic list</code> to list all the <em>topics</em> that are currently active on the network.</p>
<ol>
<li>
<p>Close down the <code>rqt_graph</code> window if you haven't done so already. This will release <strong>TERMINAL 3</strong> so that we can enter commands in it again. Leave the <code>teleop_keyboard</code> node in <strong>TERMINAL 4</strong> running. Return to <strong>TERMINAL 3</strong> and enter the following:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div></p>
<hr />
<p>A much larger list of items should be printed to the terminal now. See if you can spot <code>/cmd_vel</code> in the list.</p>
<p>This topic is used to control the velocity of the robot (<em>'command velocity'</em>).</p>
</li>
<li>
<p>Let's find out more about this using the <code>ros2 topic info</code> command.</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/cmd_vel
</code></pre></div></p>
<hr />
<p>This should provide an output similar to the following: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>Type: geometry_msgs/msg/TwistStamped
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>Publisher count: 1
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>Subscription count: 1
</code></pre></div>
<p>This tells us a few things: <a name="rostopic_info_explained"></a></p>
<ol>
<li>The <code>/cmd_vel</code> topic currently has 1 publisher (i.e. 1 node writing data to the topic).</li>
<li>There's also 1 <em>subscriber</em> (i.e. another node reading the data being written to the topic).</li>
<li>If we think back to <code>rqt_graph</code> (from the previous exercise), we know that the publisher is the <code>/teleop_keyboard</code> node, and the subscriber is a node called <code>/turtlebot3_node</code>. This node turns the topic data into motor commands, resulting in actual motion of the robot's wheels.</li>
<li>
<p>The <em>type</em> of data structure used by the <code>/cmd_vel</code> topic is defined as:  </p>
<p><center><code>geometry_msgs/msg/TwistStamped</code></center></p>
<p>This is a ROS <em>"Interface"</em>. </p>
<p><strong>Interfaces</strong></p>
<p>Data structures in ROS 2 are called <em>Interfaces</em>. </p>
<p>From the output above, <code>Type</code> refers to the <em>type</em> of data structure (i.e. the type of interface). The <code>Type</code> definition has three parts to it: <code>geometry_msgs</code>, <code>msg</code> and <code>TwistStamped</code>:</p>
<ol>
<li><code>geometry_msgs</code> is the name of the ROS package that this interface (data structure) belongs to</li>
<li><code>msg</code> tells us that it's a topic <em>message</em> interface (rather than another interface type, of which there are others, but we don't need to worry about them here)</li>
<li><code>TwistStamped</code> is the <em>name</em> of the message interface. </li>
</ol>
<p>We have just learnt then, that if we want to make the robot move we need to publish <code>TwistStamped</code> interface <em>messages</em> to the <code>/cmd_vel</code> topic. </p>
</li>
</ol>
</li>
<li>
<p>We can use the <code>ros2 interface</code> command to find out more about the <code>TwistStamped</code> message:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>geometry_msgs/msg/TwistStamped
</code></pre></div></p>
<hr />
<p>From this, the bottom bit is of most interest to us: <a name="show-twist"></a></p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>Twist twist
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>        Vector3  linear
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>                float64 x
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>                float64 y
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>                float64 z
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>        Vector3  angular
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>                float64 x
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>                float64 y
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>                float64 z
</code></pre></div>
<p>Hmmm, this looks complicated. Let's find out what it all means...</p>
</li>
</ol>
<h3 id="velocity-control">Velocity Control<a class="headerlink" href="#velocity-control" title="Permanent link">&para;</a></h3>
<p>The motion of any mobile robot can be defined in terms of its three <em>principal axes</em>: <code>X</code>, <code>Y</code> and <code>Z</code>. In the context of our TurtleBot3 Waffle, these axes (and the motion about them) are defined as follows:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/principal_axes.svg" width="700px" /></a></p>
</figure>
<p>In theory then, a robot can move <em>linearly</em> or <em>angularly</em> about any of these three axes, as shown by the arrows in the figure. That's six <em>Degrees of Freedom</em> (DOFs) in total, achieved based on a robot's design and the actuators it is equipped with. Take a look back at the <code>ros2 interface show</code> output in <strong>TERMINAL 3</strong>. Hopefully it's a bit clearer now that these topic messages are formatted to give a ROS Programmer the ability to <em>ask</em> a robot to move in any one of its six DOFs. </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>Vector3  linear
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>        float64 x  &lt;-- Forwards (or Backwards)
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>        float64 y  &lt;-- Left (or Right)
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>        float64 z  &lt;-- Up (or Down)
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>Vector3  angular
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>        float64 x  &lt;-- &quot;Roll&quot;
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>        float64 y  &lt;-- &quot;Pitch&quot;
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>        float64 z  &lt;-- &quot;Yaw&quot;
</code></pre></div>
<p>Our TurtleBot3 only has two motors, so it doesn't actually have six DOFs! These two motors can be controlled independently, in a <em>"differential drive"</em> configuration, but this still only allows it to move with <strong>two degrees of freedom</strong> in total, as illustrated below.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/velocities.svg" width="700px" /></a></p>
</figure>
<p>Velocity can therefore only be applied <strong>linearly</strong> in the <strong>x-axis</strong> (<em>Forwards/Backwards</em>) and <strong>angularly</strong> in the <strong>z-axis</strong> (<em>Yaw</em>). </p>
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<p>Take note of all this, there may be a question on it!</p>
</div>
<h4 id="ex5"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 5: Publishing Velocity Commands to the "cmd_vel" Topic<a class="headerlink" href="#ex5" title="Permanent link">&para;</a></h4>
<ol>
<li>Stop the <code>teleop_keyboard</code> node now by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 4</strong>. We're going to use another graphical tool to help us publish messages to the <code>/cmd_vel</code> topic <em>directly</em> now.</li>
<li>
<p>Go back to <strong>TERMINAL 3</strong> and enter the following command to launch the <em>RQT Message Publisher</em> node:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rqt_publisher<span class="w"> </span>rqt_publisher
</code></pre></div></p>
<hr />
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/msg_pub.png" width="600px" /></a>
</figure></p>
</li>
<li>
<p>In the "<strong>Topic</strong>" dropdown menu select <code>/cmd_vel</code>.</p>
</li>
<li>
<p>Move along to the right and enter a value of <code>10</code> in the box next to the "<strong>Freq.</strong>" label.</p>
</li>
<li>
<p>Further to the right, click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> box to add this as a publisher to the main <em>"Publisher Table"</em>.</p>
</li>
<li>
<p>In the Publisher Table, click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m6.427 4.427 3.396 3.396a.25.25 0 0 1 0 .354l-3.396 3.396A.25.25 0 0 1 6 11.396V4.604a.25.25 0 0 1 .427-.177"/></svg></span> next to <code>/cmd_vel</code>, to expand the item and reveal two further items: <code>header</code> and <code>twist</code>:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/msg_pub_cmd_vel.png" width="600px" /></a>
</figure></p>
</li>
<li>
<p>Click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m6.427 4.427 3.396 3.396a.25.25 0 0 1 0 .354l-3.396 3.396A.25.25 0 0 1 6 11.396V4.604a.25.25 0 0 1 .427-.177"/></svg></span> icon next to <code>twist</code>, and then the subsequent <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m6.427 4.427 3.396 3.396a.25.25 0 0 1 0 .354l-3.396 3.396A.25.25 0 0 1 6 11.396V4.604a.25.25 0 0 1 .427-.177"/></svg></span> icons next to the <code>linear</code> and <code>angular</code> items that appear below this. Finally, you'll see some values in the "<strong>expression</strong>" column:</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/msg_pub_cmd_vel_values.png" width="600px" /></a>
</figure></p>
<p>Does this look familiar to <a href="#show-twist">the interface definition as we viewed it in the terminal before</a>?</p>
</li>
<li>
<p>Using what we learnt above about the way the robot can actually move, change <strong>one</strong> of the six values in the "expression" column that you think might make robot <strong><em>rotate on the spot</em></strong>. Before you do this, it's worth noting the following things:</p>
<ol>
<li>The unit of <em>linear</em> velocity is meters per second (m/s).</li>
<li>The unit of <em>angular</em> velocity is radians per second (rad/s).</li>
<li>Our Waffle robots can move with a <strong>maximum linear velocity</strong> of 0.26 m/s and a <strong>maximum angular velocity</strong> of 1.82 rad/s.</li>
</ol>
</li>
<li>
<p>Once you've entered a value, click on the checkbox to the left of <code>/cmd_vel</code> to start publishing these values to the topic. Observe what your robot does!</p>
</li>
<li>
<p>Set the value back to <code>0.0</code> and then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to make the robot stop moving.</p>
</li>
<li>
<p>Next, find an alternative velocity value that you can set in order to make the robot <strong><em>move forwards</em></strong> this time. (Don't forget to set the value back to <code>0.0</code> to make the robot stop moving again afterwards.)</p>
</li>
<li>
<p>Finally, enter a <em>combination</em> of velocity values to make the robot <strong><em>move in a circle</em></strong>.</p>
</li>
<li>
<p>Once you're finished, set all velocities back to <code>0.0</code>, make sure the robot is no longer moving, and then uncheck the box next to <code>/cmd_vel</code> to stop publishing messages. Click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></span> button in the top right-hand corner of the Message Publisher window to close it down.</p>
</li>
</ol>
<p>Hopefully you can see now that, in order to make a robot move, it's simply a case of publishing the right ROS Interface Message (<code>TwistStamped</code>) to the right ROS Topic (<code>/cmd_vel</code>). Earlier on in the lab we used the <code>teleop_keyboard</code> node to drive the robot around, a bit like a remote control car. In the background here all that was really happening was that the node was converting our keyboard button presses into velocity commands and publishing these to the <code>/cmd_vel</code> topic. In the previous exercise we looked at this in a bit more detail by actually directly applying values to the right message attributes and using the RQT Message Publisher to publish these for us. As I'm sure you can appreciate though, there's a limit to what we can achieve by working in this way though(circular and straight line motion is about it!)</p>
<p>In reality, robots need to be able to move around complex environments autonomously, which is quite a difficult task, and requires us to build bespoke applications. We can build these applications using Python, and we'll look at the core concepts behind this in the following exercises, starting by building a simple Node that will allow us to make our robot a bit more "autonomous". What we will do here forms the basis of the more complex approaches used by robotics engineers to <em>really</em> bring robots to life!</p>
<h4 id="ex6"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 6: Creating a ROS Package<a class="headerlink" href="#ex6" title="Permanent link">&para;</a></h4>
<p>As we learnt earlier, all ROS nodes must be contained within <em>packages</em>, so in order for us to create our own node, we first need to create our own package.</p>
<ol>
<li>
<p>In <strong>TERMINAL 3</strong> run the following command to navigate to a folder called the <em>"ROS Workspace"</em> using the <code>cd</code> ("change directory") command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src
</code></pre></div>
</li>
<li>
<p>Next run the following command to copy a package template from GitHub into the ROS Workspace folder:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/tom-howard/ros2_pkg_template.git
</code></pre></div>
</li>
<li>
<p>Now, run a script from within this template, to initialise the package for use:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>./ros2_pkg_template/init_pkg.sh<span class="w"> </span>amr31001_lab1
</code></pre></div>
</li>
<li>
<p>We're going to open this package in a text editor called <em>Visual Studio Code</em> (aka "VS Code") now, so that we can start making changes to it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>code<span class="w"> </span>./amr31001_lab1
</code></pre></div>
</li>
<li>
<p>When VS Code opens, you should see a <em>File Explorer</em> on the left-hand side which allows you to access all the files and folders within your package. </p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="vscode_explorer_package_xml.png" width="400px" /></a>
</figure></p>
<p>Look for a file here called <code>package.xml</code> and click on it. This will open this file in the main VS Code window, to allow you to edit it.</p>
</li>
<li>
<p>Look for the following lines in the <code>package.xml</code> file:</p>
<div class="highlight"><span class="filename">package.xml</span><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>&lt;maintainer email=&quot;your.name.1@sheffield.ac.uk&quot;&gt;Name 1&lt;/maintainer&gt;
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>&lt;maintainer email=&quot;your.name.2@sheffield.ac.uk&quot;&gt;Name 2&lt;/maintainer&gt;
</code></pre></div>
<p>Change <code>Name 1</code> to your name, and then change <code>your.name.1@sheffield.ac.uk</code> to your Sheffield email address! Then, do the same for your other Group member on the line below it. (If you're working in a group of more than 2 people, then you can add additional lines below this for your other group members.)</p>
<div class="admonition warning">
<p class="admonition-title">Post-lab</p>
<p><strong>This is important for the post-lab</strong>!</p>
<p>We'll be assessing your work here as part of the post-lab, so it's important that we can identify each member of your group. If any group members aren't listed here, then they won't receive any marks for this! </p>
<p>When entering your names, make sure you provide first names <strong>AND</strong> surnames for each group member.</p>
</div>
</li>
<li>
<p>Go back to <strong>TERMINAL 3</strong> now and run the following three commands:</p>
<ol>
<li>
<p>First: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws
</code></pre></div>
</li>
<li>
<p>Then:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--symlink-install<span class="w"> </span>--packages-select<span class="w"> </span>amr31001_lab1
</code></pre></div>
</li>
<li>
<p>And finally:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
</ol>
</li>
</ol>
<p>OK, <strong>package creation is now complete</strong>, so we're ready to start some Python programming...</p>
<h4 id="ex7"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 7: A Python node to make the robot move<a class="headerlink" href="#ex7" title="Permanent link">&para;</a></h4>
<p>Go back to VS Code now, and (in the File Explorer) look for a folder called <code>scripts</code>. Click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></span> icon next to this to expand the folder and reveal its content. A file called <code>basic_velocity_control.py</code> should be revealed. Click on this to open it in the main editor window.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="vscode_explorer_scripts.png" width="400px" /></a></p>
</figure>
<p>This is a (fairly) basic ROS 2 Python Node that will control the velocity of the robot. Let's talk through it:</p>
<ol>
<li>
<p>First, we have some imports:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">rclpy</span> <span class="c1"># (1)!</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">geometry_msgs.msg</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwistStamped</span> <span class="c1"># (2)!</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span> <span class="c1"># (3)!</span>
</code></pre></div>
<ol>
<li><code>rclpy</code> is the ROS client library for Python. We need this so that our Python node can interact with ROS.</li>
<li><a href="#ex4">We know from earlier</a> that in order to make a robot move we need to publish messages to the <code>/cmd_vel</code> topic, and that this topic uses a data structure (or Interface) called <code>geometry_msgs/msg/TwistStamped</code>. This is how we import the interface into our Python node so that we can create velocity commands for our robot (which we'll get to shortly...)</li>
<li>We'll use this to control timing in our node.</li>
</ol>
<p>Click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg></span> icons above to reveal more information about each line of the code.</p>
</li>
<li>
<p>Next, we declare some variables that we can use and adapt during the main execution of our code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="n">state</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># (1)!</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="n">vel</span> <span class="o">=</span> <span class="n">TwistStamped</span><span class="p">()</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>Inside the <code class="highlight"><span class="k">while</span></code> loop (explained shortly) we define two different operational states for the robot, and we can control which one is active by changing this value from <code>1</code> to <code>2</code> (and visa-versa).</li>
<li>
<p>We're instantiating a <code>TwistStamped</code> Interface message here and calling it <code>vel</code>. We'll assign velocity values to this in the <code class="highlight"><span class="k">while</span></code> loop later on.</p>
<p>Recall that a <code>TwistStamped</code> message contains six different components that we can assign values to. <a href="#velocity-control">Which <em>two</em> are relevant to our robot</a>?</p>
</li>
</ol>
</li>
<li>
<p>Next we configure some important ROS-related things:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># (1)!</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="n">node</span> <span class="o">=</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="s2">&quot;basic_velocity_control&quot;</span><span class="p">)</span>  <span class="c1"># (2)!</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="n">vel_pub</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">TwistStamped</span><span class="p">,</span> <span class="s2">&quot;cmd_vel&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</code></pre></div>
<ol>
<li>Initialise <code>rclpy</code> and all the ROS communications that are necessary for our node. </li>
<li>Initialise this Python script as an actual ROS node, providing a name for it to be registered on the ROS network with ("basic_velocity_control" in this case).</li>
<li>Here we're setting up a publisher to the <code>/cmd_vel</code> topic so that the node can send velocity commands to the robot (using <code>TwistStamped</code> data).</li>
</ol>
</li>
<li>
<p>After this, we're defining another variable:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="n">timestamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (1)!</span>
</code></pre></div>
<ol>
<li>What time is it right now? This tells us the current "ROS Time" (in nanoseconds), which will be useful to compare against in the while loop.</li>
</ol>
</li>
<li>
<p>Now, we enter into a <code class="highlight"><span class="k">while</span></code> loop, which is where our code will spend the majority of its time once it's running:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">while</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">ok</span><span class="p">():</span> <span class="c1"># (1)!</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>    <span class="n">time_now</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (2)!</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>    <span class="n">elapsed_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">time_now</span> <span class="o">-</span> <span class="n">timestamp</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e-9</span> <span class="c1"># (3)!</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>    <span class="o">...</span>
</code></pre></div>
<ol>
<li>This returns <code class="highlight"><span class="kc">True</span></code> as long as the node is alive, so all the code inside the <code class="highlight"><span class="k">while</span></code> loop will continue to execute as long as this is the case.</li>
<li>What time is it <em>now</em>? Check the time at the start of each iteration of the <code class="highlight"><span class="k">while</span></code> loop, and assign this to a variable called <code>time_now</code>.</li>
<li>Determine how much time has elapsed (in seconds) since the <code>timestamp</code> was last updated.</li>
</ol>
<p>Everything that's indented below the <code class="highlight"><span class="k">while</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">ok</span><span class="p">():</span></code> line will continue to be executed over and over again until we ask our node to stop. The code will execute line-by-line from top-to-bottom within this <code class="highlight"><span class="k">while</span></code> loop, and will then go back to the top again and repeat it all over and over and <em>over</em> again! Each repeat is called an <em>"iteration"</em>.</p>
<ol>
<li>
<p>An <code class="highlight"><span class="k">if</span></code> statement now controls the state of operation for our robot. </p>
<ol>
<li>
<p>In state <code>1</code> we set velocities that will make the robot move forwards (linear X velocity only) for a certain amount of time and then stop. How long will the robot move forwards for, and at what velocity?</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> 
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>    <span class="k">if</span> <span class="n">elapsed_time</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># (1)!</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="c1"># (2)!</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    <span class="k">else</span><span class="p">:</span> <span class="c1"># (3)!</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># (4)!</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>        <span class="n">state</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># (5)!</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (6)!</span>
</code></pre></div>
<ol>
<li>If the elapsed time is less than 2 seconds...</li>
<li>Set a linear velocity so that the robot will move forwards.</li>
<li>If the elapsed time has <em>exceeded</em> 2 seconds...</li>
<li>Set our robot's velocities to <code>0.0</code> to make it stop.</li>
<li>In the next loop iteration, go into state 2 instead.</li>
<li>Reset the timestamp to start counting up again. </li>
</ol>
</li>
<li>
<p>In state <code>2</code> we set velocities that will make the robot turn on the spot (angular Z velocity only) for a certain amount of time and then stop. How long will it do this for, and at what velocity?</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">elif</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>    <span class="k">if</span> <span class="n">elapsed_time</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span> <span class="c1"># (1)!</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># (2)!</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>    <span class="k">else</span><span class="p">:</span> <span class="c1"># (3)!</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># (4)!</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span> 
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>        <span class="n">state</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># (5)!</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (6)!</span>
</code></pre></div>
<ol>
<li>While the elapsed time is less than 4 seconds...</li>
<li>Apply an angular velocity to the robot to make it turn on the spot.</li>
<li>Once the elapsed time has <em>exceeded</em> 4 seconds...</li>
<li>Set the robot's velocities back to <code>0.0</code> to make it stop.</li>
<li>In the next loop iteration, go back into state 1 again (moving forwards).</li>
<li>Reset the timestamp to start counting up once more. </li>
</ol>
</li>
</ol>
</li>
<li>
<p>And after the <code class="highlight"><span class="k">if</span></code> statement:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="n">node</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="c1"># (1)!</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>    <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[State = </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">] Publishing velocities:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>    <span class="sa">f</span><span class="s2">&quot;  - linear.x: </span><span class="si">{</span><span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [m/s]</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>    <span class="sa">f</span><span class="s2">&quot;  - angular.z: </span><span class="si">{</span><span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [rad/s].&quot;</span><span class="p">,</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>    <span class="n">throttle_duration_sec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="p">)</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="n">vel_pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel</span><span class="p">)</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>This (and the following 5 lines) will print a message to the terminal, to provide us with regular updates on what state the node is currently in and what velocities have been set (in the <code class="highlight"><span class="k">if</span></code> statement above).</li>
<li>
<p>This line is crucial: this operation actual publishes the velocity commands to the <code>/cmd_vel</code> topic, to make the robot actual act on our instructions.</p>
<p>Regardless of what happens in the <code>if</code> states above, we <em>always</em> publish a velocity command to the <code>/cmd_vel</code> topic here (every loop iteration).</p>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Go back to <strong>TERMINAL 3</strong> now, run the code and see what happens. <em>Make sure the robot is on the floor and has enough room to roam around before you do this</em>!</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab1<span class="w"> </span>basic_velocity_control.py
</code></pre></div></p>
<hr />
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the node from running once you've seen enough.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The robot will continue to move even after you've stopped the node! Run the following command to stop it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab1<span class="w"> </span>stop_me.py
</code></pre></div>
</div>
</li>
<li>
<p><strong>Your Task</strong>:</p>
<p>The aim here is to make the robot follow a <strong>square motion path</strong> of dimensions <strong>0.5m x 0.5m</strong>. As it is though, the <code>basic_velocity_control.py</code> node doesn't actually do this yet, and you need to fix it!</p>
<p>Edit the code so that the robot actually follows a <strong>0.5m x 0.5m square motion path</strong>!</p>
<div class="admonition info">
<p class="admonition-title">Post-lab</p>
<p>As discussed above, your completion of this exercise will be assessed as part of the post-lab!</p>
</div>
</li>
</ol>
<h4 id="ex8"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"/></svg></span> Exercise 8 (Advanced): Alternative Motion Paths<a class="headerlink" href="#ex8" title="Permanent link">&para;</a></h4>
<p><em>If you have time, have a go at this now...</em></p>
<p>How could you adapt the code further to achieve some more interesting motion profiles?</p>
<ol>
<li>
<p>First, go back to <strong>TERMINAL 3</strong> and make sure you're in the right file system location:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/amr31001_lab1/scripts
</code></pre></div>
</li>
<li>
<p>Then, make a copy of the <code>basic_velocity_control.py</code> code using the <code>cp</code> command (<strong>c</strong>o<strong>p</strong>y):</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>cp<span class="w"> </span>basic_velocity_control.py<span class="w"> </span>alt_velocity_control.py
</code></pre></div>
Which will create a copy called <code>alt_velocity_control.py</code></p>
</li>
<li>
<p>Use the following command to open up a text file in VS Code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>code<span class="w"> </span>../CMakeLists.txt
</code></pre></div>
</li>
<li>
<p>In this file, locate the lines (near the bottom of the file) that read:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a># Install Python executables
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>install(PROGRAMS
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>  scripts/basic_velocity_control.py
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>  scripts/stop_me.py
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>)
</code></pre></div>
<p>Insert a new line below the one that reads <code>scripts/basic_velocity_control.py</code>, so that it now looks like this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a># Install Python executables
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>install(PROGRAMS
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>  scripts/basic_velocity_control.py
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>  scripts/alt_velocity_control.py
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>  scripts/stop_me.py
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>)
</code></pre></div>
<p>You've just added <code>alt_velocity_control.py</code> as a new node within your package. </p>
<p>Save the file and close it.</p>
</li>
<li>
<p>Go back to <strong>TERMINAL 3</strong> and run the following 3 commands again, in order:</p>
<ol>
<li>
<p>First: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws
</code></pre></div>
</li>
<li>
<p>Then:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--symlink-install<span class="w"> </span>--packages-select<span class="w"> </span>amr31001_lab1
</code></pre></div>
</li>
<li>
<p>And finally:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Go back to VS Code and find your new <code>alt_velocity_control.py</code> file. Click on it to open it in the editor.</p>
</li>
<li>
<p><strong>NOW</strong> see if you can edit this to achieve either of the more complex motion profiles illustrated below.</p>
<p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="move_alt.png" /></a>
</figure></p>
<ol>
<li><strong>Profile (a):</strong> The robot needs to follow a <em>figure-of-eight</em> shaped path, where a linear and angular velocity command are set simultaneously to generate circular motion. Velocities will need to be defined in order to achieve <strong>a path diameter of 1m</strong> for each of the two loops. Having set the velocities appropriately, you'll then need to work out how long it would take the robot to complete each loop, so that you can determine when the robot should have got back to its starting point. At this point you'll need to change the turn direction, so that the robot switches from anti-clockwise to clockwise turning. </li>
<li><strong>Profile (b):</strong> The robot needs to start and end in the same position, but move through intermediate points 1-7, in sequence, to generate the <em>stacked square</em> profile as shown. Each of the two squares must be <strong>1m x 1m in size</strong>, so you'll need to find the right velocity and duration pairs for moving forward and turning. You'll also need to change the turn direction once the robot reaches Point 3, and then again at Point 7!</li>
</ol>
</li>
<li>
<p>To run the file and test it out, you'll need to use <code>ros2 run ...</code>. How would you format this command (<a href="#ros2-run">recall this</a>)?<sup id="fnref:run-alt"><a class="footnote-ref" href="#fn:run-alt">1</a></sup></p>
<p>Whenever you need to stop the node, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in the terminal.</p>
<div class="admonition warning">
<p class="admonition-title">Remember</p>
<p>The robot will continue to move even after you've stopped the node! Run the following command to stop it whenever you need to:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab1<span class="w"> </span>stop_me.py
</code></pre></div>
</div>
</li>
</ol>
<h2 id="wrapping-up">Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permanent link">&para;</a></h2>
<p>Before you leave, please shut down your robot! Enter the following command in <strong>TERMINAL 3</strong> to do so:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>waffle<span class="w"> </span>X<span class="w"> </span>off
</code></pre></div>
... again, replacing <code>X</code> with the number of the robot that you have been working with today.</p>
<hr />
<p>You'll need to enter <code>y</code> and then hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm this.</p>
<p>Please then shut down the laptop, which you can do by clicking the battery icon in the top right of the desktop, clicking the Power icon (illustrated below) and then selecting "Power Off..." in the menu.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/ubuntu_poweroff.svg" width="300px" /></a></p>
</figure>
<p><center></p>
<p><strong>AMR31001 Lab 1 Complete!</strong><br />
<em>See you in the new year for Lab 2!</em></p>
<p></center></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:run-alt">
<p><code class="highlight">ros2<span class="w"> </span>run<span class="w"> </span>amr31001_lab1<span class="w"> </span>alt_velocity_control.py</code>&#160;<a class="footnote-backref" href="#fnref:run-alt" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="September 2, 2025 15:43:13 UTC"><span class="timeago" datetime="2025-09-02T15:43:13+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="September 2, 2025 15:43:13 UTC">2025-09-02</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="July 17, 2025 14:15:56 UTC"><span class="timeago" datetime="2025-07-17T14:15:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="July 17, 2025 14:15:56 UTC">2025-07-17</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: AMR31001">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                AMR31001
              </div>
            </div>
          </a>
        
        
          
          <a href="../lab2/" class="md-footer__link md-footer__link--next" aria-label="Next: Lab 2: Feedback Control">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Lab 2: Feedback Control
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br />  &copy; <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2025.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>