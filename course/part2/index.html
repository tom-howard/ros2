<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learn about Odometry, which informs us of a robot's position and orientation in an environment. Apply both open and closed-loop velocity control methods to a Waffle.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/ros2/course/part2/">
      
      
        <link rel="prev" href="../part1/">
      
      
        <link rel="next" href="../part3/">
      
      
      <link rel="icon" href="../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Part 2: Odometry &amp; Navigation - ROS 2 Lab Courses in The Diamond</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta property="og:type" content="website">
      
        <meta property="og:title" content="Part 2: Odometry &amp; Navigation - ROS 2 Lab Courses in The Diamond">
      
        <meta property="og:description" content="Learn about Odometry, which informs us of a robot's position and orientation in an environment. Apply both open and closed-loop velocity control methods to a Waffle.">
      
        <meta property="og:image" content="https://tom-howard.github.io/ros2/assets/images/social/course/part2.png">
      
        <meta property="og:image:type" content="image/png">
      
        <meta property="og:image:width" content="1200">
      
        <meta property="og:image:height" content="630">
      
        <meta property="og:url" content="https://tom-howard.github.io/ros2/course/part2/">
      
        <meta name="twitter:card" content="summary_large_image">
      
        <meta name="twitter:title" content="Part 2: Odometry &amp; Navigation - ROS 2 Lab Courses in The Diamond">
      
        <meta name="twitter:description" content="Learn about Odometry, which informs us of a robot's position and orientation in an environment. Apply both open and closed-loop velocity control methods to a Waffle.">
      
        <meta name="twitter:image" content="https://tom-howard.github.io/ros2/assets/images/social/course/part2.png">
      
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  This site is still under construction and won't be fully complete until February 2026.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-header__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS 2 Lab Courses in The Diamond
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 2: Odometry &amp; Navigation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software/" class="md-tabs__link">
          
  
  
    
  
  Software

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  The ROS 2 Course

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../com/" class="md-tabs__link">
          
  
  
    
  
  COM2009

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../amr/" class="md-tabs__link">
          
  
  
    
  
  AMR31001

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../waffles/" class="md-tabs__link">
          
  
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-nav__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    ROS 2 Lab Courses in The Diamond
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/robots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducing the Robots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version History
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/installing-wsl-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing WSL-ROS2 on Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/using-wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Accessing WSL-ROS2 on University Computers
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Accessing WSL-ROS2 on University Computers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started with WSL-ROS2 on the University Managed Desktops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/linux-term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A Quick Introduction to the Linux Terminal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VS Code and WSL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/docker-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing ROS 2 Using Docker (Linux &amp; Mac)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The ROS 2 Course
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            The ROS 2 Course
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1: Getting Started with ROS 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Part 2: Odometry &amp; Navigation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Part 2: Odometry &amp; Navigation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Links">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Exercises
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ros-topics-and-interfaces-from-part-1" class="md-nav__link">
    <span class="md-ellipsis">
      ROS Topics and Interfaces (from Part 1)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#odometry-in-action" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry In Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry In Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Exploring Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-explained" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry Explained
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry Explained">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pose" class="md-nav__link">
    <span class="md-ellipsis">
      Pose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-are-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      What are Quaternions?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#which-pose-values-apply-to-our-waffles" class="md-nav__link">
    <span class="md-ellipsis">
      Which Pose Values Apply to our Waffles?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-data-as-a-feedback-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry Data as a Feedback Signal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry Data as a Feedback Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Creating a Python Node to Process Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#velocity" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Navigation: Open-loop Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Navigation: Open-loop Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#velocity-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-degrees-of-freedom-of-our-waffles" class="md-nav__link">
    <span class="md-ellipsis">
      The Degrees of Freedom of our Waffles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Degrees of Freedom of our Waffles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Controlling Velocity with the ROS 2 CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Creating a Python Node to Make a Robot Move in a circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Implementing a Shutdown Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry-based-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry-based Navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry-based Navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Making our Robot Follow a Square Motion Path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      WSL-ROS2 Managed Desktop Users: Save your work!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 3: Beyond the Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4: Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 5: Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 6: Cameras, Machine Vision &amp; OpenCV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../extras/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Extras
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/launch-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch Files (Advanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/course-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The TUoS ROS Course Repo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    COM2009
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            COM2009
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assignment #1: An Introduction to ROS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Assignment #2: Team Robotics Project
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment #2: Team Robotics Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 1: Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-a/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part A (Weeks 1-6)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            Part A (Weeks 1-6)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 1: Velocity Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 2: Avoiding Obstacles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-b/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part B (Weeks 7-12)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            Part B (Weeks 7-12)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-b/task3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 3: Exploration &amp; Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-b/task4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 4: Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with your ROS Package (in the Lab)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Key Assessment Info &amp; Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../amr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    AMR31001
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            AMR31001
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amr/lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 1: Mobile Robotics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../waffles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The Waffles
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/launching-ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launching ROS (and Pairing the Laptop)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Waffle (&amp; ROS) Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Further (Essential) Exercises
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shutdown Procedures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Links">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Exercises
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ros-topics-and-interfaces-from-part-1" class="md-nav__link">
    <span class="md-ellipsis">
      ROS Topics and Interfaces (from Part 1)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#odometry-in-action" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry In Action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry In Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Exploring Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-explained" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry Explained
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry Explained">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pose" class="md-nav__link">
    <span class="md-ellipsis">
      Pose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-are-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      What are Quaternions?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#which-pose-values-apply-to-our-waffles" class="md-nav__link">
    <span class="md-ellipsis">
      Which Pose Values Apply to our Waffles?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#odometry-data-as-a-feedback-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry Data as a Feedback Signal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry Data as a Feedback Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Creating a Python Node to Process Odometry Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#velocity" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Navigation: Open-loop Velocity Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Navigation: Open-loop Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#velocity-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Velocity Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-degrees-of-freedom-of-our-waffles" class="md-nav__link">
    <span class="md-ellipsis">
      The Degrees of Freedom of our Waffles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Degrees of Freedom of our Waffles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Controlling Velocity with the ROS 2 CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Creating a Python Node to Make a Robot Move in a circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex5" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 5: Implementing a Shutdown Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odometry-based-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      Odometry-based Navigation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Odometry-based Navigation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex6" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 6: Making our Robot Follow a Square Motion Path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping Up
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      WSL-ROS2 Managed Desktop Users: Save your work!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/tom-howard/ros2/edit/main/docs/course/part2.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/ros2/raw/main/docs/course/part2.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


  <h1>Part 2: Odometry &amp; Navigation</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"></a></h2>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> <strong>Exercises</strong>: 6<br>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.03 7.39 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2zm2-13H9v2h6z"></path></svg></span> <strong>Estimated Completion Time</strong>: 3 hours<br>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8c0 2.4-1 4.5-2.7 6-1.4-1.3-3.3-2-5.3-2s-3.8.7-5.3 2C5 16.5 4 14.4 4 12a8 8 0 0 1 8-8m2 1.89c-.38.01-.74.26-.9.65l-1.29 3.23-.1.23c-.71.13-1.3.6-1.57 1.26-.41 1.03.09 2.19 1.12 2.6s2.19-.09 2.6-1.12c.26-.66.14-1.42-.29-1.98l.1-.26 1.29-3.21.01-.03c.2-.51-.05-1.09-.56-1.3-.13-.05-.26-.07-.41-.07M10 6a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1M7 9a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1m10 0a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1"></path></svg></span> <strong>Difficulty Level</strong>: Intermediate  </p>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link"></a></h3>
<p>In Part 2 we'll learn how to control a ROS robot's <strong>position</strong> and <strong>velocity</strong> from both the command line and through ROS Nodes. We'll also learn how to interpret the data that allows us to monitor a robot's position in its physical environment (odometry).  The things covered here form the basis of robot navigation in ROS, from simple open-loop methods to more advanced closed-loop control (both of which we will explore).</p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link"></a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Interpret the Odometry data published by a ROS Robot and identify the parts of these interface messages that are relevant to a 2-wheeled differential drive robot (such as the TurtleBot3 Waffle).</li>
<li>Develop Python nodes to obtain Odometry data from an active ROS network and <em>translate</em> this into useful information about a robot's <em>pose</em> in a convenient, human-readable way.</li>
<li>Implement <em>open-loop velocity control</em> of a robot using ROS command-line tools.</li>
<li>Develop Python nodes that use open-loop velocity control methods to make a robot follow a pre-defined motion path.</li>
<li>Combine both publisher <em>&amp;</em> subscriber communication methods into a single Python node to implement closed-loop (odometry-based) velocity control of a robot.</li>
<li>Explain the limitations of Odometry-based motion control methods. </li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link"></a></h3>
<h4 id="exercises">Exercises<a class="headerlink" href="#exercises" title="Permanent link"></a></h4>
<ul>
<li><a href="#ex1">Exercise 1: Exploring Odometry Data</a></li>
<li><a href="#ex2">Exercise 2: Creating a Python Node to Process Odometry Data</a></li>
<li><a href="#ex3">Exercise 3: Controlling Velocity with the ROS 2 CLI</a></li>
<li><a href="#ex4">Exercise 4: Creating a Python Node to Make a Robot Move in a circle</a></li>
<li><a href="#ex5">Exercise 5: Implementing a Shutdown Procedure</a></li>
<li><a href="#ex6">Exercise 6: Making our Robot Follow a Square Motion Path</a></li>
</ul>
<h4 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link"></a></h4>
<ul>
<li><a href="odom_subscriber/" target="_blank">An Odometry Subscriber Node</a></li>
<li><a href="move_circle/" target="_blank">A Simple Velocity Control Node (Move Circle)</a></li>
<li><a href="move_square/" target="_blank">Odometry-based Navigation (Move Square)</a></li>
</ul>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link"></a></h2>
<p><strong>Step 1: Launch your ROS 2 Environment</strong></p>
<p>If you haven't done so already, launch your ROS environment now:</p>
<ol>
<li><strong>WSL-ROS2 on a university managed desktop</strong>: follow <a href="../../software/using-wsl-ros/man-win/">the instructions here to launch it</a>.</li>
<li><strong><a href="../../software/installing-wsl-ros2/">Running WSL-ROS2 on your own machine</a></strong>: launch the Windows Terminal to access a WSL-ROS2 terminal instance.</li>
<li><strong>Docker Users</strong>: follow <a href="../../software/docker-ros2/">the instructions</a>.</li>
</ol>
<p>You should now have access to ROS 2 via a Linux terminal instance. We'll refer to this terminal instance as <strong>TERMINAL 1</strong>.</p>
<p><strong>Step 2: Restore your work (WSL-ROS2 Managed Desktop Users ONLY)</strong></p>
<p>Remember that <a href="../../software/using-wsl-ros/man-win/#backing-up-and-restoring-your-data">any work that you do within the WSL-ROS2 Environment will not be preserved between sessions or across different University computers</a>. At <a href="../part1/#backup">the end of Part 1</a> you should have run the <code>wsl_ros</code> tool to back up your home directory to your University <code>U:\</code> Drive. Once WSL-ROS2 is up and running, you should be prompted to restore this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>It looks like you already have a backup from a previous session:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  U:\wsl-ros\ros2-backup-XXX.tar.gz
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Do you want to restore this now? [y/n]
</code></pre></div>
<p>Enter <span class="keys"><kbd class="key-y">Y</kbd><span>+</span><kbd class="key-enter">Enter</kbd></span> to restore your work from last time. You can also restore your work at any time using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>wsl_ros<span class="w"> </span>restore
</code></pre></div>
<p><strong>Step 3: Launch VS Code</strong> </p>
<p>It's also worth launching VS Code now, so that it's ready to go for when you need it later on. </p>
<details class="warning">
<summary>WSL Users...</summary>
<p>It's important to launch VS Code within your WSL environment using the "WSL" extension. Always remember to check for this:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../software/figures/code-wsl-ext-on.svg" width="400px"></a>
</figure><p></p>
</details>
<p><strong>Step 4: Make Sure The Course Repo is Up-To-Date</strong></p>
<p><a name="course-repo"></a></p>
<p>In Part 1 you should have <a href="../part1/#course-repo">downloaded and installed The Course Repo</a> into your ROS environment. If you haven't done this yet then go back and do it now. If you <em>have</em> already done it, then it's worth just making sure it's all up-to-date, so run the following command in <strong>TERMINAL 1</strong> now to do so:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/tuos_ros/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>pull
</code></pre></div>
<p>Then build with Colcon: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-up-to<span class="w"> </span>tuos_ros
</code></pre></div>
<p>And finally, re-source your environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have any other terminal instances open, then you'll need run <code>source ~/.bashrc</code> in these too, in order for any changes made by the Colcon build process to propagate through to these as well.</p>
</div>
<p><strong>Step 5: Launch a Waffle Simulation</strong></p>
<p>In <strong>TERMINAL 1</strong> enter the following command to launch a simulation of a TurtleBot3 Waffle in an empty world:  </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>empty_world.launch.py
</code></pre></div>
<p>A Gazebo simulation window should open and within this you should see a TurtleBot3 Waffle in empty space:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/gz/tb3_empty_world_mid.png" width="700px"></a></p>
</figure>
<h2 id="ros-topics-and-interfaces-from-part-1">ROS Topics and Interfaces (from Part 1)<a class="headerlink" href="#ros-topics-and-interfaces-from-part-1" title="Permanent link"></a></h2>
<p>In Part 1 we learnt about ROS Topics, and about how the <code>teleop_keyboard</code> node could be used to publish messages to a particular topic in order to control the velocity of the robot (and thus change its <em>position</em>).</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>Which <em>topic</em> is used to control the velocity of the robot?</li>
<li>What <em>interface</em> does this topic use?</li>
</ol>
<p><a href="../part1/#ex3">Return here if you need a reminder on how to find the answers to these questions</a>.</p>
</div>
<p>Recall that Topics are key to making things happen on a robot: data is passed between the Nodes on a ROS network via Topics using standardised data structures called Message Interfaces, allowing each of these nodes to make decisions and perform necessary tasks to bring the robot to life.</p>
<p>Having investigated the <code>/cmd_vel</code> topic in Part 1, let's have a look at another topic now: <code>/odom</code>, and consider what the information here means, and what it's used for.</p>
<h2 id="odometry">Odometry<a class="headerlink" href="#odometry" title="Permanent link"></a></h2>
<p>Odometry is a process of monitoring a robot's <em>position</em> and <em>orientation</em> in an environment, which (as we'll learn) is essential for robot navigation. The position and orientation of a robot is referred to as its <em>pose</em>. A robot's pose is 3-dimensional, and is therefore defined in terms of three <em>"Principal Axes"</em>: <code>X</code>, <code>Y</code> and <code>Z</code>. In the context of our TurtleBot3 Waffles, these axes and the motion about them are defined as follows:</p>
<p><a name="principal-axes"></a></p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/principal_axes.svg" width="800"></a></p>
</figure>
<p>Not all the above positions and orientations apply to our Waffles, and we'll explore this further below.</p>
<h3 id="odometry-in-action">Odometry In Action<a class="headerlink" href="#odometry-in-action" title="Permanent link"></a></h3>
<p>Recall from Part 1 the command that we can use to list <em>all</em> the topics that are available on our robot:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<p>You should see <code>/odom</code> in this list, which is where our robot's Odometry data is published. Run the <code>ros2 topic</code> command again, but this time with an additional <code>-t</code> option:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list<span class="w"> </span>-t
</code></pre></div>
<p>Look for <code>/odom</code> again in the list, and you will <em>now</em> notice that the interface definition is provided in square brackets alongside the topic name:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>/odom [nav_msgs/msg/Odometry]
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>What package does this interface belong to?</li>
<li>What <em>type</em> of interface is it?</li>
<li>What is its name?</li>
</ol>
<p><a href="../part1/#msg-interface-struct">See here for a reminder on how to interpret an interface definition</a>.</p>
</div>
<p>Having established the data structure, let's explore the actual data now, using <code>rqt</code>.</p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 1: Exploring Odometry Data<a class="headerlink" href="#ex1" title="Permanent link"></a></h4>
<ol>
<li>
<p>In a new terminal instance (<strong>TERMINAL 2</strong>) use the following command to launch the <em>RQT Topic Monitor</em>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rqt_topic<span class="w"> </span>rqt_topic<span class="w"> </span>
</code></pre></div>
<p><em>Topic Monitor</em> should launch with a list of active topics matching the topic list from the <code>ros2 topic list</code> command that you ran earlier.</p>
</li>
<li>
<p>Check the box next to <code>/odom</code> and click the arrow next to it to expand the topic and reveal four <em>base fields</em>.</p>
</li>
<li>
<p>Expand the <code>pose</code> field, and then the further <code>pose</code> field within that. This should reveal two further fields: <strong><code>position</code></strong> and <strong><code>orientation</code></strong>. </p>
<p>Expand both of these to reveal the data being published to the <em>three</em> position (<code>x</code>, <code>y</code> and <code>z</code>) and <em>four</em> orientation (<code>x</code>, <code>y</code>, <code>z</code> and <code>w</code>) values.</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/topic_monitor.png" width="600"></a>
</figure><p></p>
</li>
<li>
<p>Next, launch a new terminal instance, we'll call this one <strong>TERMINAL 3</strong>. Arrange this next to the <code>rqt</code> window, so that you can see them both side-by-side.</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> launch the <code>teleop_keyboard</code> node <a href="../part1/#teleop">as you did in Part 1</a>: <a name="teleop"></a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-a">A</kbd></span> a couple of times to make the robot rotate on the spot. Observe how the odometry data changes in Topic Monitor.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Which <code>pose</code> fields are changing?</p>
</div>
</li>
<li>
<p>Now press the <span class="keys"><kbd class="key-s">S</kbd></span> key to halt the robot, then press <span class="keys"><kbd class="key-w">W</kbd></span> a couple of times to make the robot drive forwards.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Which <code>pose</code> fields are changing <em>now</em>? How does this relate to the position of the robot in the simulated world?</p>
</div>
</li>
<li>
<p>Now press <span class="keys"><kbd class="key-d">D</kbd></span> a couple of times and your robot should start to move in a circle.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What's happening with the <code>pose</code> data now? How is this data changing as your robot moves in a circular path.</p>
</div>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-s">S</kbd></span> in <strong>TERMINAL 3</strong> to stop the robot (but leave the <code>teleop_keyboard</code> node running).  Then, press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> to close down <code>rqt</code>. </p>
</li>
<li>
<p>Let's look at the Odometry data differently now. With the robot stationary, use <code>ros2 run</code> (in <strong>TERMINAL 2</strong>) to run a Python node from the <code>tuos_examples</code> package: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>tuos_examples<span class="w"> </span>robot_pose.py
</code></pre></div>
</li>
<li>
<p>Now (using the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong>) drive your robot around again, keeping an eye on the outputs that are being printed by the <code>robot_pose.py</code> node in <strong>TERMINAL 2</strong> as you do so.</p>
<p>The output of the <code>robot_pose.py</code> node shows you how the robot's <em>position</em> and <em>orientation</em> (i.e. <em>"pose"</em>) are changing in real-time as you move the robot around. The <code>"initial"</code> column tells us the robot's pose when the node was first launched, and the <code>"current"</code> column show us what its pose currently is. The <code>"delta"</code> column then shows the difference between the two.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Which pose parameters <em>haven't</em> changed, and is this what you would expect (considering <a href="#principal-axes">the robot's principal axes, as illustrated above</a>)?</p>
</div>
</li>
<li>
<p>Press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> and <strong>TERMINAL 3</strong>, to stop the <code>robot_pose.py</code> and <code>teleop_keyboard</code> nodes. </p>
</li>
</ol>
<h3 id="odometry-explained">Odometry Explained<a class="headerlink" href="#odometry-explained" title="Permanent link"></a></h3>
<p>Hopefully you're starting to understand what Odometry is now, but let's dig a little deeper using some key ROS command line tools again. IN <strong>TERMINAL 2</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/odom
</code></pre></div>
<p>This provides information about the interface used by this topic:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Type: nav_msgs/msg/Odometry
</code></pre></div>
<p>We can find out more about this interface using the <code>ros2 interface show</code> command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>nav_msgs/msg/Odometry
</code></pre></div>
<p>Look down the far left-hand side to identify the four <em>base fields</em> of the interface (the fields that are not indented):</p>
<p><a name="odom-base-fields"></a></p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>header</code></td>
<td style="text-align: center;"><code>std_msgs/Header</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>child_frame_id</code></td>
<td style="text-align: center;"><code>string</code></td>
</tr>
<tr>
<td style="text-align: center;"><strong>3</strong></td>
<td style="text-align: center;"><strong><code>pose</code></strong></td>
<td style="text-align: center;"><strong><code>geometry_msgs/PoseWithCovariance</code></strong></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;"><code>twist</code></td>
<td style="text-align: center;"><code>geometry_msgs/TwistWithCovariance</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>We saw all these in <code>rqt</code> earlier. As before, its item 3 that's of most interest to us...</p>
<h4 id="pose">Pose<a class="headerlink" href="#pose" title="Permanent link"></a></h4>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># Estimated pose that is typically relative to a fixed world frame.
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>geometry_msgs/PoseWithCovariance pose
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>        Pose pose
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>                Point position
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>                        float64 x
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>                        float64 y
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>                        float64 z
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>                Quaternion orientation
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>                        float64 x
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>                        float64 y
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>                        float64 z
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>                        float64 w
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>        float64[36] covariance
</code></pre></div>
<p>Within the <code>pose</code> base field we have two subfields: <code>pose</code> and <code>covariance</code>:</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>1</strong></td>
<td style="text-align: center;"><strong><code>pose</code></strong></td>
<td style="text-align: center;"><strong><code>Pose</code></strong></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>covariance</code></td>
<td style="text-align: center;"><code>float64[36]</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>It's the <code>pose</code> subfield that we're most interested in here, which contains two <em>further</em> subfields called <code>position</code> and <code>orientation</code>: </p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>position</code></td>
<td style="text-align: center;"><code>Point</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>orientation</code></td>
<td style="text-align: center;"><code>Quaternion</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<ol>
<li>
<p><code>position</code></p>
<p>Tells us where our robot is located in 3-dimensional space. This is expressed in units of <strong>meters</strong>.</p>
</li>
<li>
<p><code>orientation</code></p>
<p>Tells us which way our robot is pointing in its environment. This is expressed in units of <strong>Quaternions</strong>, which is a mathematically convenient way to store data related to a robot's orientation (it's a bit hard for us humans to understand and visualise this though, so we'll talk about how to convert it to a different format later).</p>
</li>
</ol>
<p>Pose is defined relative to an arbitrary reference point, typically where the robot was when it was turned on, or the origin of a simulated world. On our real TurtleBot3 Waffle robots, it is determined from:</p>
<ul>
<li>Data from the Inertial Measurement Unit (IMU) on the OpenCR board</li>
<li>Data from both the left and right wheel encoders</li>
<li>A <em>kinematic model</em> of the robot</li>
</ul>
<p>All the above information can then be used to calculate (and keep track of) the distance travelled by the robot from its pre-defined reference point using a process called <em>"dead-reckoning."</em></p>
<h4 id="what-are-quaternions">What are Quaternions?<a class="headerlink" href="#what-are-quaternions" title="Permanent link"></a></h4>
<p>Quaternions represent the orientation of something in 3 dimensional space<sup id="fnref:quaternions"><a class="footnote-ref" href="#fn:quaternions">1</a></sup>, as we can observe from the structure of the <code>nav_msgs/msg/Odometry</code> ROS interface, there are <strong>four fields</strong> associated with this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Quaternion orientation
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>        float64 x
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>        float64 y
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>        float64 z
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>        float64 w
</code></pre></div>
<p>For us, it's easier to think about the orientation of our robot in a <em>"Euler Angle"</em> representation, which tell us the degree of rotation about the <em>three principal axes</em> (<a href="#principal-axes">as discussed above</a>):</p>
<ul>
<li><span class="arithmatex">\(\theta_{x}\)</span>: The angular position about the <strong>X</strong>-axis, aka <strong>"Roll"</strong></li>
<li><span class="arithmatex">\(\theta_{y}\)</span>: The angular position about the <strong>Y</strong>-axis, aka <strong>"Pitch"</strong></li>
<li><span class="arithmatex">\(\theta_{z}\)</span>: The angular position about the <strong>Z</strong>-axis, aka <strong>"Yaw"</strong></li>
</ul>
<p>Fortunately, the maths involved in converting between these two orientation formats is fairly straight forward (<a href="https://automaticaddison.com/how-to-convert-a-quaternion-into-euler-angles-in-python/" target="_blank">see here</a>).</p>
<h3 id="which-pose-values-apply-to-our-waffles">Which Pose Values Apply to our Waffles?<a class="headerlink" href="#which-pose-values-apply-to-our-waffles" title="Permanent link"></a></h3>
<p>Referring back to the three <em>principal axes</em> from earlier: </p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/principal_axes.svg" width="500"></a></p>
</figure>
<p>You can also see here that our TurtleBot3 has two motors that allow it to move. As a result of this, it can only move in a 2D plane and so its pose can be fully represented by just 3 odometry terms in total: </p>
<ul>
<li><span class="arithmatex">\(x\)</span> &amp; <span class="arithmatex">\(y\)</span>: the 2D coordinates of the robot in the <strong>X</strong>-<strong>Y</strong> plane</li>
<li><span class="arithmatex">\(\theta_{z}\)</span>: the angle of the robot about the <strong>Z</strong>-axis (<em>yaw</em>)</li>
</ul>
<p>(unfortunately, it can't fly!)</p>
<h3 id="odometry-data-as-a-feedback-signal">Odometry Data as a Feedback Signal<a class="headerlink" href="#odometry-data-as-a-feedback-signal" title="Permanent link"></a></h3>
<p>Odometry data can be really useful for robot navigation, allowing us to keep track of where a robot is, how it's moving and how to get back to where we started. We therefore need to know how to use this data effectively within our Python nodes, and we'll explore this now.</p>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 2: Creating a Python Node to Process Odometry Data<a class="headerlink" href="#ex2" title="Permanent link"></a></h4>
<p>In Part 1 we learnt how to create a package and build simple Python nodes to publish and subscribe to messages on a topic. In this exercise we'll build a new subscriber node, much like we did previously, but this one will subscribe to the <code>/odom</code> topic that we've been talking about above. We'll also create a new package called <code>part2_navigation</code> for this node to live in!</p>
<ol>
<li>
<p>First, head to the <code>src</code> directory of your ROS 2 workspace in <strong>TERMINAL 2</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/
</code></pre></div>
</li>
<li>
<p>Clone the ROS 2 Package Template:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/tom-howard/ros2_pkg_template.git
</code></pre></div>
</li>
<li>
<p>Run the <code>init_pkg.sh</code> script within this to initalise that package with the name "part2_navigation":</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>./ros2_pkg_template/init_pkg.sh<span class="w"> </span>part2_navigation
</code></pre></div>
</li>
<li>
<p>Then navigate into the new package using <code>cd</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nb">cd</span><span class="w"> </span>./part2_navigation/
</code></pre></div>
</li>
<li>
<p>The subscriber that we will build here will have a similar structure to the subscriber that we built in Part 1. As a starting point, copy across the <code>subscriber.py</code> file from your <code>part1_pubsub</code> package using the <code>cp</code> command (i.e. <strong>c</strong>o<strong>p</strong>y):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>cp<span class="w"> </span>../part1_pubsub/scripts/subscriber.py<span class="w"> </span>./scripts/odom_subscriber.py
</code></pre></div>
<details class="info">
<summary>Info: Copying files in a terminal</summary>
<p>When using the <code>cp</code> command to copy things, we need to provide two key bits of information (at least): </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>cp SOURCE DEST
</code></pre></div>
<p>i.e.: copy the file <code>SOURCE</code> to the destination <code>DEST</code>.</p>
<p>Remember that we are located in our <code>part2_navigation</code> package root folder when we run this, and the file paths that we are using here are all <em>relative</em> to that location.</p>
<p>As such, <code>..</code> means "go back one directory," so when defining the <code>SOURCE</code> file that we want to copy, we're telling <code>cp</code> to go <em>out</em> of the <code>part2_navigation</code> directory (back to <code>~/ros2_ws/src/</code>), and then go <em>into</em> the <code>part1_pubsub</code> directory from there (and onwards into <code>scripts</code>).</p>
<p><code>.</code> means "this current directory," so when defining where we want the <code>subscriber.py</code> to be copied <em>to</em> (<code>DEST</code>), we're telling <code>cp</code> to start from where we currently are in the filesystem (i.e. <code>~/ros2_ws/src/part2_navigation/</code>) and copy it into the <code>scripts</code> directory from there (whilst also renaming it to <code>odom_subscriber.py</code>).</p>
</details>
</li>
<li>
<p>Next, head to the following page for step-by-step instructions on how to build the odometry subscriber:</p>
<p></p><center><a class="md-button" href="odom_subscriber/" target="_blank"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26zm7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26z"></path></svg></span> Building the <code>odom_subscriber.py</code> node</a></center> <p></p>
</li>
<li>
<p>Now, declare the <code>odom_subscriber.py</code> node as an executable in the <code>CMakeLists.txt</code>:</p>
<div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a># Install Python executables
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>install(PROGRAMS
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>  scripts/basic_velocity_control.py
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>  scripts/stop_me.py
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>  scripts/odom_subscriber.py
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>)
</code></pre></div>
</li>
<li>
<p>Head back to the terminal and use Colcon to build the package (including the new <code>odom_subscriber.py</code> node). This is a <strong>three-step process</strong>, that you must always follow:</p>
<ol>
<li>
<p>Navigate to the <strong>root</strong> of the ROS 2 workspace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
</code></pre></div>
</li>
<li>
<p>Build your package using <code>colcon</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part2_navigation<span class="w"> </span>--symlink-install
</code></pre></div>
</li>
<li>
<p>And finally, re-source the <code>.bashrc</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Now we're ready to run this! Do so using <code>ros2 run</code> and see what it does:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>odom_subscriber.py
</code></pre></div>
</li>
<li>
<p>Having followed all the steps, the output from your node should be similar to that shown below:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="odom_subscriber.gif" width="700px"></a>
  [TODO: NEEDS UPDATING]
</figure><p></p>
</li>
<li>
<p>Observe how the output (the formatted odometry data) changes while you move the robot around using the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong>.</p>
</li>
<li>Stop your <code>odom_subscriber.py</code> node in <strong>TERMINAL 2</strong> and the <code>teleop_keyboard</code> node in <strong>TERMINAL 3</strong> by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in each of the terminals.</li>
</ol>
<h2 id="velocity">Basic Navigation: Open-loop Velocity Control<a class="headerlink" href="#velocity" title="Permanent link"></a></h2>
<p>In order to change our robot's pose, we need to apply velocity to make it move. We learnt about this in Part 1, but let's look at it all in a bit more detail now.</p>
<p>We know that we can use the <code>/cmd_vel</code> topic to publish velocity commands to our robot. Let's remind ourselves how these velocity commands must be structured:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/cmd_vel
</code></pre></div>
<p>This tells us that the data that is transmitted on the <code>/cmd_vel</code> topic is of the <code>geometry_msgs/msg/TwistStamped</code> interface type.  </p>
<p>We also learnt how to find out more about this particular interface (using the <code>ros2 interface show</code> command): </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>geometry_msgs/msg/TwistStamped
</code></pre></div>
<p><a name="twist-stamped-struct"></a></p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>std_msgs/Header header
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>        builtin_interfaces/Time stamp
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>                int32 sec
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>                uint32 nanosec
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>        string frame_id
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>Twist twist
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>        Vector3  linear
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>                float64 x
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>                float64 y
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>                float64 z
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>        Vector3  angular
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>                float64 x
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>                float64 y
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>                float64 z
</code></pre></div>
<p>There are two base fields in this data structure:</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field Name</th>
<th style="text-align: center;">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>header</code></td>
<td style="text-align: center;"><code>std_msgs/Header</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>twist</code></td>
<td style="text-align: center;"><code>Twist</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>Each of these base fields are comprised of further subfields. It's the <code>twist</code> field that's of most interest to us, and this comprises two further subfields:</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field Name</th>
<th style="text-align: center;">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>linear</code></td>
<td style="text-align: center;"><code>Vector3</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>angular</code></td>
<td style="text-align: center;"><code>Vector3</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>Each of <em>these</em> contains 3 <em>further</em> subfields: <code>x</code>, <code>y</code> and <code>z</code>:</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field Name</th>
<th style="text-align: center;">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>x</code></td>
<td style="text-align: center;"><code>float64</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>y</code></td>
<td style="text-align: center;"><code>float64</code></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;"><code>z</code></td>
<td style="text-align: center;"><code>float64</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<h3 id="velocity-commands">Velocity Commands<a class="headerlink" href="#velocity-commands" title="Permanent link"></a></h3>
<p>There are therefore <strong>six</strong> velocity <em>fields</em> that we can assign values to when sending velocity commands to a ROS robot: <strong>two</strong> velocity <em>types</em>, each with <strong>three</strong> velocity <em>components</em>: </p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Velocity Type</th>
<th style="text-align: center;">Component 1</th>
<th style="text-align: center;">Component 2</th>
<th style="text-align: center;">Component 3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>linear</code></td>
<td style="text-align: center;"><code>x</code></td>
<td style="text-align: center;"><code>y</code></td>
<td style="text-align: center;"><code>z</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>angular</code></td>
<td style="text-align: center;"><code>x</code></td>
<td style="text-align: center;"><code>y</code></td>
<td style="text-align: center;"><code>z</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>These relate to a robot's <strong>six degrees of freedom</strong> (DOFs), and velocity commands are therefore formatted to give a ROS Programmer the ability to <em>ask</em> a robot to move in any one of its six DOFs. </p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">Component (Axis)</th>
<th style="text-align: center;">Linear Velocity</th>
<th style="text-align: center;">Angular Velocity</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>X</strong></td>
<td style="text-align: center;">"Forwards/Backwards"</td>
<td style="text-align: center;">"Roll"</td>
</tr>
<tr>
<td style="text-align: center;"><strong>Y</strong></td>
<td style="text-align: center;">"Left/Right"</td>
<td style="text-align: center;">"Pitch"</td>
</tr>
<tr>
<td style="text-align: center;"><strong>Z</strong></td>
<td style="text-align: center;">"Up/Down"</td>
<td style="text-align: center;">"Yaw"</td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<h3 id="the-degrees-of-freedom-of-our-waffles">The Degrees of Freedom of our Waffles<a class="headerlink" href="#the-degrees-of-freedom-of-our-waffles" title="Permanent link"></a></h3>
<p>Recall (again) our robot's <em>"Principal Axes"</em> and the motion about them:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/principal_axes.svg" width="500"></a></p>
</figure>
<p>As discussed above, our Waffles only have two motors. These two motors can be controlled independently (in what is known as a <em>"differential drive"</em> configuration), which ultimately provides it with a total of <strong>two degrees of freedom</strong> overall, as highlighted below.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/velocities.svg" width="800"></a></p>
</figure>
<p>When issuing velocity commands to our Waffles therefore, only two (of the six) velocity command fields are applicable: <strong>linear</strong> velocity in the <strong>x</strong>-axis (<em>Forwards/Backwards</em>) and <strong>angular</strong> velocity about the <strong>z</strong>-axis (<em>Yaw</em>).</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">Principal Axis</th>
<th style="text-align: center;">Linear Velocity</th>
<th style="text-align: center;">Angular Velocity</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>X</strong></td>
<td style="text-align: center;"><strong>"Forwards/Backwards"</strong></td>
<td style="text-align: center;"><del>"Roll"</del></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Y</strong></td>
<td style="text-align: center;"><del>"Left/Right"</del></td>
<td style="text-align: center;"><del>"Pitch"</del></td>
</tr>
<tr>
<td style="text-align: center;"><strong>Z</strong></td>
<td style="text-align: center;"><del>"Up/Down"</del></td>
<td style="text-align: center;"><strong>"Yaw"</strong></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p><a name="velocity_limits"></a></p>
<div class="admonition note">
<p class="admonition-title">Maximum Velocity Limits</p>
<p>Keep in mind (while we're on the subject of velocity) that our TurtleBot3 Waffles have <strong>maximum velocity limits</strong>:</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Velocity Component</th>
<th style="text-align: center;">Upper Limit</th>
<th style="text-align: left;">Units</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><em>Linear (in the X axis)</em></td>
<td style="text-align: center;">0.26</td>
<td style="text-align: left;">m/s</td>
</tr>
<tr>
<td style="text-align: left;"><em>Angular (about the Z axis)</em></td>
<td style="text-align: center;">1.82</td>
<td style="text-align: left;">rad/s</td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
</div>
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 3: Controlling Velocity with the ROS 2 CLI<a class="headerlink" href="#ex3" title="Permanent link"></a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that you've stopped the <code>teleop_keyboard</code> node before starting this exercise!</p>
</div>
<p><a name="rostopic_pub"></a>We can use the <code>ros2 topic pub</code> command to <em>publish</em> data to a topic from a terminal by using the command in the following way:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span><span class="o">{</span>topic_name<span class="o">}</span><span class="w"> </span><span class="o">{</span>interface_type<span class="o">}</span><span class="w"> </span><span class="o">{</span>data<span class="o">}</span>
</code></pre></div>
<p>As discussed above, the <code>/cmd_vel</code> topic is expecting interface messages containing <em>linear</em> and <em>angular</em> velocity data, each with <code>x</code>, <code>y</code> and <code>z</code> values associated with them. We can compose these messages in a terminal and publish them with the <code>ros2 topic pub</code> command, provided we take care to format the messages correctly to conform with the <code>geometry_msgs/msg/TwistStamped</code> data structure.</p>
<ol>
<li>
<p>In <strong>TERMINAL 3</strong> enter the following, this will end up being quite a long command, so let's break it down a little:</p>
<ol>
<li>
<p>Start with the desired subcommand of <code>ros2 topic</code>:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>ros2 topic pub
</code></pre></div>
</li>
<li>
<p>Next comes the <em>name of the topic</em> that we want to publish to: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>ros2 topic pub /cmd_vel
</code></pre></div>
</li>
<li>
<p>Next, we define the interface type that this topic uses. Start typing this and then enter the <span class="keys"><kbd class="key-tab">Tab</kbd></span> key where shown, and it should autocomplete for you:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>ros2 topic pub /cmd_vel geom[TAB]
</code></pre></div>
<p>Which should autocomplete the interface type for you:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>ros2 topic pub /cmd_vel geometry_msgs/msg/TwistStamped
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <span class="keys"><kbd class="key-tab">Tab</kbd></span> to autocomplete lots of terminal commands, experiment with it - it'll save you lots of time! </p>
</div>
</li>
<li>
<p>Finally, provide the values to be published, which <strong>must</strong> be formatted according to the interface definition (<a href="#twist-stamped-struct">as we established earlier</a>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>ros2 topic pub /cmd_vel geometry_msgs/msg/TwistStamped \
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>"{header: auto, \
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>  twist: { \
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>    linear: {x: 0.0, y: 0.0, z: 0.0}, \
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    angular: {x: 0.0, y: 0.0, z: 0.0} \
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>  } \
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>}"
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Scroll back through the message using the <span class="keys"><kbd class="key-arrow-left">Left</kbd></span> key on your keyboard and then edit the values of the various fields, as appropriate.</p>
<p>First, define some values that would make the robot <strong>rotate on the spot</strong>.  </p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the message from being published.</p>
<p>Notice that <strong>the robot carries on moving</strong> even when you stop the <code>ros2 topic pub</code> process...</p>
<p>In order to make the robot <em>actually</em> stop, we need to publish a <em>new</em> message containing alternative velocity commands.</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> press the <span class="keys"><kbd class="key-arrow-up">Up</kbd></span> key on your keyboard to recall the previous command, but don't press <span class="keys"><kbd class="key-enter">Enter</kbd></span> just yet! Now press the <span class="keys"><kbd class="key-arrow-left">Left</kbd></span> key to track back through the message and change the velocity field values back to <code>0.0</code> in order to now make the robot <strong>stop</strong>.</p>
</li>
<li>
<p>Once again, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong> to stop the publisher from actively publishing new messages, and then follow the same steps as above to compose <em>another</em> new message to now make the robot <strong>move in a circle</strong>.</p>
</li>
<li>
<p>Enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> to again stop the message from being published, publish a further new message to stop the robot, and then compose (and publish) a message that would make the robot <strong>drive in a straight line</strong>.</p>
</li>
<li>
<p>Finally, <strong>stop</strong> the robot again!</p>
</li>
</ol>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 4: Creating a Python Node to Make a Robot Move in a circle<a class="headerlink" href="#ex4" title="Permanent link"></a></h4>
<p>Controlling a robot from the terminal (or by using the <code>teleop_keyboard</code> node) is all well and good, but what about if we need to implement some more advanced control or <em>autonomy</em>?</p>
<p>We'll now learn how to control the velocity of our robot <em>programmatically</em>, from a Python Node. We'll start out with a simple example to achieve a simple velocity profile (a circle), but this will provide us with the basis on which we can build more complex velocity control algorithms (which we'll look at in the following exercise).</p>
<p>In Part 1 we built <a href="../part1/publisher/">a simple publisher node</a>, and this one will work in much the same way, but this time however, we need to publish <code>Twist</code> type messages to the <code>/cmd_vel</code> topic instead... </p>
<ol>
<li>
<p>In <strong>TERMINAL 2</strong>, ensure that you're located within the <code>scripts</code> folder of your <code>part2_navigation</code> package (you could use <code>pwd</code> to check your current working directory).</p>
<p>If you aren't located here then navigate to this directory using <code>cd</code>.</p>
</li>
<li>
<p>Create a new file called <code>move_circle.py</code>:</p>
<p></p><div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>touch<span class="w"> </span>move_circle.py
</code></pre></div>
... and make this file executable using the <code>chmod</code> command (<a href="../part1/#chmod">as we did in Part 1</a>).<p></p>
</li>
<li>
<p>The task is to make the robot move in a <strong>circle</strong> with a path <strong>radius</strong> of approximately <strong>0.5 meters</strong>.</p>
<p>Follow the instructions on the following page for building this:</p>
<p></p><center><a class="md-button" href="move_circle/" target="_blank"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26zm7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26z"></path></svg></span> Building the <code>move_circle.py</code> node</a></center><p></p>
</li>
<li>
<p>Next (hopefully you're getting the idea by now!), declare the <code>move_circle.py</code> node as an executable in the <code>part2_navigation/CMakeLists.txt</code> file:</p>
<div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a># Install Python executables
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>install(PROGRAMS
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>  scripts/basic_velocity_control.py
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>  scripts/stop_me.py
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>  scripts/odom_subscriber.py
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>  scripts/move_circle.py
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>)
</code></pre></div>
</li>
<li>
<p>Finally, head back to <strong>TERMINAL 2</strong> and use Colcon to build the new node alongside everything else in the package, using the same <strong>three-step process</strong> as before:</p>
<ol>
<li>
<p>First: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
</code></pre></div>
</li>
<li>
<p>Then:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part2_navigation<span class="w"> </span>--symlink-install
</code></pre></div>
</li>
<li>
<p>And finally, re-source again:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Run this node now, using <code>ros2 run</code> and see what happens:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>move_circle.py
</code></pre></div>
<p>Head back to the Gazebo simulation and watch as the robot moves around in a circle of 0.5-meter radius!</p>
</li>
<li>
<p>Once you're done, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 2</strong> to stop the <code>move_circle.py</code> node. </p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What happens to the robot when you hit <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> to stop the <code>move_circle.py</code> node?</p>
<p><strong>Answer</strong>: It carries on moving <img alt="" class="twemoji" src="../../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f62e.svg" title=":open_mouth:">!</p>
<p>You can run another node from within your package to actually stop it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>stop_me.py
</code></pre></div>
</div>
</li>
</ol>
<h4 id="ex5"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 5: Implementing a Shutdown Procedure<a class="headerlink" href="#ex5" title="Permanent link"></a></h4>
<p>Clearly, our work on the <code>move_circle.py</code> node isn't quite done. When we terminate our node we'd expect the robot to stop moving, but this (currently) isn't the case. </p>
<p>You may have also noticed (with all the nodes that we have created so far) an error traceback in the terminal, every time we hit <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>. </p>
<p>None of this is very good, and we'll address this now by modifying the <code>move_circle.py</code> file to incorporate a proper (and <em>safe</em>) shutdown procedure.</p>
<ol>
<li>
<p>Return to the <code>move_circle.py</code> file in VS Code. </p>
</li>
<li>
<p>First, we need to add an import to our Node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rclpy.signals</span><span class="w"> </span><span class="kn">import</span> <span class="n">SignalHandlerOptions</span>
</code></pre></div>
<p>You'll see what this is for shortly...</p>
</li>
<li>
<p>Then move on to the <code>__init__()</code> method of your <code>Circle()</code> class.</p>
<p>Add in a boolean flag here called <code>shutdown</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="bp">self</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<p>... to begin with, we want this to be set to <code>False</code>.</p>
</li>
<li>
<p>Next, add a new method to your <code>Circle()</code> class, called <code>on_shutdown()</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">on_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>        <span class="s2">"Stopping the robot..."</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>    <span class="p">)</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">my_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">TwistStamped</span><span class="p">())</span> <span class="c1"># (1)!</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>All velocities within the <code>Twist(Stamped)</code> message class are set to zero by default, so we can just publish this as-is, in order to ask the robot to stop.</li>
<li>Set the <code>shutdown</code> flag to true to indicate that a stop message has now been published.</li>
</ol>
</li>
<li>
<p>Finally, head to the <code class="highlight"><span class="n">main</span><span class="p">()</span></code> function of the script. This is where most of the changes need to be made...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>        <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>        <span class="n">signal_handler_options</span><span class="o">=</span><span class="n">SignalHandlerOptions</span><span class="o">.</span><span class="n">NO</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>    <span class="p">)</span> <span class="c1"># (1)!</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>    <span class="n">move_circle</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">()</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>        <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">move_circle</span><span class="p">)</span> <span class="c1"># (2)!</span>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span> <span class="c1"># (3)!</span>
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>        <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">move_circle</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> received a shutdown request (Ctrl+C)."</span>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a>        <span class="p">)</span>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>    <span class="k">finally</span><span class="p">:</span> 
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>        <span class="n">move_circle</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">()</span> <span class="c1"># (4)!</span>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>        <span class="k">while</span> <span class="ow">not</span> <span class="n">move_circle</span><span class="o">.</span><span class="n">shutdown</span><span class="p">:</span> <span class="c1"># (5)!</span>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a>            <span class="k">continue</span>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>        <span class="n">move_circle</span><span class="o">.</span><span class="n">destroy_node</span><span class="p">()</span> <span class="c1"># (6)!</span>
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a>        <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div>
<ol>
<li>
<p>When initialising <code>rclpy</code>, we're requesting for our <code>move_circle.py</code> node to handle <em>"signals"</em> (i.e. events like a <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>), rather than letting <code>rclpy</code> handle these for us. Here we're using the <code>SignalHandlerOptions</code> object that we imported from <code>rclpy.signals</code> earlier.</p>
</li>
<li>
<p>We set our node to spin inside a Try-Except block now, so that we can catch a <code class="highlight"><span class="ne">KeyboardInterrupt</span></code> (i.e. a <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>) and act accordingly when this happens.</p>
</li>
<li>
<p>On detection of the <code class="highlight"><span class="ne">KeyboardInterrupt</span></code> we print a message to the terminal. After this, the code will move on to the <code class="highlight"><span class="k">finally</span></code> block...</p>
</li>
<li>
<p>Call the <code>on_shutdown()</code> method that we defined earlier. This will ensure that a STOP command is published to the robot (via <code>/cmd_vel</code>).</p>
</li>
<li>
<p>This <code class="highlight"><span class="k">while</span></code> loop will continue to iterate until our boolean <code>shutdown</code> flag has turned <code>True</code>, to indicate that the STOP message has been published.</p>
</li>
<li>
<p>The rest is the same as before...</p>
<p>... destroy the node and then shutdown <code>rclpy</code>.</p>
</li>
</ol>
</li>
<li>
<p>With all this in place, run the node again now (<code>ros2 run ...</code>).</p>
<p>Now, when you hit <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> you should find that the robot actually stops moving. Ah, much better!</p>
</li>
</ol>
<h2 id="odometry-based-navigation">Odometry-based Navigation<a class="headerlink" href="#odometry-based-navigation" title="Permanent link"></a></h2>
<p>Over the course of the previous two exercises we've created a Python node to make our robot move using <em>open-loop control</em>. To achieve this we published velocity commands to the <code>/cmd_vel</code> topic to make the robot follow a circular motion path.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>How do we know if our robot actually achieved the motion path that we asked for?</li>
<li>In a <em>real-world</em> environment, what external factors might result in the robot <em>not</em> achieving its desired trajectory?</li>
</ol>
</div>
<p>Earlier on we also learnt about <a href="#odometry">Robot Odometry</a>, which is used by the robot to keep track of its <strong>position</strong> and <strong>orientation</strong> (aka <strong>Pose</strong>) in the environment.  As explained earlier, this is determined by a process called <em>"dead-reckoning,"</em> which is only really an approximation, but it's a fairly good one in any case, and we can use this as a feedback signal to understand if our robot is moving in the way that we expect it to.</p>
<p>We can therefore build on the techniques that we used in the <code>move_circle.py</code> exercise, and now also build in the ability to <em>subscribe</em> to a topic too and obtain some <em>real-time feedback</em>. To do this, we'll need to subscribe to the <code>/odom</code> topic, and use this to implement some basic <em>closed-loop control</em>.</p>
<h4 id="ex6"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 6: Making our Robot Follow a Square Motion Path<a class="headerlink" href="#ex6" title="Permanent link"></a></h4>
<ol>
<li>
<p>Make sure your <code>move_circle.py</code> node is no longer running in <strong>TERMINAL 2</strong>, stopping it with <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> if necessary.</p>
</li>
<li>
<p>Make sure <strong>TERMINAL 2</strong> is still located inside your <code>part2_navigation</code> package.</p>
</li>
<li>
<p>Navigate to the package <code>scripts</code> directory and use the Linux <code>touch</code> command to create a new file called <code>move_square.py</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>touch<span class="w"> </span>move_square.py
</code></pre></div>
</li>
<li>
<p>Then make this file executable using <code>chmod</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>move_square.py
</code></pre></div>
</li>
<li>
<p>Define <code>move_square.py</code> as a package executable in your <code>CMakeLists.txt</code> file (you should know how to do this by now, but if not, refer back to either Exercise 2 or Exercise 4). </p>
</li>
<li>
<p>Use the VS Code File Explorer to navigate to this <code>move_square.py</code> file and open it up, ready for editing.</p>
</li>
<li>
<p>There's a template below to help you with this exercise. </p>
<p></p><center><a class="md-button" href="move_square/" target="_blank"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26zm7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26z"></path></svg></span> Access the <code>move_square.py</code> template here</a></center><p></p>
<p>Copy and paste the template code into your new <code>move_square.py</code> file to get you started. </p>
</li>
<li>
<p>Re-build your <code>part2_navigation</code> package, to include your new <code>move_square.py</code> node, following that <strong>three-step build process</strong> once again:</p>
<p>Step 1:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
</code></pre></div>
<p>Step 2:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part2_navigation<span class="w"> </span>--symlink-install
</code></pre></div>
<p>Step 3:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
<li>
<p>Run the code as it is to see what happens... <a name="blank-2"></a></p>
<div class="admonition warning">
<p class="admonition-title">Fill in the Blank!</p>
<p>Something not quite working as expected? Did we <a href="../part1/publisher/#shebang">forget something very crucial</a> on <strong>the very first line</strong> of the code template?!</p>
</div>
</li>
<li>
<p>Fill in the blank as required and then adapt the code to make your robot follow a <strong>square</strong> motion path of <strong>1 x 1 meter</strong> dimensions.</p>
<p>After following a square motion path a few times, your robot <em>should</em> return to the same location that it started from.</p>
<div class="admonition tip">
<p class="admonition-title">Advanced feature</p>
<p>Adapt the node to make the robot automatically stop once it has performed two complete loops.</p>
</div>
</li>
</ol>
<h2 id="wrapping-up">Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permanent link"></a></h2>
<p>In this session we've learnt how to control the velocity and position of a robot from both the command-line (using ROS command-line tools) and from ROS Nodes by publishing correctly formatted messages to the <code>/cmd_vel</code> topic.  </p>
<p>We've also learnt about <em>Odometry</em>, which is published by our robot to the <code>/odom</code> topic.  The odometry data tells us the current linear and angular velocities of our robot in relation to its 3 principal axes.  In addition to this though, it also tells us where in physical space our robot is located and oriented, which is determined based on <em>dead-reckoning</em>. </p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>What information (sensor/actuator data) is used to do this?</li>
<li>Do you see any potential limitations of this?</li>
</ol>
</div>
<p>In the final exercise we explored the development of odometry-based control to make a robot follow a <em>square</em> motion path. You will likely have observed some degree of error in this which could be due to the fact that Odometry data is determined by dead-reckoning and is therefore subject to drift and accumulated error. Consider how other factors may impact the accuracy of control too.</p>
<div class="admonition question">
<p class="admonition-title">Questions</p>
<ol>
<li>How might the rate at which the odometry data is sampled play a role?</li>
<li>How quickly can your robot receive new velocity commands, and how quickly can it respond?</li>
</ol>
</div>
<p>Be aware that we did all this in simulation here too. In fact, in a real world environment, this type of navigation might be <em>less effective</em>, since things such as measurement noise and calibration errors can also have considerable impact. You will have the opportunity to experience this first hand in the labs.</p>
<p>Ultimately then, we've seen a requirement here for additional information to provide more confidence of a robot's location in its environment, in order to enhance its ability to navigate effectively and avoid crashing into things! We'll explore this further later in this course.</p>
<h3 id="backup">WSL-ROS2 Managed Desktop Users: Save your work!<a class="headerlink" href="#backup" title="Permanent link"></a></h3>
<p>Remember, the work you have done in the WSL-ROS2 environment during this session <strong>will not be preserved</strong> for future sessions or across different University machines automatically! To save the work you have done here today you should now run the following script in any idle WSL-ROS2 Terminal Instance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>wsl_ros<span class="w"> </span>backup
</code></pre></div>
<p>This will export your home directory to your University <code>U:\</code> Drive, allowing you to restore it on another managed desktop machine the next time you fire up WSL-ROS2.  </p>
<div class="footnote">
<hr>
<ol>
<li id="fn:quaternions">
<p><a href="https://automaticaddison.com/how-to-convert-a-quaternion-to-a-rotation-matrix/#What_is_a_Quaternion" target="_blank">Quaternions are explained very nicely here</a>, if you'd like to learn more.&nbsp;<a class="footnote-backref" href="#fnref:quaternions" title="Jump back to footnote 1 in the text"></a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 29, 2025 12:14:19 UTC"><span class="timeago" datetime="2025-10-29T12:14:19+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 29, 2025 12:14:19 UTC">2025-10-29</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 30, 2024 22:16:58 UTC"><span class="timeago" datetime="2024-12-30T22:16:58+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 30, 2024 22:16:58 UTC">2024-12-30</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../part1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part 1: Getting Started with ROS 2">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part 1: Getting Started with ROS 2
              </div>
            </div>
          </a>
        
        
          
          <a href="../part3/" class="md-footer__link md-footer__link--next" aria-label="Next: Part 3: Beyond the Basics">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Part 3: Beyond the Basics
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>   <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2025.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>