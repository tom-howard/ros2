<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Execute ROS applications more efficiently using launch files. Learn about the LiDAR sensor, the data that it generates, and see the benefits of this for tools like " slam".">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/ros2/course/part3/">
      
      
        <link rel="prev" href="../part2/">
      
      
        <link rel="next" href="../part4/">
      
      
      <link rel="icon" href="../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Part 3: Beyond the Basics - ROS 2 Lab Courses in The Diamond</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta property="og:type" content="website">
      
        <meta property="og:title" content="Part 3: Beyond the Basics - ROS 2 Lab Courses in The Diamond">
      
        <meta property="og:description" content="Execute ROS applications more efficiently using launch files. Learn about the LiDAR sensor, the data that it generates, and see the benefits of this for tools like " slam".">
      
        <meta property="og:image" content="https://tom-howard.github.io/ros2/assets/images/social/course/part3.png">
      
        <meta property="og:image:type" content="image/png">
      
        <meta property="og:image:width" content="1200">
      
        <meta property="og:image:height" content="630">
      
        <meta property="og:url" content="https://tom-howard.github.io/ros2/course/part3/">
      
        <meta name="twitter:card" content="summary_large_image">
      
        <meta name="twitter:title" content="Part 3: Beyond the Basics - ROS 2 Lab Courses in The Diamond">
      
        <meta name="twitter:description" content="Execute ROS applications more efficiently using launch files. Learn about the LiDAR sensor, the data that it generates, and see the benefits of this for tools like " slam".">
      
        <meta name="twitter:image" content="https://tom-howard.github.io/ros2/assets/images/social/course/part3.png">
      
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  This site is still under construction and won't be fully complete until February 2026.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-header__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS 2 Lab Courses in The Diamond
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 3: Beyond the Basics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software/" class="md-tabs__link">
          
  
  
    
  
  Software

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  The ROS 2 Course

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../waffles/" class="md-tabs__link">
          
  
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../com/" class="md-tabs__link">
          
  
  
    
  
  COM2009

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../amr/" class="md-tabs__link">
          
  
  
    
  
  AMR31001

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-nav__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    ROS 2 Lab Courses in The Diamond
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/robots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducing the Robots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version History
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Software
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    WSL-ROS2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            WSL-ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/wsl-ros/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing WSL-ROS2 on your Own (Windows) Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing WSL-ROS2 from A University Managed Desktop Computer on Campus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/other-options/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Other Installation Options
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Other Installation Options
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/other-options/docker-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing "docker-ros2" for Linux, Mac (and Windows)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/other-options/utm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing with UTM (on a Mac)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/using-wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Using WSL-ROS2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Using WSL-ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    University Managed Desktops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/linux-term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A Quick Introduction to the Linux Terminal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VS Code and WSL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The ROS 2 Course
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            The ROS 2 Course
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 1: Getting Started with ROS 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 2: Odometry &amp; Navigation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Part 3: Beyond the Basics
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Part 3: Beyond the Basics
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launch-files" class="md-nav__link">
    <span class="md-ellipsis">
      Launch Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Launch Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Creating a Launch File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Launching Another Launch File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 4: Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 5: Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Part 6: Cameras, Machine Vision &amp; OpenCV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../extras/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Extras
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/launch-file-args/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch File Arguments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/course-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The TUoS ROS Course Repo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../waffles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    The Waffles
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/launching-ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launching ROS (and Pairing the Laptop)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Waffle (&amp; ROS) Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Further (Essential) Exercises
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../waffles/shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shutdown Procedures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    COM2009
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            COM2009
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assignment #1: An Introduction to ROS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Assignment #2: Team Robotics Project
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment #2: Team Robotics Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Week 1: Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-a/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part A (Weeks 1-6)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_3" id="__nav_5_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_3">
            <span class="md-nav__icon md-icon"></span>
            Part A (Weeks 1-6)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 1: Velocity Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 2: Avoiding Obstacles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-b/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Part B (Weeks 7-12)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3_4" id="__nav_5_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_4">
            <span class="md-nav__icon md-icon"></span>
            Part B (Weeks 7-12)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-b/task3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 3: Exploration &amp; Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-b/task4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task 4: Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with your ROS Package (in the Lab)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Key Assessment Info &amp; Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../amr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    AMR31001
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            AMR31001
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amr/lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 1: Mobile Robotics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amr/lab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 2: Feedback Control
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    <span class="md-ellipsis">
      Aims
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      Intended Learning Outcomes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launch-files" class="md-nav__link">
    <span class="md-ellipsis">
      Launch Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Launch Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Creating a Launch File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Launching Another Launch File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/tom-howard/ros2/edit/main/docs/course/part3.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/ros2/raw/main/docs/course/part3.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


  <h1>Part 3: Beyond the Basics</h1>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">Â¶</a></h2>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> <strong>Exercises</strong>: 5<br>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19.03 7.39 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2zm2-13H9v2h6z"></path></svg></span> <strong>Estimated Completion Time</strong>: 2 hours<br>
<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2a8 8 0 0 1 8 8c0 2.4-1 4.5-2.7 6-1.4-1.3-3.3-2-5.3-2s-3.8.7-5.3 2C5 16.5 4 14.4 4 12a8 8 0 0 1 8-8m2 1.89c-.38.01-.74.26-.9.65l-1.29 3.23-.1.23c-.71.13-1.3.6-1.57 1.26-.41 1.03.09 2.19 1.12 2.6s2.19-.09 2.6-1.12c.26-.66.14-1.42-.29-1.98l.1-.26 1.29-3.21.01-.03c.2-.51-.05-1.09-.56-1.3-.13-.05-.26-.07-.41-.07M10 6a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1M7 9a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1m10 0a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1"></path></svg></span> <strong>Difficulty Level</strong>: Intermediate  </p>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link">Â¶</a></h3>
<p>In this part of the course we'll look at some more advanced ROS concepts, and explore another of our robot's on-board sensors: the LiDAR sensor. From the work you did in Part 2 you may have started to appreciate the limitations associated with using odometry data alone as a feedback signal when trying to control a robot's position in its environment. The LiDAR sensor can provide further information about an environment, thus enhancing a robot's knowledge and capabilities. To begin with however, we'll look at how to launch ROS applications more efficiently with <em>launch files</em>, and how the behaviour of nodes can be changed dynamically using <em>parameters</em>. </p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link">Â¶</a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Create launch files to allow the execution of multiple ROS Nodes simultaneously with <code>ros2 launch</code>.</li>
<li>[TODO: parameters]</li>
<li>Learn about the robot's LiDAR sensor and the measurements obtained from this.</li>
<li>Interpret the <code>LaserScan</code> data that is published to the <code>/scan</code> topic and use existing ROS tools to visualise this.</li>
<li>Perform numeric analysis on data arrays (using the <code>numpy</code> Python library) to process <code>LaserScan</code> data for use in ROS applications.</li>
<li>Use existing ROS tools to implement SLAM and build a map of an environment. </li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link">Â¶</a></h3>
<ul>
<li><a href="#ex1">Exercise 1: Creating a Launch File</a></li>
<li><a href="#ex2">Exercise 2: Launching Another Launch File</a></li>
<li><a href="#ex3">Exercise 3: Using RViz to Visualise LaserScan Data</a></li>
<li><a href="#ex4">Exercise 4: Building a LaserScan Callback Function</a></li>
<li><a href="#ex5">Exercise 5: Building a map of an environment with SLAM</a></li>
</ul>
<h3 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">Â¶</a></h3>
<ul>
<li><a href="lidar_subscriber/">A Basic LaserScan Subscriber Node (for Exercise 4)</a></li>
</ul>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">Â¶</a></h2>
<p><strong>Step 1: Launch your ROS Environment</strong></p>
<p>If you haven't done so already, launch your ROS environment now:</p>
<ol>
<li><strong>Using WSL-ROS2 on a university managed desktop machine</strong>: follow <a href="../../ros/using-wsl-ros/man-win.md">the instructions here to launch it</a>.</li>
<li><strong><a href="../../ros/wsl-ros/install.md">Running WSL-ROS2 on your own machine</a></strong>: launch the Windows Terminal to access a WSL-ROS2 terminal instance.</li>
<li><strong>Other Users</strong>: Follow <a href="../../ros/other-options/README.md">the relevant steps</a> to launch a terminal instance into your local ROS installation.</li>
</ol>
<p>You should now have access to a Linux terminal instance, and we'll refer to this terminal instance as <strong>TERMINAL 1</strong>.</p>
<p><strong>Step 2: Restore your work (WSL-ROS2 Managed Desktop Users ONLY)</strong></p>
<p>Remember that any work that you do within the WSL-ROS2 Environment will not be preserved between sessions or across different University computers. At <a href="../part2/#backup">the end of Part 2</a> you should have run the <code>wsl_ros</code> tool to back up your home directory to your University <code>U:\</code> Drive. Once WSL-ROS2 is up and running, you should be prompted to restore this:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>It looks like you already have a backup from a previous session:
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  U:\wsl-ros\ros2-backup-XXX.tar.gz
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Do you want to restore this now? [y/n]
</code></pre></div>
<p>Enter <span class="keys"><kbd class="key-y">Y</kbd><span>+</span><kbd class="key-enter">Enter</kbd></span> to restore your work from last time. You can also restore your work at any time using the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>wsl_ros<span class="w"> </span>restore
</code></pre></div>
<p><strong>Step 3: Launch VS Code</strong>  </p>
<p>It's also worth launching VS Code now, so that it's ready to go for when you need it later on. </p>
<details class="warning">
<summary>WSL Users...</summary>
<p>It's important to launch VS Code within your ROS environment using the "WSL" extension. Always remember to check for this: </p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../ros/figures/code-wsl-ext-on.png" width="400px"></a>
</figure><p></p>
</details>
<p><strong>Step 4: Make Sure The Course Repo is Up-To-Date</strong></p>
<p>In Part 1 you should have <a href="../part1/#course-repo">downloaded and installed The Course Repo</a> into your ROS environment. Hopefully you've done this by now, but if you haven't then go back and do it now (you'll need it for some exercises here). If you <em>have</em> already done it, then (once again) it's worth just making sure it's all up-to-date, so run the following command now to do so:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/tuos_ros/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>pull
</code></pre></div><p></p>
<p>Then run <code>colcon build</code> </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-up-to<span class="w"> </span>tuos_ros
</code></pre></div>
<p>And finally, re-source your environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<hr>
<div class="admonition warning">
<p class="admonition-title">Remember</p>
<p>If you have any other terminal instances open, then you'll need run <code class="highlight"><span class="nb">source</span><span class="w"> </span>~/.bashrc</code> in these too, in order for the changes to propagate through to these as well!</p>
</div>
<h2 id="launch-files">Launch Files<a class="headerlink" href="#launch-files" title="Permanent link">Â¶</a></h2>
<p>So far (in Parts 1 &amp; 2) we've used the <code>ros2 run</code> command to execute a variety of ROS nodes, such as <code>teleop_keyboard</code>, as well as a number of nodes that we've created of our own. You may also have noticed that we've used a <code>ros2 launch</code> command now and again too, mainly to launch Gazebo Simulations of our robot, but why do we have these two commands, and what's the difference between them?</p>
<p>Complex ROS applications typically require the execution of multiple nodes at the same time. The <code>ros2 run</code> command only allows us to execute a single node, and so this isn't that convenient for such complex applications, where we'd have to open multiple terminals, use <code>ros2 run</code> multiple times <em>and</em> make sure that we ran everything in the correct order without forgetting anything! <code>ros2 launch</code>, on the other hand, provides a means to launch multiple ROS nodes <em>simultaneously</em> by defining exactly what we want to launch within <em>launch files</em>. This makes the execution of complex applications more reliable, repeatable and easier for others to launch these applications correctly. </p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 1: Creating a Launch File<a class="headerlink" href="#ex1" title="Permanent link">Â¶</a></h4>
<p>In order to see how launch files work, let's create some of our own!</p>
<p>In Part 1 we created <code>publisher.py</code> and <code>subscriber.py</code> nodes that could talk to one another via a topic called <code>/my_topic</code>. We launched these independently using the <code>ros2 run</code> command in two separate terminals. Wouldn't it be nice if we could have launched them both at the same time, from the <em>same terminal</em> instead?</p>
<p>To start with, let's create another new package, this time called <code>part3_beyond_basics</code>. </p>
<ol>
<li>
<p>In <strong>TERMINAL 1</strong>...</p>
<ol>
<li>
<p>Head to the <code>src</code> folder of the ROS 2 workspace:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/
</code></pre></div><p></p>
</li>
<li>
<p>Clone the ROS 2 Package Template:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/tom-howard/ros2_pkg_template.git
</code></pre></div>
</li>
<li>
<p>Run the <code>init_pkg.sh</code> script from within this template to initalise a package with the name "part3_beyond_basics":</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>./ros2_pkg_template/init_pkg.sh<span class="w"> </span>part3_beyond_basics
</code></pre></div>
</li>
<li>
<p>And navigate into the <em>root</em> of this new package, using <code>cd</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">cd</span><span class="w"> </span>./part3_beyond_basics/
</code></pre></div>
<hr>
</li>
</ol>
</li>
<li>
<p>Launch files should be located in a <code>launch</code> directory at the root of the package directory, so use <code>mkdir</code> to do this:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>mkdir<span class="w"> </span>launch
</code></pre></div><p></p>
<hr>
</li>
<li>
<p>Use the <code>cd</code> command to enter the <code>launch</code> folder that you just created:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">cd</span><span class="w"> </span>launch
</code></pre></div><p></p>
<p>...and then use the <code>touch</code> command to create a new empty file called <code>pubsub.launch.py</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>touch<span class="w"> </span>pubsub.launch.py
</code></pre></div>
<hr>
</li>
<li>
<p>Open this launch file in VS Code and enter the following:</p>
<div class="highlight"><span class="filename">pubsub.launch.py</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch</span><span class="w"> </span><span class="kn">import</span> <span class="n">LaunchDescription</span> <span class="c1"># (1)!</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch_ros.actions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Node</span> <span class="c1"># (2)!</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_launch_description</span><span class="p">():</span> <span class="c1"># (3)!</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span> <span class="c1"># (4)!</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>        <span class="n">Node</span><span class="p">(</span> <span class="c1"># (5)!</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>            <span class="n">package</span><span class="o">=</span><span class="s1">'part1_pubsub'</span><span class="p">,</span> <span class="c1"># (6)!</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>            <span class="n">executable</span><span class="o">=</span><span class="s1">'publisher.py'</span><span class="p">,</span> <span class="c1"># (7)!</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>            <span class="n">name</span><span class="o">=</span><span class="s1">'my_publisher'</span> <span class="c1"># (8)!</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        <span class="p">)</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    <span class="p">])</span>
</code></pre></div>
<ol>
<li>Everything that we want to execute with a launch file must be encapsulated within a <code>LaunchDescription</code>, which is imported here from the <code>launch</code> module.</li>
<li>In order to execute a <em>node</em> from a launch file we need to define it using the <code>Node</code> class from <code>launch_ros.actions</code> (not to be confused with the ROS Action <em>communication method</em> covered in Part 5!)</li>
<li>We encapsulate a <em>Launch Description</em> inside a <code>generate_launch_description()</code> function.</li>
<li>Here we define everything that we want this launch file to execute: in this case a Python <em>list</em> <code>[]</code> containing a single <code>Node()</code> item (for now).</li>
<li>Here we describe the node that we want to launch.</li>
<li>The name of the package that the node is part of.</li>
<li>The name of the actual node that we want to launch from the above package.</li>
<li>
<p>A name to register this node as on the ROS network. While this is also defined in the node itself: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">"simple_publisher"</span><span class="p">)</span>
</code></pre></div>
<p>...we can override this here with something else. </p>
</li>
</ol>
</li>
<li>
<p>We need to make sure we tell <code>colcon</code> about our new <code>launch</code> directory, so that it can build the launch files within it when we run <code>colcon build</code>. To do this, we need to add a <em>directory</em> install instruction to our package's <code>CMakeLists.txt</code>:</p>
<p>Open up the <code>CMakeLists.txt</code> file and add the following text <strong>just above</strong> the <code>ament_package()</code> line at the very bottom:</p>
<div class="highlight"><span class="filename">part3_beyond_basics/CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>install(DIRECTORY
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>  launch
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  DESTINATION share/${PROJECT_NAME}
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>)
</code></pre></div>
</li>
<li>
<p>Now, let's build the package using the <strong>three-step process</strong> that you'll be becoming familiar with by now... <a name="colcon-build"></a></p>
<ol>
<li>
<p>Navigate back to the root of the ROS 2 workspace:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
</code></pre></div><p></p>
</li>
<li>
<p>Run <code>colcon build</code> on your new package <em>only</em>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part3_beyond_basics<span class="w"> </span>--symlink-install
</code></pre></div>
</li>
<li>
<p>And finally, re-source the <code>.bashrc</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<hr>
</li>
</ol>
</li>
<li>
<p>Use <code>ros2 launch</code> to launch this file and test it out as it is:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>part3_beyond_basics<span class="w"> </span>pubsub.launch.py
</code></pre></div><p></p>
<hr>
</li>
<li>
<p>The code that we've given you above will launch the <code>publisher.py</code> node from the <code>part1_pubsub</code> package, but not the <code>subscriber.py</code> node.  We therefore need to add another <code>Node()</code> object to our <code>LaunchDescription</code>:</p>
<div class="highlight"><span class="filename">pubsub.launch.py</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch</span><span class="w"> </span><span class="kn">import</span> <span class="n">LaunchDescription</span> 
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch_ros.actions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Node</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_launch_description</span><span class="p">():</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>        <span class="n">Node</span><span class="p">(</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>            <span class="n">package</span><span class="o">=</span><span class="s1">'part1_pubsub'</span><span class="p">,</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>            <span class="n">executable</span><span class="o">=</span><span class="s1">'publisher.py'</span><span class="p">,</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>            <span class="n">name</span><span class="o">=</span><span class="s1">'my_publisher'</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>        <span class="p">),</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>        <span class="n">Node</span><span class="p">(</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>            <span class="c1"># TODO: define the subscriber.py node...</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>        <span class="p">)</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    <span class="p">])</span>
</code></pre></div>
<p>Using the same methods as above, add the necessary definitions for the <code>subscriber.py</code> node into your launch file.</p>
</li>
<li>
<p>Once you've made these changes <a href="#colcon-build">you'll need to run <code>colcon build</code> again</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You'll need to run <code>colcon build</code> <em>every time</em> you make changes to a launch file, even if you use the <code>--symlink-install</code> option (as this only applies to nodes in the <code>scripts</code> directory)</p>
</div>
</li>
<li>
<p>Once you've completed this, it should be possible to launch both the publisher and subscriber nodes with <code>ros2 launch</code> and the <code>pubsub.launch.py</code> file. Verify this in <strong>TERMINAL 1</strong> by executing the launch file. Soon after launching this, you should see the following messages to indicate that both nodes are alive:</p>
<p>[TODO: a gif insteads of these two figures?]</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>[subscriber.py-2] [INFO] [###] [my_subscriber]: The 'my_subscriber' node is initialised.
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>[publisher.py-1] [INFO] [###] [my_publisher]: The 'my_publisher' node is initialised.
</code></pre></div>
<p>... and following this, the outputs of both nodes should be printed to the screen continually:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>[publisher.py-1] [INFO] [###] [my_publisher]: Publishing: 'The ROS time is 1737545960 (seconds).'
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>[subscriber.py-2] [INFO] [###] [my_subscriber]: The 'my_subscriber' node heard:
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>[subscriber.py-2] [INFO] [###] [my_subscriber]: 'The ROS time is 1737545960 (seconds).' 
</code></pre></div>
</li>
<li>
<p>We can further verify this in a new terminal (<strong>TERMINAL 2</strong>), using commands that we've use in Parts 1 &amp; 2 to <em>list</em> all nodes and topics that are active on our ROS network:</p>
<hr>
<p><strong>TERMINAL 2:</strong></p>
<p></p><div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>ros2<span class="w"> </span>node<span class="w"> </span>list
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div><p></p>
<p>Do you see what you'd expect to see in the output of these two commands?</p>
<hr>
</li>
</ol>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 2: Launching Another Launch File<a class="headerlink" href="#ex2" title="Permanent link">Â¶</a></h4>
<p>Using the processes above, we can develop launch files to execute as many nodes as we want on a ROS network simultaneously. <em>Another</em> thing we can do with launch files is launch <em>other</em> launch files! </p>
<p>To illustrate this, think back to the <code>move_circle.py</code> node that we developed in Part 2, as part of our <code>part2_navigation</code> package. In order to launch this node we must first launch a robot simulation, e.g.: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>empty_world.launch.py
</code></pre></div>
<p>In this exercise we'll look at how we can launch the above launch file <em>and</em> our <code>move_circle.py</code> node simultaneously from a single <code>ros2 launch</code> command...</p>
<ol>
<li>
<p>Make sure you're in the <code>launch</code> directory of your <code>part3_beyond_basics</code> package, we can actually use a <code>colcon</code> command to get us to the root of the package directory:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>colcon_cd<span class="w"> </span>part3_beyond_basics
</code></pre></div><p></p>
<p>... and <code>cd</code> to get us into the <code>launch</code> directory from there:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nb">cd</span><span class="w"> </span>launch/
</code></pre></div>
<hr>
</li>
<li>
<p>Make a new launch file in here, called <code>circle.launch.py</code>:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>touch<span class="w"> </span>circle.launch.py
</code></pre></div><p></p>
</li>
<li>
<p>Open this up in VS Code and enter the following:</p>
<div class="highlight"><span class="filename">circle.launch.py</span><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch</span><span class="w"> </span><span class="kn">import</span> <span class="n">LaunchDescription</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch_ros.actions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Node</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch.actions</span><span class="w"> </span><span class="kn">import</span> <span class="n">IncludeLaunchDescription</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">launch.launch_description_sources</span><span class="w"> </span><span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">ament_index_python.packages</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_package_share_directory</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_launch_description</span><span class="p">():</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>        <span class="n">IncludeLaunchDescription</span><span class="p">(</span> <span class="c1"># (1)!</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>            <span class="n">PythonLaunchDescriptionSource</span><span class="p">(</span> <span class="c1"># (2)!</span>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="c1"># (3)!</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>                    <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s2">"turtlebot3_gazebo"</span><span class="p">),</span> 
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>                    <span class="s2">"launch"</span><span class="p">,</span> <span class="s2">"empty_world.launch.py"</span> <span class="c1"># (4)!</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>                <span class="p">)</span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>            <span class="p">)</span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>        <span class="p">)</span>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>    <span class="p">])</span>
</code></pre></div>
<ol>
<li>To include another launch file in a launch description, we use a <code>IncludeLaunchDescription()</code> class instance (imported from a module called <code>launch.actions</code>).</li>
<li>
<p>We want to launch the "Empty World" simulation from the <code>turtlebot3_gazebo</code> package, which (as we know) can be done <em>from a terminal</em> with the following command:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>empty_world.launch.py
</code></pre></div>
<p>Based on the above, we know that the launch file itself is a <em>Python</em> launch file, due to the <code>.py</code> file extension at the end.</p>
<p>As such, the launch description that we want to include is a <em>Python</em> launch description, which must therefore be defined using a <code>PythonLaunchDescriptionSource()</code> instance (imported from a module called <code>launch.launch_description_sources</code>)</p>
</li>
<li>
<p>The <code>os.path.join()</code> method (from the standard Python <code>os</code> library) can be used to build file paths. </p>
</li>
<li>
<p>The <em>Python Launch Description Source</em> is defined by providing the full path to the launch file that we want to include. We don't necessarily know where this file is on our filesystem, but ROS does!</p>
<p>We can therefore use a function called <code>get_package_share_directory()</code> (from a module called <code>ament_index_python.packages</code>) to provide us with the path to the <em>root</em> of this package directory.</p>
<p>From there, we know that the launch file itself must exist in a <code>launch</code> directory, so we use the <code>os.path.join()</code> method to construct this full file path for us.</p>
</li>
</ol>
<p>... Currently, the launch file above contains <em>only</em> the code necessary to include the <code>empty_world.launch.py</code> launch file into our <code>circle.launch.py</code> launch description. There's a few new things that have been introduced here to achieve this, so click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"></path></svg></span> icons in the code above to find out what all these things are doing.</p>
</li>
<li>
<p>Now, add a <code>Node()</code> item to the launch description so that the <code>move_circle.py</code> node (from your <code>part2_navigation</code> package) is launched <em>after</em> the "Empty World" simulation has been launched.</p>
<p>Refer back to Exercise 1 for a reminder on how to do this.</p>
</li>
<li>
<p>When you're ready, remember to <a href="#colcon-build">run <code>colcon build</code> again</a> <em>before</em> attempting to execute your new <code>circle.launch.py</code> launch file:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>part3_beyond_basics<span class="w"> </span>circle.launch.py
</code></pre></div><p></p>
<hr>
</li>
</ol>
<p>If you've done this successfully, on launching the above command the Gazebo Empty World simulation should launch and, once it's loaded up, the robot should instantly start moving around in a circle (while printing information to <strong>TERMINAL 1</strong> at the same time).</p>
<h2 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">Â¶</a></h2>
<p>Parameters are used as a way to configure nodes, and can be further used to change their behaviour dynamically during run time. Let's think back to our <code>move_circle.py</code> node from Part 2 in order to see what this could be used for.</p>
<ol>
<li>
<p>First, we'll create a new version of the <code>move_circle.py</code> node from Part 2, that we can play around with. First, head to the <code>scripts</code> directory of your <code>part3_beyond_basics</code> package:</p>
<hr>
<p><strong>TERMINAL 1:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>colcon_cd<span class="w"> </span>part3_beyond_basics
</code></pre></div><p></p>
<p>... and <code>cd</code> into the <code>scripts</code> directory from there:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nb">cd</span><span class="w"> </span>scripts/
</code></pre></div>
<hr>
</li>
<li>
<p>Create a new file called <code>param_circle.py</code> (using <code>touch</code>) and make this executable (using <code>chmod</code>).</p>
</li>
<li>
<p>Define <code>param_circle.py</code> as a package executable in your <code>CMakeLists.txt</code> file (if you need help with this refer back to Part 2). </p>
</li>
<li>
<p>After having completed Part 2 Exercises 4 &amp; 5, you should have a working <code>move_circle.py</code> node complete with a proper shutdown procedure. Take a copy of the code and paste it into your new <code>param_circle.py</code> file. Alternatively, if you didn't manage to finish the exercises previously, you can access a worked example below:</p>
</li>
</ol>
<!-- <center>[:material-file-code-outline: A `move_circle.py` worked example](./part3/move_circle.md){ .md-button target="_blank"}</center>

[TODO: a separate page, or a link to the solution code from gh??]

<div class="highlight"><span class="filename">publisher.py</span><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="c1"># A simple ROS publisher node in Python</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">rospy</span> 
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">std_msgs.msg</span><span class="w"> </span><span class="kn">import</span> <span class="n">String</span> 
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">Publisher</span><span class="p">():</span> 
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">node_name</span> <span class="o">=</span> <span class="s2">&quot;simple_publisher&quot;</span> 
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>        <span class="n">topic_name</span> <span class="o">=</span> <span class="s2">&quot;chatter&quot;</span> 
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="n">topic_name</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> 
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>        <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_name</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> 
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_c</span> <span class="o">=</span> <span class="kc">False</span> 
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>        <span class="n">rospy</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shutdownhook</span><span class="p">)</span> 
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_name</span><span class="si">}</span><span class="s2">&#39; node is active...&quot;</span><span class="p">)</span> 
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">shutdownhook</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stopping the &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_name</span><span class="si">}</span><span class="s2">&#39; node at: </span><span class="si">{</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_time</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_c</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl_c</span><span class="p">:</span> 
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>            <span class="n">publisher_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;rospy time is: </span><span class="si">{</span><span class="n">rospy</span><span class="o">.</span><span class="n">get_time</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">publisher_message</span><span class="p">)</span>
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> 
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>    <span class="n">node</span> <span class="o">=</span> <span class="n">Publisher</span><span class="p">()</span> 
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a>    <span class="n">node</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a><span class="err">```</span> <span class="o">--&gt;</span>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a><span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">We</span><span class="s1">&#39;ve learnt some key launch file techniques now, so let&#39;</span><span class="n">s</span> <span class="n">move</span> <span class="n">on</span> <span class="n">to</span> <span class="n">another</span> <span class="n">more</span> <span class="n">advanced</span> <span class="ow">and</span> <span class="n">very</span> <span class="n">important</span> <span class="n">topic</span><span class="o">...</span> <span class="o">--&gt;</span>
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a>
<a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a><span class="c1">## Laser Displacement Data and The LiDAR Sensor {#lidar}</span>
<a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a>
<a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="n">As</span> <span class="n">you</span><span class="s1">&#39;ll know from Part 2, odometry is really important for robot navigation, but it can be subject to drift and accumulated error over time. You may have observed this in simulation during [Part 2 Exercise 5](./part2.md#ex5), and you would most certainly notice it if you were to do the same on a real robot. Fortunately, The Waffles have another sensor on-board which provides even richer information about the environment, and we can use this to supplement the odometry information and enhance the robot&#39;</span><span class="n">s</span> <span class="n">navigation</span> <span class="n">capabilities</span><span class="o">.</span>
<a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a>
<a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="c1">### Introducing the LaserScan Interface</span>
<a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a>
<a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a><span class="c1">#### :material-pen: Exercise 3: Using RViz to Visualise LaserScan Data {#ex3}</span>
<a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a>
<a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a><span class="o">&lt;</span><span class="n">a</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;rviz&quot;</span><span class="o">&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="n">We</span><span class="s1">&#39;re now going to place the robot in a more interesting environment than the &quot;empty world&quot; that we&#39;</span><span class="n">ve</span> <span class="n">been</span> <span class="n">working</span> <span class="k">with</span> <span class="n">so</span> <span class="n">far</span><span class="o">...</span>
<a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a>
<a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a><span class="mf">1.</span> <span class="n">In</span> <span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">1</span><span class="o">**</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">following</span> <span class="n">command</span> <span class="n">to</span> <span class="n">launch</span> <span class="n">this</span><span class="p">:</span>
<a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a>
<a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a>    <span class="o">***</span>
<a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a>    <span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">1</span><span class="p">:</span><span class="o">**</span>
<a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a>    <span class="err">```</span><span class="n">bash</span>
<a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a>    <span class="n">ros2</span> <span class="n">launch</span> <span class="n">turtlebot3_gazebo</span> <span class="n">turtlebot3_world</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a>    <span class="err">```</span>
<a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a>    <span class="o">***</span>
<a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a>
<a id="__codelineno-33-58" name="__codelineno-33-58" href="#__codelineno-33-58"></a>    <span class="n">A</span> <span class="n">Gazebo</span> <span class="n">simulation</span> <span class="n">should</span> <span class="n">now</span> <span class="n">be</span> <span class="n">launched</span> <span class="k">with</span> <span class="n">a</span> <span class="n">TurtleBot3</span> <span class="n">Waffle</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">new</span> <span class="n">environment</span><span class="p">:</span>
<a id="__codelineno-33-59" name="__codelineno-33-59" href="#__codelineno-33-59"></a>
<a id="__codelineno-33-60" name="__codelineno-33-60" href="#__codelineno-33-60"></a>    <span class="o">&lt;</span><span class="n">figure</span> <span class="n">markdown</span><span class="o">&gt;</span>
<a id="__codelineno-33-61" name="__codelineno-33-61" href="#__codelineno-33-61"></a>      <span class="err">!</span><span class="p">[](</span><span class="o">../../</span><span class="n">images</span><span class="o">/</span><span class="n">gz</span><span class="o">/</span><span class="n">tb3_world</span><span class="o">.</span><span class="n">jpg</span><span class="p">){</span><span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="n">px</span><span class="p">}</span>
<a id="__codelineno-33-62" name="__codelineno-33-62" href="#__codelineno-33-62"></a>    <span class="o">&lt;/</span><span class="n">figure</span><span class="o">&gt;</span>
<a id="__codelineno-33-63" name="__codelineno-33-63" href="#__codelineno-33-63"></a>
<a id="__codelineno-33-64" name="__codelineno-33-64" href="#__codelineno-33-64"></a><span class="mf">1.</span> <span class="n">Open</span> <span class="n">a</span> <span class="n">new</span> <span class="n">terminal</span> <span class="n">instance</span> <span class="p">(</span><span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">2</span><span class="o">**</span><span class="p">)</span> <span class="ow">and</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">following</span><span class="p">:</span>
<a id="__codelineno-33-65" name="__codelineno-33-65" href="#__codelineno-33-65"></a>
<a id="__codelineno-33-66" name="__codelineno-33-66" href="#__codelineno-33-66"></a>    <span class="o">***</span>
<a id="__codelineno-33-67" name="__codelineno-33-67" href="#__codelineno-33-67"></a>    <span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">2</span><span class="p">:</span><span class="o">**</span>
<a id="__codelineno-33-68" name="__codelineno-33-68" href="#__codelineno-33-68"></a>    <span class="err">```</span><span class="n">bash</span>
<a id="__codelineno-33-69" name="__codelineno-33-69" href="#__codelineno-33-69"></a>    <span class="n">ros2</span> <span class="n">launch</span> <span class="n">tuos_simulations</span> <span class="n">rviz</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
<a id="__codelineno-33-70" name="__codelineno-33-70" href="#__codelineno-33-70"></a>    <span class="err">```</span>
<a id="__codelineno-33-71" name="__codelineno-33-71" href="#__codelineno-33-71"></a>    <span class="o">***</span>
<a id="__codelineno-33-72" name="__codelineno-33-72" href="#__codelineno-33-72"></a>
<a id="__codelineno-33-73" name="__codelineno-33-73" href="#__codelineno-33-73"></a>    <span class="n">On</span> <span class="n">running</span> <span class="n">the</span> <span class="n">command</span> <span class="n">a</span> <span class="n">new</span> <span class="n">window</span> <span class="n">should</span> <span class="nb">open</span><span class="p">:</span>
<a id="__codelineno-33-74" name="__codelineno-33-74" href="#__codelineno-33-74"></a>
<a id="__codelineno-33-75" name="__codelineno-33-75" href="#__codelineno-33-75"></a>    <span class="o">&lt;</span><span class="n">figure</span> <span class="n">markdown</span><span class="o">&gt;</span>
<a id="__codelineno-33-76" name="__codelineno-33-76" href="#__codelineno-33-76"></a>      <span class="err">!</span><span class="p">[](</span><span class="o">../../</span><span class="n">images</span><span class="o">/</span><span class="n">rviz</span><span class="o">/</span><span class="n">tb3</span><span class="o">.</span><span class="n">png</span><span class="p">){</span><span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="n">px</span><span class="p">}</span>
<a id="__codelineno-33-77" name="__codelineno-33-77" href="#__codelineno-33-77"></a>    <span class="o">&lt;/</span><span class="n">figure</span><span class="o">&gt;</span>
<a id="__codelineno-33-78" name="__codelineno-33-78" href="#__codelineno-33-78"></a>
<a id="__codelineno-33-79" name="__codelineno-33-79" href="#__codelineno-33-79"></a>    <span class="n">This</span> <span class="ow">is</span> <span class="o">*</span><span class="n">RViz</span><span class="o">*</span><span class="p">,</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">ROS</span> <span class="n">tool</span> <span class="n">that</span> <span class="n">allows</span> <span class="n">us</span> <span class="n">to</span> <span class="o">*</span><span class="n">visualise</span><span class="o">*</span> <span class="n">the</span> <span class="n">data</span> <span class="n">being</span> <span class="n">measured</span> <span class="n">by</span> <span class="n">a</span> <span class="n">robot</span> <span class="ow">in</span> <span class="n">real</span><span class="o">-</span><span class="n">time</span><span class="o">.</span> 
<a id="__codelineno-33-80" name="__codelineno-33-80" href="#__codelineno-33-80"></a>
<a id="__codelineno-33-81" name="__codelineno-33-81" href="#__codelineno-33-81"></a>    <span class="n">The</span> <span class="n">green</span> <span class="n">dots</span> <span class="n">scattered</span> <span class="n">around</span> <span class="n">the</span> <span class="n">robot</span> <span class="n">represent</span> <span class="o">*</span><span class="n">laser</span> <span class="n">displacement</span> <span class="n">data</span><span class="o">*</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">measured</span> <span class="n">by</span> <span class="n">the</span> <span class="n">LiDAR</span> <span class="n">sensor</span> <span class="n">located</span> <span class="n">on</span> <span class="n">the</span> <span class="n">top</span> <span class="n">of</span> <span class="n">the</span> <span class="n">robot</span><span class="p">,</span> <span class="n">allowing</span> <span class="n">it</span> <span class="n">to</span> <span class="n">measure</span> <span class="n">the</span> <span class="o">*</span><span class="n">distance</span><span class="o">*</span> <span class="n">to</span> <span class="nb">any</span> <span class="n">obstacles</span> <span class="ow">in</span> <span class="n">its</span> <span class="n">surroundings</span><span class="o">.</span> 
<a id="__codelineno-33-82" name="__codelineno-33-82" href="#__codelineno-33-82"></a>
<a id="__codelineno-33-83" name="__codelineno-33-83" href="#__codelineno-33-83"></a>    <span class="n">The</span> <span class="n">LiDAR</span> <span class="n">sensor</span> <span class="n">spins</span> <span class="n">continuously</span><span class="p">,</span> <span class="n">sending</span> <span class="n">out</span> <span class="n">laser</span> <span class="n">pulses</span> <span class="k">as</span> <span class="n">it</span> <span class="n">does</span> <span class="n">so</span><span class="o">.</span> <span class="n">These</span> <span class="n">laser</span> <span class="n">pulses</span> <span class="n">are</span> <span class="n">reflected</span> <span class="kn">from</span><span class="w"> </span><span class="nn">any</span> <span class="n">objects</span> <span class="ow">and</span> <span class="n">sent</span> <span class="n">back</span> <span class="n">to</span> <span class="n">the</span> <span class="n">sensor</span><span class="o">.</span> <span class="n">Distance</span> <span class="n">can</span> <span class="n">then</span> <span class="n">be</span> <span class="n">determined</span> <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">time</span> <span class="n">it</span> <span class="n">takes</span> <span class="k">for</span> <span class="n">the</span> <span class="n">pulses</span> <span class="n">to</span> <span class="n">complete</span> <span class="n">the</span> <span class="n">full</span> <span class="n">journey</span> <span class="p">(</span><span class="kn">from</span><span class="w"> </span><span class="nn">the</span> <span class="n">sensor</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="nb">object</span><span class="p">,</span> <span class="ow">and</span> <span class="n">back</span> <span class="n">again</span><span class="p">),</span> <span class="n">by</span> <span class="n">a</span> <span class="n">process</span> <span class="n">called</span> <span class="o">*</span><span class="s2">&quot;time of flight&quot;</span><span class="o">*.</span> <span class="n">Because</span> <span class="n">the</span> <span class="n">LiDAR</span> <span class="n">sensor</span> <span class="n">spins</span> <span class="ow">and</span> <span class="n">performs</span> <span class="n">this</span> <span class="n">process</span> <span class="n">continuously</span><span class="p">,</span> <span class="n">a</span> <span class="n">full</span> <span class="mi">360</span><span class="o">&amp;</span><span class="n">deg</span><span class="p">;</span> <span class="n">scan</span> <span class="n">of</span> <span class="n">the</span> <span class="n">environment</span> <span class="n">can</span> <span class="n">be</span> <span class="n">generated</span><span class="o">.</span>
<a id="__codelineno-33-84" name="__codelineno-33-84" href="#__codelineno-33-84"></a>
<a id="__codelineno-33-85" name="__codelineno-33-85" href="#__codelineno-33-85"></a>    <span class="n">In</span> <span class="n">this</span> <span class="n">case</span> <span class="p">(</span><span class="n">because</span> <span class="n">we</span> <span class="n">are</span> <span class="n">working</span> <span class="ow">in</span> <span class="n">simulation</span> <span class="n">here</span><span class="p">)</span> <span class="n">the</span> <span class="n">data</span> <span class="n">represents</span> <span class="n">the</span> <span class="n">objects</span> <span class="n">surrounding</span> <span class="n">the</span> <span class="n">robot</span> <span class="ow">in</span> <span class="n">its</span> <span class="o">*</span><span class="n">simulated</span> <span class="n">environment</span><span class="o">*</span><span class="p">,</span> <span class="n">so</span> <span class="n">you</span> <span class="n">should</span> <span class="n">notice</span> <span class="n">that</span> <span class="n">the</span> <span class="n">green</span> <span class="n">dots</span> <span class="n">produce</span> <span class="n">an</span> <span class="n">outline</span> <span class="n">that</span> <span class="n">resembles</span> <span class="n">the</span> <span class="n">objects</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">world</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">being</span> <span class="n">simulated</span> <span class="ow">in</span> <span class="n">Gazebo</span> <span class="p">(</span><span class="ow">or</span> <span class="n">partially</span> <span class="n">at</span> <span class="n">least</span><span class="p">)</span><span class="o">.</span>
<a id="__codelineno-33-86" name="__codelineno-33-86" href="#__codelineno-33-86"></a>
<a id="__codelineno-33-87" name="__codelineno-33-87" href="#__codelineno-33-87"></a><span class="mf">1.</span> <span class="n">Next</span><span class="p">,</span> <span class="nb">open</span> <span class="n">up</span> <span class="n">a</span> <span class="n">new</span> <span class="n">terminal</span> <span class="n">instance</span> <span class="p">(</span><span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">3</span><span class="o">**</span><span class="p">)</span><span class="o">.</span> <span class="n">Laser</span> <span class="n">displacement</span> <span class="n">data</span> <span class="kn">from</span><span class="w"> </span><span class="nn">the</span> <span class="n">LiDAR</span> <span class="n">sensor</span> <span class="ow">is</span> <span class="n">published</span> <span class="n">by</span> <span class="n">the</span> <span class="n">robot</span> <span class="n">to</span> <span class="n">the</span> <span class="err">`</span><span class="o">/</span><span class="n">scan</span><span class="err">`</span> <span class="n">topic</span><span class="o">.</span> <span class="n">We</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="err">`</span><span class="n">ros2</span> <span class="n">topic</span> <span class="n">info</span><span class="err">`</span> <span class="n">command</span> <span class="n">to</span> <span class="n">find</span> <span class="n">out</span> <span class="n">more</span> <span class="n">about</span> <span class="n">the</span> <span class="n">nodes</span> <span class="n">that</span> <span class="n">are</span> <span class="n">publishing</span> <span class="ow">and</span> <span class="n">subscribing</span> <span class="n">to</span> <span class="n">this</span> <span class="n">topic</span><span class="p">,</span> <span class="k">as</span> <span class="n">well</span> <span class="k">as</span> <span class="n">the</span> <span class="o">*</span><span class="nb">type</span> <span class="n">of</span> <span class="n">interface</span><span class="o">*</span> <span class="n">used</span> <span class="n">to</span> <span class="n">transmit</span> <span class="n">this</span> <span class="n">topic</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-33-88" name="__codelineno-33-88" href="#__codelineno-33-88"></a>
<a id="__codelineno-33-89" name="__codelineno-33-89" href="#__codelineno-33-89"></a>    <span class="o">***</span>
<a id="__codelineno-33-90" name="__codelineno-33-90" href="#__codelineno-33-90"></a>    <span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">3</span><span class="p">:</span><span class="o">**</span>
<a id="__codelineno-33-91" name="__codelineno-33-91" href="#__codelineno-33-91"></a>    <span class="err">```</span><span class="n">bash</span>
<a id="__codelineno-33-92" name="__codelineno-33-92" href="#__codelineno-33-92"></a>    <span class="n">ros2</span> <span class="n">topic</span> <span class="n">info</span> <span class="o">/</span><span class="n">scan</span>
<a id="__codelineno-33-93" name="__codelineno-33-93" href="#__codelineno-33-93"></a>    <span class="err">```</span>
<a id="__codelineno-33-94" name="__codelineno-33-94" href="#__codelineno-33-94"></a>    <span class="err">```</span><span class="p">{</span> <span class="o">.</span><span class="n">txt</span> <span class="o">.</span><span class="n">no</span><span class="o">-</span><span class="n">copy</span> <span class="p">}</span>
<a id="__codelineno-33-95" name="__codelineno-33-95" href="#__codelineno-33-95"></a>    <span class="n">Type</span><span class="p">:</span> <span class="n">sensor_msgs</span><span class="o">/</span><span class="n">msg</span><span class="o">/</span><span class="n">LaserScan</span>
<a id="__codelineno-33-96" name="__codelineno-33-96" href="#__codelineno-33-96"></a>    <span class="n">Publisher</span> <span class="n">count</span><span class="p">:</span> <span class="mi">1</span>
<a id="__codelineno-33-97" name="__codelineno-33-97" href="#__codelineno-33-97"></a>    <span class="n">Subscription</span> <span class="n">count</span><span class="p">:</span> <span class="mi">0</span>
<a id="__codelineno-33-98" name="__codelineno-33-98" href="#__codelineno-33-98"></a>    <span class="err">```</span>
<a id="__codelineno-33-99" name="__codelineno-33-99" href="#__codelineno-33-99"></a>    <span class="o">***</span>
<a id="__codelineno-33-100" name="__codelineno-33-100" href="#__codelineno-33-100"></a>
<a id="__codelineno-33-101" name="__codelineno-33-101" href="#__codelineno-33-101"></a><span class="mf">1.</span> <span class="n">As</span> <span class="n">we</span> <span class="n">can</span> <span class="n">see</span> <span class="kn">from</span><span class="w"> </span><span class="nn">above</span><span class="p">,</span> <span class="err">`</span><span class="o">/</span><span class="n">scan</span><span class="err">`</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">of</span> <span class="n">the</span> <span class="err">`</span><span class="n">sensor_msgs</span><span class="o">/</span><span class="n">msg</span><span class="o">/</span><span class="n">LaserScan</span><span class="err">`</span> <span class="nb">type</span><span class="p">,</span> <span class="ow">and</span> <span class="n">we</span> <span class="n">can</span> <span class="n">find</span> <span class="n">out</span> <span class="n">more</span> <span class="n">about</span> <span class="n">this</span> <span class="n">interface</span> <span class="n">using</span> <span class="n">the</span> <span class="err">`</span><span class="n">ros2</span> <span class="n">interface</span> <span class="n">show</span><span class="err">`</span> <span class="n">command</span><span class="p">:</span>
<a id="__codelineno-33-102" name="__codelineno-33-102" href="#__codelineno-33-102"></a>
<a id="__codelineno-33-103" name="__codelineno-33-103" href="#__codelineno-33-103"></a>    <span class="o">***</span>
<a id="__codelineno-33-104" name="__codelineno-33-104" href="#__codelineno-33-104"></a>    <span class="o">**</span><span class="n">TERMINAL</span> <span class="mi">3</span><span class="p">:</span><span class="o">**</span>
<a id="__codelineno-33-105" name="__codelineno-33-105" href="#__codelineno-33-105"></a>    <span class="err">```</span><span class="n">bash</span>
<a id="__codelineno-33-106" name="__codelineno-33-106" href="#__codelineno-33-106"></a>    <span class="n">ros2</span> <span class="n">interface</span> <span class="n">show</span> <span class="n">sensor_msgs</span><span class="o">/</span><span class="n">msg</span><span class="o">/</span><span class="n">LaserScan</span>
<a id="__codelineno-33-107" name="__codelineno-33-107" href="#__codelineno-33-107"></a>    <span class="err">```</span>
<a id="__codelineno-33-108" name="__codelineno-33-108" href="#__codelineno-33-108"></a>    <span class="err">```</span><span class="p">{</span> <span class="o">.</span><span class="n">txt</span> <span class="o">.</span><span class="n">no</span><span class="o">-</span><span class="n">copy</span> <span class="p">}</span>
<a id="__codelineno-33-109" name="__codelineno-33-109" href="#__codelineno-33-109"></a>    <span class="c1"># Single scan from a planar laser range-finder</span>
<a id="__codelineno-33-110" name="__codelineno-33-110" href="#__codelineno-33-110"></a>
<a id="__codelineno-33-111" name="__codelineno-33-111" href="#__codelineno-33-111"></a>    <span class="n">std_msgs</span><span class="o">/</span><span class="n">Header</span> <span class="n">header</span> <span class="c1"># timestamp in the header is the acquisition time of</span>
<a id="__codelineno-33-112" name="__codelineno-33-112" href="#__codelineno-33-112"></a>            <span class="n">builtin_interfaces</span><span class="o">/</span><span class="n">Time</span> <span class="n">stamp</span>
<a id="__codelineno-33-113" name="__codelineno-33-113" href="#__codelineno-33-113"></a>                    <span class="n">int32</span> <span class="n">sec</span>
<a id="__codelineno-33-114" name="__codelineno-33-114" href="#__codelineno-33-114"></a>                    <span class="n">uint32</span> <span class="n">nanosec</span>
<a id="__codelineno-33-115" name="__codelineno-33-115" href="#__codelineno-33-115"></a>            <span class="n">string</span> <span class="n">frame_id</span>
<a id="__codelineno-33-116" name="__codelineno-33-116" href="#__codelineno-33-116"></a>                                 <span class="c1"># the first ray in the scan.</span>
<a id="__codelineno-33-117" name="__codelineno-33-117" href="#__codelineno-33-117"></a>                                 <span class="c1">#</span>
<a id="__codelineno-33-118" name="__codelineno-33-118" href="#__codelineno-33-118"></a>                                 <span class="c1"># in frame frame_id, angles are measured around</span>
<a id="__codelineno-33-119" name="__codelineno-33-119" href="#__codelineno-33-119"></a>                                 <span class="c1"># the positive Z axis (counterclockwise, if Z is up)</span>
<a id="__codelineno-33-120" name="__codelineno-33-120" href="#__codelineno-33-120"></a>                                 <span class="c1"># with zero angle being forward along the x axis</span>
<a id="__codelineno-33-121" name="__codelineno-33-121" href="#__codelineno-33-121"></a>
<a id="__codelineno-33-122" name="__codelineno-33-122" href="#__codelineno-33-122"></a>    <span class="n">float32</span> <span class="n">angle_min</span>            <span class="c1"># start angle of the scan [rad]</span>
<a id="__codelineno-33-123" name="__codelineno-33-123" href="#__codelineno-33-123"></a>    <span class="n">float32</span> <span class="n">angle_max</span>            <span class="c1"># end angle of the scan [rad]</span>
<a id="__codelineno-33-124" name="__codelineno-33-124" href="#__codelineno-33-124"></a>    <span class="n">float32</span> <span class="n">angle_increment</span>      <span class="c1"># angular distance between measurements [rad]</span>
<a id="__codelineno-33-125" name="__codelineno-33-125" href="#__codelineno-33-125"></a>
<a id="__codelineno-33-126" name="__codelineno-33-126" href="#__codelineno-33-126"></a>    <span class="n">float32</span> <span class="n">time_increment</span>       <span class="c1"># time between measurements [seconds] - if your scanner</span>
<a id="__codelineno-33-127" name="__codelineno-33-127" href="#__codelineno-33-127"></a>                                 <span class="c1"># is moving, this will be used in interpolating position</span>
<a id="__codelineno-33-128" name="__codelineno-33-128" href="#__codelineno-33-128"></a>                                 <span class="c1"># of 3d points</span>
<a id="__codelineno-33-129" name="__codelineno-33-129" href="#__codelineno-33-129"></a>    <span class="n">float32</span> <span class="n">scan_time</span>            <span class="c1"># time between scans [seconds]</span>
<a id="__codelineno-33-130" name="__codelineno-33-130" href="#__codelineno-33-130"></a>
<a id="__codelineno-33-131" name="__codelineno-33-131" href="#__codelineno-33-131"></a>    <span class="n">float32</span> <span class="n">range_min</span>            <span class="c1"># minimum range value [m]</span>
<a id="__codelineno-33-132" name="__codelineno-33-132" href="#__codelineno-33-132"></a>    <span class="n">float32</span> <span class="n">range_max</span>            <span class="c1"># maximum range value [m]</span>
<a id="__codelineno-33-133" name="__codelineno-33-133" href="#__codelineno-33-133"></a>
<a id="__codelineno-33-134" name="__codelineno-33-134" href="#__codelineno-33-134"></a>    <span class="n">float32</span><span class="p">[]</span> <span class="n">ranges</span>             <span class="c1"># range data [m]</span>
<a id="__codelineno-33-135" name="__codelineno-33-135" href="#__codelineno-33-135"></a>                                 <span class="c1"># (Note: values &lt; range_min or &gt; range_max should be discarded)</span>
<a id="__codelineno-33-136" name="__codelineno-33-136" href="#__codelineno-33-136"></a>    <span class="n">float32</span><span class="p">[]</span> <span class="n">intensities</span>        <span class="c1"># intensity data [device-specific units].  If your</span>
<a id="__codelineno-33-137" name="__codelineno-33-137" href="#__codelineno-33-137"></a>                                 <span class="c1"># device does not provide intensities, please leave</span>
<a id="__codelineno-33-138" name="__codelineno-33-138" href="#__codelineno-33-138"></a>                                 <span class="c1"># the array empty.</span>
<a id="__codelineno-33-139" name="__codelineno-33-139" href="#__codelineno-33-139"></a>    <span class="err">```</span>
<a id="__codelineno-33-140" name="__codelineno-33-140" href="#__codelineno-33-140"></a>    <span class="o">***</span>
<a id="__codelineno-33-141" name="__codelineno-33-141" href="#__codelineno-33-141"></a>
<a id="__codelineno-33-142" name="__codelineno-33-142" href="#__codelineno-33-142"></a><span class="c1">### Interpreting LaserScan Data</span>
<a id="__codelineno-33-143" name="__codelineno-33-143" href="#__codelineno-33-143"></a>
<a id="__codelineno-33-144" name="__codelineno-33-144" href="#__codelineno-33-144"></a><span class="n">The</span> <span class="err">`</span><span class="n">LaserScan</span><span class="err">`</span> <span class="n">interface</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">standardised</span> <span class="n">ROS</span> <span class="n">message</span> <span class="n">interface</span> <span class="p">(</span><span class="kn">from</span><span class="w"> </span><span class="nn">the</span> <span class="err">`</span><span class="n">sensor_msgs</span><span class="err">`</span> <span class="n">package</span><span class="p">)</span> <span class="n">that</span> <span class="nb">any</span> <span class="n">ROS</span> <span class="n">Robot</span> <span class="n">can</span> <span class="n">use</span> <span class="n">to</span> <span class="n">publish</span> <span class="n">data</span> <span class="n">that</span> <span class="n">it</span> <span class="n">obtains</span> <span class="kn">from</span><span class="w"> </span><span class="nn">a</span> <span class="n">Laser</span> <span class="n">Displacement</span> <span class="n">Sensor</span> <span class="n">such</span> <span class="k">as</span> <span class="n">the</span> <span class="n">LiDAR</span> <span class="n">on</span> <span class="n">the</span> <span class="n">TurtleBot3</span><span class="o">.</span>  
<a id="__codelineno-33-145" name="__codelineno-33-145" href="#__codelineno-33-145"></a>
<a id="__codelineno-33-146" name="__codelineno-33-146" href="#__codelineno-33-146"></a><span class="err">`</span><span class="n">ranges</span><span class="err">`</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">array</span> <span class="n">of</span> <span class="err">`</span><span class="n">float32</span><span class="err">`</span> <span class="n">values</span> <span class="p">(</span><span class="n">array</span> <span class="n">data</span><span class="o">-</span><span class="n">types</span> <span class="n">are</span> <span class="n">suffixed</span> <span class="k">with</span> <span class="err">`</span><span class="p">[]</span><span class="err">`</span><span class="p">)</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">part</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span> <span class="n">containing</span> <span class="nb">all</span> <span class="n">the</span> <span class="o">*</span><span class="n">actual</span> <span class="n">distance</span> <span class="n">measurements</span><span class="o">*</span> <span class="n">that</span> <span class="n">are</span> <span class="n">being</span> <span class="n">obtained</span> <span class="n">by</span> <span class="n">the</span> <span class="n">LiDAR</span> <span class="n">sensor</span> <span class="p">(</span><span class="ow">in</span> <span class="n">meters</span><span class="p">)</span><span class="o">.</span>
<a id="__codelineno-33-147" name="__codelineno-33-147" href="#__codelineno-33-147"></a>
<a id="__codelineno-33-148" name="__codelineno-33-148" href="#__codelineno-33-148"></a><span class="o">&lt;</span><span class="n">a</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fig_lidar&quot;</span><span class="o">&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="n">Consider</span> <span class="n">a</span> <span class="n">simplified</span> <span class="n">example</span> <span class="n">here</span><span class="p">,</span> <span class="n">taken</span> <span class="kn">from</span><span class="w"> </span><span class="nn">a</span> <span class="n">TurtleBot3</span> <span class="n">robot</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">different</span> <span class="n">environment</span><span class="p">:</span>
<a id="__codelineno-33-149" name="__codelineno-33-149" href="#__codelineno-33-149"></a>
<a id="__codelineno-33-150" name="__codelineno-33-150" href="#__codelineno-33-150"></a><span class="o">&lt;</span><span class="n">figure</span> <span class="n">markdown</span><span class="o">&gt;</span>
<a id="__codelineno-33-151" name="__codelineno-33-151" href="#__codelineno-33-151"></a>  <span class="err">!</span><span class="p">[](</span><span class="o">../../</span><span class="n">images</span><span class="o">/</span><span class="n">rviz</span><span class="o">/</span><span class="n">lidar_illustrated</span><span class="o">.</span><span class="n">png</span><span class="p">)</span>
<a id="__codelineno-33-152" name="__codelineno-33-152" href="#__codelineno-33-152"></a><span class="o">&lt;/</span><span class="n">figure</span><span class="o">&gt;</span>
<a id="__codelineno-33-153" name="__codelineno-33-153" href="#__codelineno-33-153"></a>
<a id="__codelineno-33-154" name="__codelineno-33-154" href="#__codelineno-33-154"></a><span class="o">&lt;</span><span class="n">a</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;echo_scan_variables&quot;</span><span class="o">&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="n">As</span> <span class="n">illustrated</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">figure</span><span class="p">,</span> <span class="n">we</span> <span class="n">can</span> <span class="n">associate</span> <span class="n">each</span> <span class="n">data</span><span class="o">-</span><span class="n">point</span> <span class="n">of</span> <span class="n">the</span> <span class="err">`</span><span class="n">ranges</span><span class="err">`</span> <span class="n">array</span> <span class="n">to</span> <span class="n">an</span> <span class="o">*</span><span class="n">angular</span> <span class="n">position</span><span class="o">*</span> <span class="n">by</span> <span class="n">using</span> <span class="n">the</span> <span class="err">`</span><span class="n">angle_min</span><span class="err">`</span><span class="p">,</span> <span class="err">`</span><span class="n">angle_max</span><span class="err">`</span> <span class="ow">and</span> <span class="err">`</span><span class="n">angle_increment</span><span class="err">`</span> <span class="n">values</span> <span class="n">that</span> <span class="n">are</span> <span class="n">also</span> <span class="n">provided</span> <span class="n">within</span> <span class="n">the</span> <span class="err">`</span><span class="n">LaserScan</span><span class="err">`</span> <span class="n">message</span><span class="o">.</span>  <span class="n">We</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="err">`</span><span class="n">ros2</span> <span class="n">topic</span> <span class="n">echo</span><span class="err">`</span> <span class="n">command</span> <span class="n">to</span> <span class="n">find</span> <span class="n">out</span> <span class="n">what</span> <span class="n">their</span> <span class="n">values</span> <span class="n">are</span><span class="p">:</span>
<a id="__codelineno-33-155" name="__codelineno-33-155" href="#__codelineno-33-155"></a>
<a id="__codelineno-33-156" name="__codelineno-33-156" href="#__codelineno-33-156"></a><span class="err">```</span><span class="p">{</span> <span class="o">.</span><span class="n">txt</span> <span class="o">.</span><span class="n">no</span><span class="o">-</span><span class="n">copy</span> <span class="p">}</span>
<a id="__codelineno-33-157" name="__codelineno-33-157" href="#__codelineno-33-157"></a><span class="err">$</span> <span class="n">ros2</span> <span class="n">topic</span> <span class="n">echo</span> <span class="o">/</span><span class="n">scan</span> <span class="o">--</span><span class="n">field</span> <span class="n">angle_min</span> <span class="o">--</span><span class="n">once</span>
<a id="__codelineno-33-158" name="__codelineno-33-158" href="#__codelineno-33-158"></a><span class="mf">0.0</span>
<a id="__codelineno-33-159" name="__codelineno-33-159" href="#__codelineno-33-159"></a><span class="o">---</span>
</code></pre></div>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>$ ros2 topic echo /scan --field angle_max --once
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>6.28000020980835
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>---
</code></pre></div>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>$ ros2 topic echo /scan --field angle_increment --once
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>0.01749303564429283
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>---
</code></pre></div>

!!! question
    What do these values represent? (Compare them with [the figure above](#fig_lidar))

!!! tip 
    Notice how we were able to access *specific variables* within the `/scan` data using the `--field` flag, and ask the command to only provide us with a single message by using `--once`?

The `ranges` array contains 360 values in total, i.e. a distance measurement at every 1&deg; (an `angle_increment` of 0.0175 radians) around the robot. The first value in the `ranges` array (`ranges[0]`) is the distance to the nearest object directly in front of the robot (i.e. at &theta; = 0 radians, or `angle_min`). The last value in the `ranges` array (`ranges[359]`) is the distance to the nearest object at 359&deg; (i.e. &theta; = 6.283 radians, or `angle_max`) from the front of the robot, i.e.: 1 degree to the *right* of the X-axis. `ranges[65]`, for example, would represent the distance to the closest object at an angle of 65&deg; (1.138 radians) from the front of the robot (*anti-clockwise*), as shown in [the figure](#fig_lidar).

<a name="range_max_min"></a>The `LaserScan` message also contains the parameters `range_min` and `range_max`, which represent the *minimum* and *maximum* distances (again, in meters) that the LiDAR sensor can detect, respectively. Use the `ros2 topic echo` command to report these directly too.  

!!! question "Questions"
    1. What *is* the maximum and minimum range of the LiDAR sensor? Use [the same technique as we used above](#echo_scan_variables) to find out.
    1. Consider the note against `ranges` in the `ros2 interface show` output earlier:

        <div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>float32[] ranges    # range data [m]
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>                    # (Note: values &lt; range_min or &gt; range_max should be discarded)
</code></pre></div>

        (this might be worth thinking about).

Finally, use the `ros2 topic echo` command again to display the `ranges` portion of the `LaserScan` data. There's a lot of data here (360 data points per message in fact, as you know from above!):

<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>ros2 topic echo /scan --field ranges
</code></pre></div>

We're dropping the `--once` option now, so that we can see the data as it comes in, in *real-time*.  You might need to expand the terminal window so that you can see all the data points; data will be bound by square brackets `[]`, and there should be a `---` at the end of each message too, to help you confirm that you are viewing the whole thing.

The main thing you'll notice here is that there's lots of information, and it changes rapidly! As you have already seen though, it is the numbers that are flying by here that are represented by green dots in RViz.  Head back to the RViz screen to have another look at this now. As you'll no doubt agree, this is a much more useful way to visualise the `ranges` data, and illustrates how useful RViz can be for interpreting what your robot can *see* in real-time.

What you may also notice is several `inf` values scattered around the array.  These represent sensor readings that are outside the sensor's measurement range (i.e. *greater than* `range_max` or *less than* `range_min`), so the sensor can't report a distance measurement in such cases. Remember from above: 

<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>(Note: values &lt; range_min or &gt; range_max should be discarded)
</code></pre></div>

!!! note
    This behaviour is different on the real robots! **Be aware of this when developing code for real robots**!!

Stop the `ros2 topic echo` command from running in the terminal window by entering ++ctrl+c++ in **TERMINAL 3**. Also close down the RViz process running in **TERMINAL 2** now as well, but leave the simulation (in **TERMINAL 1** running). 

#### :material-pen: Exercise 4: Building a LaserScan Callback Function {#ex4}

LaserScan data presents us with a new challenge: processing large datasets. In this exercise we'll look at some basic approaches that can be taken to deal with this data, and get something meaningful out of it that can be used in your robot applications.

1. Navigate into the `scripts` folder of your `part3_beyond_basics` package:

    ***
    **TERMINAL 2:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>colcon_cd<span class="w"> </span>part3_beyond_basics<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>scripts/
</code></pre></div>
    ***

1. Create a new node called `lidar_subscriber.py`:

    ***
    **TERMINAL 2:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>touch<span class="w"> </span>lidar_subscriber.py
</code></pre></div>

    and give this *execute* permissions:

    <div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>lidar_subscriber.py
</code></pre></div>
    ***

1. Declare this as a package executable by opening up your package's `CMakeLists.txt` in VS Code, and replacing `minimal_node.py` with `lidar_subscriber.py` as shown below:

    <div class="highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a># Install Python executables
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>install(PROGRAMS
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>  scripts/lidar_subscriber.py
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>  DESTINATION lib/${PROJECT_NAME}
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>)
</code></pre></div>

1. Then, add some new dependencies to your package's `package.xml` file, so open this up in VS Code too. Below the `#!xml <exec_depend>rclpy</exec_depend>` line, add the following:

    <div class="highlight"><span class="filename">package.xml</span><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nt">&lt;exec_depend&gt;</span>rclpy<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="nt">&lt;exec_depend&gt;</span>sensor_msgs<span class="nt">&lt;/exec_depend&gt;</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="nt">&lt;exec_depend&gt;</span>python3-numpy<span class="nt">&lt;/exec_depend&gt;</span>
</code></pre></div>

1. Head back to the terminal and use Colcon to build this (even though `lidar_subscriber.py` is still just an empty file at this stage):

    ***
    **TERMINAL 2:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>part3_beyond_basics<span class="w"> </span>--symlink-install
</code></pre></div>

    And after that, re-source your `.bashrc`:

    <div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
    ***

1. With all of that out of the way, it's time to start building the `lidar_subscriber.py` Python Node! Open up the file in VS Code, then **[follow ^^the steps here^^ to construct it](./part3/lidar_subscriber.md)**. <a name="ex4_ret"></a>

1. Once you're happy with what's going on with this, run the node using `ros2 run`:

    ***
    **TERMINAL 2:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part3_beyond_basics<span class="w"> </span>lidar_subscriber.py
</code></pre></div>
    ***

1. Open another terminal (so you can still see the outputs from your `lidar_subscriber.py` node). Launch the `teleop_keyboard` node, and drive the robot around, noting how the outputs from your `lidar_subscriber.py` node change as you do so.

1. Close everything down now (including the simulation running in **TERMINAL 1**). Then launch the "empty world" simulation again:

    ***
    **TERMINAL 1:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>empty_world.launch.py
</code></pre></div>
    ***

1. Go back to **TERMINAL 2** and launch your `lidar_subscriber.py` node again:

    ***
    **TERMINAL 2:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part3_beyond_basics<span class="w"> </span>lidar_subscriber.py
</code></pre></div>
    ***

    What output do you see from this now?

    You should notice that your `lidar_subscriber.py` node reports `nan meters` now. That's because there's nothing in the environment for the LiDAR sensor to detect, so *all* readings are out of range and hence our analysis of the 40&deg; arc of LiDAR readings at the front of the robot has filtered out *everything* and therefore returned `nan` (not a number).

1. Use the **Box** tool in Gazebo to place a box in the environment. 

    <figure markdown>
      ![](../../images/gz/toolbars_antd.png){width=800px}
    </figure>

1. Click the **Translate** tool to move the box around until the `lidar_subscriber.py` node returns some reading that *aren't* `nan` again.

1. Move the box around some more to observe what our analysis of the `LaserScan` data *can* detect, and where the box falls out of the detectable range.

1. Think about how you could adapt the callback function of the `lidar_subscriber.py` node so that it picks up on more than one `LaserScan` subset, so that it could detect situations such as this (for example):

    <figure markdown>
      ![](./part3/lidar_subscriber_adv.png){width=800px}
    </figure>


## Simultaneous Localisation and Mapping (SLAM) {#slam}

In combination, the data from the LiDAR sensor and the robot's odometry (the robot *pose* specifically) are really powerful, and allow some very useful conclusions to be made about the environment a robot is operating within.  One of the key applications of this data is *"Simultaneous Localisation and Mapping"*, or *SLAM*.  This is a tool that's built into ROS, and allows a robot to build up a map of its environment and locate itself within that map at the same time!  We'll now look at how easy it is to leverage this in ROS.

#### :material-pen: Exercise 5: Building a map of an environment with SLAM {#ex5}

1. Close down all ROS processes that are running now by entering ++ctrl+c++ in each terminal. 

1. We're going to launch our robot into *another* new simulated environment now, which we'll be creating a map of using SLAM! To launch the simulation enter the following command in **TERMINAL 1**:

    ***
    **TERMINAL 1:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_simulations<span class="w"> </span>nav_world.launch.py
</code></pre></div>
    ***

    The environment that launches should look like this:

    <figure markdown>
      ![](./part3/nav_world.jpg){width=800px}
    </figure>

1. Now launch SLAM to start building a map of this environment. In **TERMINAL 2**, launch SLAM as follows:

    ***
    **TERMINAL 2:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_simulations<span class="w"> </span>cartographer.launch.py
</code></pre></div>
    ***

    This will launch RViz again, where you should see a top-down view of an environment with a model of the robot, surrounded by some red/green dots representing the real-time LiDAR data. 

    <figure markdown>
      ![](./part3/cartographer_rviz.png){width=600px}
    </figure>

    SLAM has already started building a map of the boundaries that are currently visible to the robot, based on its starting position in the environment. 

    If you leave this for a minute the walls of the arena will start to become visible in RViz, and the floor will start to turn a lighter grey. As time passes the SLAM algorithms are becoming more certain of what is being observed in the environment, and are starting to determine what is free space, and where the boundaries are.

    <figure markdown>
      ![](./part3/cartographer_rviz_progressed.png){width=600px}
    </figure>

1. In **TERMINAL 3** launch the `teleop_keyboard` node ([you should know how to do this by now](./part2.md#teleop)). Re-arrange and re-size your windows so that you can see Gazebo, RViz *and* the `teleop_keybaord` terminal instances all at the same time:

    <figure markdown>
      ![](./part3/slam_windows.png){width=800px}
    </figure>

1. Drive the robot around the arena slowly, using the `teleop_keyboard` node, and observe the map being updated in the RViz window as you do so. 

1. As you're doing this open up *another* terminal instance (**TERMINAL 4**) and run the `odom_subscriber.py` node that you created back in Part 2:

    ***
    **TERMINAL 4:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>part2_navigation<span class="w"> </span>odom_subscriber.py
</code></pre></div>
    ***

    This will provide you with the robot's `X` and `Y` coordinates (in meters) within the environment, as you are driving it around, and you can use this to determine the centre coordinates of the four circles (A, B, C & D) that are printed on the arena floor. 

    Drive your robot into each of these circular zones and stop the robot inside them.    

    <a name="goal_coords"></a>Record the zone marker coordinates in a table such as the one below.

    <center>

    | Zone | X Position (m) | Y Position (m) |
    | :---: | :---: | :---: |
    | START | 0.5   | -0.04 |
    | A     |       |       |
    | B     |       |       |
    | C     |       |       |
    | D     |       |       |

    </center>

1. Drive the robot around until a full map of the environment has been generated.

    <figure markdown>
      ![](./part3/slam_steps.png){width=800px}
    </figure>

1. Once you're happy that your robot has built a complete map of the environment (and you've got the coordinates of all the circles), you can then save your map for later use. We do this using a ROS `map_server` package.  First, stop the robot by pressing ++s++ in **TERMINAL 3** and then enter ++ctrl+c++ to shut down the `teleop_keyboard` node.

1. Then, remaining in **TERMINAL 3**, navigate to the root of your `part3_beyond_basics` package directory and create a new folder in it called `maps`:

    ***
    **TERMINAL 3:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/part3_beyond_basics/
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>mkdir<span class="w"> </span>maps
</code></pre></div>
    ***

1. Navigate into this new directory:

    ***
    **TERMINAL 3:**
    <div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="nb">cd</span><span class="w"> </span>maps/
</code></pre></div>
    ***

1. Then, run the `map_saver_cli` node from the `map_server` package to save a copy of your map: <a name="map-saver-cli"></a>

    ***
    **TERMINAL 3:**
    <div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>nav2_map_server<span class="w"> </span>map_saver_cli<span class="w"> </span>-f<span class="w"> </span>MAP_NAME
</code></pre></div>
    Replacing `MAP_NAME` with a name of your choosing. 
    ***

    This will create two files: a `MAP_NAME.pgm` and a `MAP_NAME.yaml` file, both of which contain data related to the map that you have just created.  The `.pgm` file contains an *Occupancy Grid Map (OGM)*, which is used for *autonomous navigation* in ROS.  Have a look at the map by launching it in an Image Viewer Application called `eog`:

    ***
    **TERMINAL 3:**
    <div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>eog<span class="w"> </span>MAP_NAME.pgm
</code></pre></div>
    ***

    A new window should launch containing the map you have just created with SLAM and the `map_saver_cli` node: 

    <figure markdown>
      ![](part3/slam_map.png){width=300px}
    </figure>

    White regions represent the area that your robot has determined is open space and that it can freely move within.  Black regions, on the other hand, represent boundaries or objects that have been detected.  Any grey area on the map represents regions that remain unexplored, or that were inaccessible to the robot.

1. Compare the map generated by SLAM to the real simulated environment. In a simulated environment this process should be pretty accurate, and the map should represent the simulated environment very well (unless you didn't allow your robot to travel around and see the whole thing!)  In a real environment this is often not the case.  

    !!! question "Questions"
        * How accurately did your robot map the environment?
        * What might impact this when working in a real-world environment?

1. Close the image using the :material-close-circle: button on the right-hand-side of the *eog* window.

#### Summary of SLAM

See how easy it was to map an environment in the previous exercise? This works just as well on a real robot in a real environment too (as you will observe in [one of the Real Waffle "Getting Started Exercises" for Assignment #2](../../waffles/basics.md#exSlam)). 

This illustrates the power of ROS: having access to tools such as SLAM, which are built into the ROS framework, makes it really quick and easy for a robotics engineer to start developing robotic applications on top of this. Our job was made even easier here since we used some packages that had been pre-made by the manufacturers of our TurtleBot3 Robots to help us launch SLAM with the right configurations for our exact robot.  If you were developing a robot yourself, or working with a different type of robot, then you might need to do a bit more work in setting up and tuning the SLAM tools to make them work for your own application.

## Wrapping Up

As we learnt in Part 2, a robot's odometry is determined by dead-reckoning and control algorithms based on this alone (like the `move_square.py` node) may be subject to drift and accumulated error. 

Ultimately then, a robot needs additional information to pinpoint its precise location within an environment, and thus enhance its ability to navigate effectively and avoid crashing into things!

This additional information can come from a LiDAR sensor, which you learnt about in this session. We explored where this data is published to, how we access it, and what it tells us about a robot's immediate environment.  We then looked at some ways odometry and laser displacement data can be combined to perform advanced robotic functions such as the mapping of an environment. This is all complicated stuff but, using ROS, we can leverage these tools with relative ease, which illustrates just how powerful ROS can be for developing robotic applications quickly and effectively without having to re-invent the wheel!

### WSL-ROS2 Managed Desktop Users: Save your work! {#backup}

Remember, the work you have done in the WSL-ROS2 environment during this session **will not be preserved** for future sessions or across different University machines automatically! To save the work you have done here today you should now run the following script in any idle WSL-ROS2 Terminal Instance:

<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>wsl_ros<span class="w"> </span>backup
</code></pre></div>

This will export your home directory to your University `U:\` Drive, allowing you to restore it on another managed desktop machine the next time you fire up WSL-ROS2.  

-->







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="September 8, 2025 15:45:35 UTC"><span class="timeago" datetime="2025-09-08T15:45:35+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="September 8, 2025 15:45:35 UTC">2025-09-08</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 30, 2024 22:16:58 UTC"><span class="timeago" datetime="2024-12-30T22:16:58+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 30, 2024 22:16:58 UTC">2024-12-30</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../part2/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Part 2: Odometry &amp; Navigation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Part 2: Odometry &amp; Navigation
              </div>
            </div>
          </a>
        
        
          
          <a href="../part4/" class="md-footer__link md-footer__link--next" aria-label="Next: Part 4: Services">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Part 4: Services
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>  Â© <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2025.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>