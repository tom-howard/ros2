<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Practical Robotics Lab Courses with ROS 2 and the TurtleBot3 Waffle.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/ros2/waffles/basics/">
      
      
        <link rel="prev" href="../launching-ros/">
      
      
        <link rel="next" href="../shutdown/">
      
      
        
      
      
      <link rel="icon" href="../../assets/tuos_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Waffle (&amp; ROS) Basics - ROS 2 Lab Courses in The Diamond</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.c3479dc1.css">
        <style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
<meta property="og:type" content="website">
<meta property="og:title" content="Waffle (&amp; ROS) Basics - ROS 2 Lab Courses in The Diamond">
<meta property="og:description" content="Practical Robotics Lab Courses with ROS 2 and the TurtleBot3 Waffle.">
<meta property="og:image" content="https://tom-howard.github.io/ros2/assets/images/social/waffles/basics.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:url" content="https://tom-howard.github.io/ros2/waffles/basics/">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="Waffle (&amp; ROS) Basics - ROS 2 Lab Courses in The Diamond">
<meta property="twitter:description" content="Practical Robotics Lab Courses with ROS 2 and the TurtleBot3 Waffle.">
<meta property="twitter:image" content="https://tom-howard.github.io/ros2/assets/images/social/waffles/basics.png">
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#waffle-ros-basics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-header__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROS 2 Lab Courses in The Diamond
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Waffle (&amp; ROS) Basics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software/" class="md-tabs__link">
          
  
  
    
  
  Software

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../course/" class="md-tabs__link">
          
  
  
    
  
  The ROS 2 Course

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../com/" class="md-tabs__link">
          
  
  
    
  
  COM2009

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../amr/" class="md-tabs__link">
          
  
  
    
  
  AMR31001

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROS 2 Lab Courses in The Diamond" class="md-nav__button md-logo" aria-label="ROS 2 Lab Courses in The Diamond" data-md-component="logo">
      
  <img src="../../assets/tuos.png" alt="logo">

    </a>
    ROS 2 Lab Courses in The Diamond
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/ros2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/robots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducing the Robots
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version History
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Software
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/installing-wsl-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing WSL-ROS2 on Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../software/using-wsl-ros/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Accessing WSL-ROS2 on University Computers
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Accessing WSL-ROS2 on University Computers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/man-win/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started with WSL-ROS2 on the University Managed Desktops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/linux-term/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A Quick Introduction to the Linux Terminal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/using-wsl-ros/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VS Code and WSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/docker-ros2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing ROS 2 Using Docker (Linux &amp; Mac)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../course/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    The ROS 2 Course
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    The ROS 2 Course
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 1: Getting Started with ROS 2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 2: Odometry &amp; Navigation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 3: Beyond the Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 4: Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 5: Actions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/part6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part 6: Cameras, Machine Vision &amp; OpenCV
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../course/extras/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Extras
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Extras
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/extras/launch-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Launch Files (Advanced)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../course/extras/course-repo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The TUoS ROS Course Repo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    COM2009
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    COM2009
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assignment #1: An Introduction to ROS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Assignment #2: Team Robotics Project
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assignment #2: Team Robotics Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Week 1: Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../com/assignment2/part-a/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Part A (Weeks 1-6)
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part A (Weeks 1-6)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task 1: Velocity Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/part-a/task2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task 2: Avoiding Obstacles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/ros-pkg-tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with your ROS Package (in the Lab)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../com/assignment2/assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Key Assessment Info &amp; Requirements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../amr/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    AMR31001
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    AMR31001
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amr/lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 1: Mobile Robotics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amr/lab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 2: Feedback Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    The Waffles
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    The Waffles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../launching-ros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Launching ROS (and Pairing the Laptop)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Waffle (&amp; ROS) Basics
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Waffle (&amp; ROS) Basics
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Links
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual Control
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manual Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exMove" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Making the Robot Move
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packages-and-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Packages and Nodes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sensors-visualisation-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sensors &amp; Visualisation Tools
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sensors &amp; Visualisation Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exViz" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: Seeing the Sensors in Action
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exNet" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Visualising the ROS Network
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publishers-and-subscribers-a-ros-communication-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Publishers and Subscribers: A ROS Communication Method
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publishers and Subscribers: A ROS Communication Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exTopicMsg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 4: Exploring ROS Topics and Interfaces
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Velocity Control
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exSimpleVelCtrl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 5: A Python Velocity Control Node
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slam" class="md-nav__link">
    <span class="md-ellipsis">
      
        SLAM
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SLAM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exSlam" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 6: Using SLAM to create a map of the environment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shutdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Powering Off
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../essentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    <em>Understanding</em> the Waffles: Key things that you MUST investigate ASAP!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Links
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual Control
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manual Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exMove" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 1: Making the Robot Move
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packages-and-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Packages and Nodes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sensors-visualisation-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sensors &amp; Visualisation Tools
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sensors &amp; Visualisation Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exViz" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 2: Seeing the Sensors in Action
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exNet" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 3: Visualising the ROS Network
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publishers-and-subscribers-a-ros-communication-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        Publishers and Subscribers: A ROS Communication Method
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publishers and Subscribers: A ROS Communication Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exTopicMsg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 4: Exploring ROS Topics and Interfaces
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#velocity-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Velocity Control
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Velocity Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exSimpleVelCtrl" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 5: A Python Velocity Control Node
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slam" class="md-nav__link">
    <span class="md-ellipsis">
      
        SLAM
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SLAM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exSlam" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exercise 6: Using SLAM to create a map of the environment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/tom-howard/ros2/edit/main/docs/waffles/basics.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/ros2/raw/main/docs/waffles/basics.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


<h1 id="waffle-ros-basics">Waffle (&amp; ROS) Basics<a class="headerlink" href="#waffle-ros-basics" title="Permanent link">¶</a></h1>
<p>Having completed the steps on <a href="../launching-ros/">the previous page</a>, your robot and laptop should now be paired, and ROS should be up and running (on the robot). Now, you're ready to bring the robot to life! </p>
<p>On this page are a series of exercises for you to work through, to see how the robots work. We'll also talk through some core ROS concepts and use some key ROS tools, in case you haven't had a chance to explore these in simulation yet.</p>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link">¶</a></h3>
<ul>
<li><a href="#exMove">Exercise 1: Making the Robot Move</a></li>
<li><a href="#exViz">Exercise 2: Seeing the Sensors in Action</a></li>
<li><a href="#exNet">Exercise 3: Visualising the ROS Network</a></li>
<li><a href="#exTopicMsg">Exercise 4: Exploring ROS Topics and Interfaces</a></li>
<li><a href="#exSimpleVelCtrl">Exercise 5: A Python Velocity Control Node</a></li>
<li><a href="#exSlam">Exercise 6: Using SLAM to create a map of the environment</a></li>
</ul>
<h2 id="manual-control">Manual Control<a class="headerlink" href="#manual-control" title="Permanent link">¶</a></h2>
<h4 id="exMove"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 1: Making the Robot Move<a class="headerlink" href="#exMove" title="Permanent link">¶</a></h4>
<p>There's a very useful ready-made ROS application called <code>teleop_keyboard</code> (from the <code>turtlebot3_teleop</code> package) that we will use to drive a Waffle around. This node works in exactly the same way in both simulation and in the real-world!</p>
<ol>
<li>
<p>You should already have two terminal instances active:</p>
<ul>
<li><strong>TERMINAL 1</strong>: The <em>robot</em> terminal with the <em>"bringup"</em> processes running (<a href="../launching-ros/#step3">Launching ROS, Step 3</a>)</li>
<li><strong>TERMINAL 2</strong>: The <em>laptop</em> terminal with the <code>rmw_zenohd</code> node running (<a href="../launching-ros/#step4">Launching ROS, Step 4</a>)</li>
</ul>
</li>
<li>
<p>Open up a new terminal instance on the laptop either by using the <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-t">T</kbd></span> keyboard shortcut, or by clicking the Terminal App icon, we'll refer to this as <strong>TERMINAL 3</strong>. In this terminal enter the following <code>ros2 run</code> command to fire up the <code>teleop_keyboard</code> node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>turtlebot3_teleop<span class="w"> </span>teleop_keyboard
</code></pre></div>
</li>
<li>
<p>Follow the instructions provided in the terminal to drive the robot around using specific buttons on the keyboard:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/cli/teleop_keymap.svg"></a>
</figure><p></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Take care to avoid any obstacles or other people in the lab as you do this!</p>
</div>
</li>
<li>
<p>Once you've spent a bit of time on this, close the application down by entering <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in <strong>TERMINAL 3</strong>.</p>
</li>
</ol>
<h2 id="packages-and-nodes">Packages and Nodes<a class="headerlink" href="#packages-and-nodes" title="Permanent link">¶</a></h2>
<p>ROS applications are organised into <em>packages</em>. Packages are basically folders containing scripts, configurations and launch files (ways to launch those scripts and configurations).  </p>
<p><em>Scripts</em> tell the robot what to do and how to act. In ROS, these scripts are called <em>nodes</em>. <em>ROS Nodes</em> are executable programs that perform specific robot tasks and operations. These are typically written in C++ or Python, but it's possible to write ROS Nodes using other programming languages too.</p>
<p>There are two key ways to launch ROS applications:</p>
<ol>
<li><code>ros2 launch</code></li>
<li><code>ros2 run</code></li>
</ol>
<p>Recall that we just used the <code>ros2 run</code> command in Exercise 1 to launch the <code>teleop_keyboard</code> node. This command has the following structure:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>ros2<span class="w"> </span>run<span class="w"> </span><span class="o">{[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Package<span class="w"> </span>name<span class="o">}</span><span class="w"> </span><span class="o">{[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Node<span class="w"> </span>name<span class="o">}</span>
</code></pre></div>
<p><strong>Part [1]</strong> specifies the name of the <em>ROS package</em> containing the functionality that we want to execute. <strong>Part [2]</strong> is used to specify a <em>single</em> script within that package that we want to execute. We therefore use <code>ros2 run</code> commands to launch <strong>single</strong> executables (aka <em>Nodes</em>) onto the ROS network (in Exercise 1 for example, we launched the <code>teleop_keyboard</code> node).</p>
<p>The <code>ros2 launch</code> command has a <em>similar</em> structure:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span><span class="o">{[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Package<span class="w"> </span>name<span class="o">}</span><span class="w"> </span><span class="o">{[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Launch<span class="w"> </span>file<span class="o">}</span>
</code></pre></div>
<p>Here, <strong>Part [1]</strong> is the same as the <code>ros2 run</code> command, but <strong>Part [2]</strong> is slightly different: <code>{[2] Launch file}</code>. In this case, <strong>Part [2]</strong> is a file within that package that specifies any number of Nodes that we want to launch onto the ROS network. We can therefore launch <em>multiple</em> nodes at the same time from a single launch file.</p>
<h2 id="sensors-visualisation-tools">Sensors &amp; Visualisation Tools<a class="headerlink" href="#sensors-visualisation-tools" title="Permanent link">¶</a></h2>
<p>Our Waffles have some pretty sophisticated sensors on them, allowing them to "see" the world around them. Let's now see what our robot sees, using some handy ROS tools.</p>
<h4 id="exViz"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 2: Seeing the Sensors in Action<a class="headerlink" href="#exViz" title="Permanent link">¶</a></h4>
<ol>
<li>
<p>There shouldn't be anything running in <strong>TERMINAL 3</strong> now, after you closed down the <code>teleop_keyboard</code> node (using <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>) at the end of the previous exercise. Return to this terminal and enter the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>rviz.launch.py
</code></pre></div>
<p>This will launch an application called <em>RViz</em>, which is a handy tool that allows us to <em>visualise</em> the data from all the sensors on-board our robots. When RViz opens, you should see something similar to the following:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/laptops/waffle_rviz.png" width="700px"></a>
</figure><p></p>
<p>Click on the checkbox next to <em>"Camera"</em> in the <em>"Displays"</em> list to enable camera subscription. A live feed from the robot's camera should then be displayed in the <em>Camera</em> panel in the bottom left.</p>
</li>
<li>
<p>In the main RViz panel you should see a digital model of the robot, surrounded by lots of green dots. This is a representation of the <em>laser displacement data</em> coming from the LiDAR sensor (the black device on the top of the robot). The LiDAR sensor spins continuously, sending out laser pulses into the environment as it does so. When a pulse hits an object it is reflected back to the sensor, and the time it takes for this to happen is used to calculate how far away the object is.</p>
<p>The LiDAR sensor spins and performs this process continuously, so a full 360° scan of the environment can be generated. This data is therefore really useful for things like <em>obstacle avoidance</em> and <em>mapping</em>.</p>
</li>
<li>
<p>Place your hand in front of the robot and see if the position of the green dots changes to match your hand's location. Move your hand up and down and consider at what height the LiDAR sensor is able to detect it.</p>
</li>
<li>
<p>Then, move your hand closer and further away and watch how the green dots move to match this. </p>
</li>
<li>
<p>Open up a new terminal instance (<strong>TERMINAL 4</strong>) and launch the <code>teleop_keyboard</code> node as you did in Exercise 1. Watch how the data in the RViz screen changes as you drive the robot around a bit.</p>
</li>
</ol>
<h4 id="exNet"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 3: Visualising the ROS Network<a class="headerlink" href="#exNet" title="Permanent link">¶</a></h4>
<p>Using <code>ros2 run</code> and <code>ros2 launch</code>, as we have done so far, it's easy to end up with a lot of different processes or <em>ROS Nodes</em> running on the network, some of which we will interact with, but others may just be running in the background. It is often useful to know exactly what <em>is</em> running on the ROS network, and there are a few ways to do this.</p>
<ol>
<li>
<p>Open up a new terminal instance now (<strong>TERMINAL 5</strong>) and from here use the <code>ros2 node</code> command to <em>list</em> the nodes that are currently running:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ros2<span class="w"> </span>node<span class="w"> </span>list
</code></pre></div>
<p>At a <em>minimum</em>, you should be presented with the following list: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>/camera
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>/diff_drive_controller
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>/hlds_laser_publisher
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>/robot_state_publisher
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>/tb3_status_node
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>/turtlebot3_node
</code></pre></div>
</li>
<li>
<p>We can visualise the connections between the active nodes by using a ROS node called <code>rqt_graph</code>. In the same terminal, launch this as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>rqt
</code></pre></div>
<p>A window should then open:</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/main.png" width="600"></a>
</figure><p></p>
</li>
<li>
<p>From here, we then want to load the <em>Node Graph</em> plugin. From the top menu select <code>Plugins</code> &gt; <code>Introspection</code> &gt; <code>Node Graph</code>.</p>
<details class="tip">
<summary>Shortcut</summary>
<p>You can also launch the <code>rqt_graph</code> node directly with <code>ros2 run</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>rqt_graph<span class="w"> </span>rqt_graph
</code></pre></div>
</details>
</li>
<li>
<p>In the window that opens, select <code>Nodes/Topics (active)</code> from the dropdown menu in the top left. </p>
<p>What you should then see is a map of all the nodes in the list from above (as ovals), and arrows to illustrate the flow of information between them. This is a visual representation of the ROS network!</p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/graph_waffle.png" width="600px"></a>
</figure><p></p>
<p>Items that have a rectangular border are <em>ROS Topics</em>. ROS Topics are essentially communication channels, and ROS Nodes can read (<em>subscribe</em>) or write (<em>publish</em>) to these topics to access sensor data, pass information around the network and make things happen.</p>
<p>If the <code>teleop_keyboard</code> Node is still active (in <strong>TERMINAL 4</strong>) then the graph should show us that this node is publishing messages to a topic called <code>/cmd_vel</code>, which in turn is being subscribed to by <code>turtlebot3_node</code>. </p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/rqt/graph_waffle_teleop.png" width="600px"></a>
</figure><p></p>
<p>This node runs on the robot and controls its velocity. We send instructions to this (by publishing to the <code>/cmd_vel</code> topic) to actually make the robot move.</p>
</li>
</ol>
<p>A ROS Robot could have hundreds of individual nodes running simultaneously to carry out all its necessary operations and actions. Each node runs independently, but uses <em>ROS communication methods</em> to communicate and share data with the other nodes on the ROS Network.</p>
<h2 id="publishers-and-subscribers-a-ros-communication-method">Publishers and Subscribers: A <em>ROS Communication Method</em><a class="headerlink" href="#publishers-and-subscribers-a-ros-communication-method" title="Permanent link">¶</a></h2>
<p>ROS Topics are therefore key to making things happen on a robot. Nodes can publish (<em>write</em>) and/or subscribe to (<em>read</em>) ROS Topics in order to share data around the ROS network. Data is published to topics via <em>message-type interfaces</em>.</p>
<p>Let's have a look at this in a bit more detail...</p>
<h4 id="exTopicMsg"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 4: Exploring ROS Topics and Interfaces<a class="headerlink" href="#exTopicMsg" title="Permanent link">¶</a></h4>
<p>Much like the <code>ros2 node list</code> command, we can use <code>ros2 topic list</code> to list all the <em>topics</em> that are currently active on the ROS network.</p>
<ol>
<li>
<p>Close down the RQT Graph window if you haven't done so already. This will release <strong>TERMINAL 5</strong> so that we can enter commands in it again. Return to this terminal window and enter the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<p>A new list of items should be printed to the terminal now. See if you can spot the <code>/cmd_vel</code> item in the list.</p>
<p>As we learnt above, this topic is used to control the velocity of the robot (<em>'command velocity'</em>).</p>
</li>
<li>
<p>Let's find out more about this using the <code>ros2 topic info</code> command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ros2<span class="w"> </span>topic<span class="w"> </span>info<span class="w"> </span>/cmd_vel
</code></pre></div>
<p>This should provide an output similar to the following: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Type: geometry_msgs/msg/TwistStamped
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Publisher count: 1
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>Subscription count: 1
</code></pre></div>
<p>This tells us that the <em>type</em> of data being communicated on the <code>/cmd_vel</code> topic is called: <code>geometry_msgs/msg/TwistStamped</code>. </p>
<p>The interface description has three parts:</p>
<ol>
<li><code>geometry_msgs</code>: The name of the ROS package that this interface belongs to.</li>
<li><code>msg</code>: The type of interface. In this case <em>message</em>, but there are other types too. </li>
<li><code>TwistStamped</code>: The name of the message interface. </li>
</ol>
<p>We have just learnt then, that if we want to make the robot move we need to publish <code>TwistStamped</code> <em>messages</em> to the <code>/cmd_vel</code> topic. </p>
</li>
<li>
<p>We can use the <code>ros2 interface</code> command to find out more about the <code>TwistStamped</code> message:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>geometry_msgs/msg/TwistStamped
</code></pre></div>
<p>From this, we should obtain the following:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>std_msgs/Header header
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>        builtin_interfaces/Time stamp
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>                int32 sec
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>                uint32 nanosec
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>        string frame_id
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>Twist twist
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>        Vector3  linear
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>                float64 x
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>                float64 y
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>                float64 z
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        Vector3  angular
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>                float64 x
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>                float64 y
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>                float64 z
</code></pre></div>
<p>Here we have a list of fields, subfields and data types. The interface has two <em>base fields</em> (indicated by the lines that are not indented):</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>header</code></td>
<td style="text-align: center;"><code>std_msgs/Header</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>twist</code></td>
<td style="text-align: center;"><code>Twist</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>Of the above, we're most interested in <em>Field 2</em>, which contains a further two subfields: </p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field <em>Name</em></th>
<th style="text-align: center;">Field <em>Type</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>linear</code></td>
<td style="text-align: center;"><code>Vector3</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>angular</code></td>
<td style="text-align: center;"><code>Vector3</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>Each of <em>these</em> contains 3 <em>further</em> subfields: <code>x</code>, <code>y</code> and <code>z</code>:</p>
<p></p><center><p></p>
<table>
<thead>
<tr>
<th style="text-align: center;">#</th>
<th style="text-align: center;">Field Name</th>
<th style="text-align: center;">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;"><code>x</code></td>
<td style="text-align: center;"><code>float64</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;"><code>y</code></td>
<td style="text-align: center;"><code>float64</code></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;"><code>z</code></td>
<td style="text-align: center;"><code>float64</code></td>
</tr>
</tbody>
</table>
<p></p></center><p></p>
<p>Let's find out what this all means...</p>
</li>
</ol>
<h2 id="velocity-control">Velocity Control<a class="headerlink" href="#velocity-control" title="Permanent link">¶</a></h2>
<p>The motion of any mobile robot can be defined in terms of its three <em>principal axes</em>: <code>X</code>, <code>Y</code> and <code>Z</code>. In the context of our TurtleBot3 Waffle, these axes (and the motion about them) are defined as follows:</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/principal_axes.svg" width="600"></a></p>
</figure>
<p>In theory then, a robot can move <em>linearly</em> or <em>angularly</em> about any of these three axes, as shown by the arrows in the figure. That's six <em>Degrees of Freedom</em> (DOFs) in total, achieved based on a robot's design and the actuators it is equipped with. Take a look back at the <code>ros2 interface show</code> output above. Hopefully it's a bit clearer now that the <code>twist</code> subfield of the <code>TwistStamped</code> interface is formatted to give a ROS Programmer the ability to <em>ask</em> a robot to move in any one of its six DOFs. </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Vector3  linear
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>        float64 x  &lt;-- Forwards (or Backwards)
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>        float64 y  &lt;-- Left (or Right)
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>        float64 z  &lt;-- Up (or Down)
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>Vector3  angular
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>        float64 x  &lt;-- "Roll"
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>        float64 y  &lt;-- "Pitch"
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>        float64 z  &lt;-- "Yaw"
</code></pre></div>
<p>Our TurtleBot3 robot only has two motors, so it doesn't actually have six DOFs! The two motors can be controlled independently, which gives it what is called a <em>"differential drive"</em> configuration, but this still only allows it to move with <strong>two degrees of freedom</strong> in total, as illustrated below.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/velocities.svg" width="600"></a></p>
</figure>
<p>It can therefore only move <strong>linearly</strong> in the <strong>x-axis</strong> (<em>Forwards/Backwards</em>) and <strong>angularly</strong> in the <strong>z-axis</strong> (<em>Yaw</em>). </p>
<h4 id="exSimpleVelCtrl"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 5: A Python Velocity Control Node<a class="headerlink" href="#exSimpleVelCtrl" title="Permanent link">¶</a></h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Before you start this, make sure you have nothing running in <strong>TERMINALS</strong> <strong>3</strong>, <strong>4</strong> &amp; <strong>5</strong> (enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> in each of these terminals to stop any processes that may be running there).</p>
</div>
<p>As we've seen, making a robot move with ROS is simply a case of publishing the right data (<code>geometry_msgs/msg/TwistStamped</code>) to the right ROS Topic (<code>/cmd_vel</code>). Earlier we used the <code>teleop_keyboard</code> node to drive the robot around, a bit like a remote control car. In the background here all that was really happening was that the node was converting our keyboard button presses into velocity commands and publishing these to the <code>/cmd_vel</code> topic.</p>
<p>In reality, robots need to be able to navigate complex environments autonomously, which is quite a difficult task, and requires us to build bespoke applications. We can build these applications using Python, and we'll look at the core concepts behind this now by building a simple node that will allow us to make our robot a bit more "autonomous". What we will do here forms the basis of the more complex applications that you will learn about in the lab course!</p>
<ol>
<li>
<p>Above, we talked about how ROS Nodes should be contained within packages, so let's create one now using a helper script that we've already put together. (This is covered in more detail in the ROS course, but for the purposes of this exercise let's just go ahead and run the script without worrying too much about it!)</p>
<p>In <strong>TERMINAL 3</strong>, navigate to <em>the ROS2 Workspace</em> on the laptop:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/
</code></pre></div>
</li>
<li>
<p>From here, use <code>git</code> to <em>clone</em> our <em>"ROS 2 Package Template"</em> from GitHub:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/tom-howard/ros2_pkg_template.git
</code></pre></div>
</li>
<li>
<p>This package template contains a script called <code>init_pkg.sh</code>, which can be called to turn the template into a proper ROS 2 package. Run the script as follows, which will convert the template into a ROS 2 package called <code>waffle_demo</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>./ros2_pkg_template/init_pkg.sh<span class="w"> </span>waffle_demo
</code></pre></div>
</li>
<li>
<p>Navigate into this new package directory (using <code>cd</code>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nb">cd</span><span class="w"> </span>waffle_demo/<span class="w"> </span>
</code></pre></div>
</li>
<li>
<p>This package contains a subdirectory called <code>scripts</code>, and within this there are two basic nodes to get us started:</p>
<p></p><div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>tree<span class="w"> </span>scripts/
</code></pre></div>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>scripts/
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>├── basic_velocity_control.py
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>└── stop_me.py
</code></pre></div><p></p>
</li>
<li>
<p>Let's open up our package now in <em>Visual Studio Code</em> (VS Code). </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>code<span class="w"> </span>.
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don't forget to include the <code>.</code> at the end there, it's important!!</p>
</div>
</li>
<li>
<p>Next, in the VS Code file explorer, open up the <code>scripts</code> directory, find the <code>basic_velocity_control.py</code> file and click it to open it up in the editor.</p>
<p><a name="timedSquareCode"></a></p>
<p>This is a (fairly) basic ROS 2 Python Node that will control the velocity of the robot. Let's talk through it:</p>
<ol>
<li>
<p>First, we have some imports:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">rclpy</span> <span class="c1"># (1)!</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">geometry_msgs.msg</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwistStamped</span> <span class="c1"># (2)!</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span> <span class="c1"># (3)!</span>
</code></pre></div>
<ol>
<li><code>rclpy</code> is the ROS client library for Python. We need this so that our Python node can interact with ROS.</li>
<li>We know from earlier that in order to make a robot move we need to publish messages to the <code>/cmd_vel</code> topic, and that this topic uses a data structure (or Interface) called <code>geometry_msgs/msg/TwistStamped</code>. This is how we import the interface into our Python node so that we can create velocity commands for our robot (which we'll get to shortly...)</li>
<li>We'll use this to control timing in our node.</li>
</ol>
<p>Click on the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"></path></svg></span> icons above to reveal more information about each line of the code.</p>
</li>
<li>
<p>Next, we declare some variables that we can use and adapt during the main execution of our code:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">state</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># (1)!</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">vel</span> <span class="o">=</span> <span class="n">TwistStamped</span><span class="p">()</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>Inside the <code class="highlight"><span class="k">while</span></code> loop (explained shortly) we define two different operational states for the robot, and we can control which one is active by changing this value from <code>1</code> to <code>2</code> (and visa-versa).</li>
<li>
<p>We're instantiating a <code>TwistStamped</code> Interface message here and calling it <code>vel</code>. We'll assign velocity values to this in the <code class="highlight"><span class="k">while</span></code> loop later on.</p>
<p>Recall that a <code>TwistStamped</code> message contains six different components that we can assign values to. <a href="#velocity-control">Which <em>two</em> are relevant to our robot</a>?</p>
</li>
</ol>
</li>
<li>
<p>Next we configure some important ROS-related things:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># (1)!</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">node</span> <span class="o">=</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="s2">"basic_velocity_control"</span><span class="p">)</span>  <span class="c1"># (2)!</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="n">vel_pub</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">TwistStamped</span><span class="p">,</span> <span class="s2">"cmd_vel"</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</code></pre></div>
<ol>
<li>Initialise <code>rclpy</code> and all the ROS communications that are necessary for our node. </li>
<li>Initialise this Python script as an actual ROS node, providing a name for it to be registered on the ROS network with ("basic_velocity_control" in this case).</li>
<li>Here we're setting up a publisher to the <code>/cmd_vel</code> topic so that the node can send velocity commands to the robot (using <code>TwistStamped</code> data).</li>
</ol>
</li>
<li>
<p>After this, we're defining another variable:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">timestamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (1)!</span>
</code></pre></div>
<ol>
<li>What time is it right now? This tells us the current "ROS Time" (in nanoseconds), which will be useful to compare against in the while loop.</li>
</ol>
</li>
<li>
<p>Now, we enter into a <code class="highlight"><span class="k">while</span></code> loop, which is where our code will spend the majority of its time once it's up and running:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">while</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">ok</span><span class="p">():</span> <span class="c1"># (1)!</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="n">time_now</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (2)!</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="n">elapsed_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">time_now</span> <span class="o">-</span> <span class="n">timestamp</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e-9</span> <span class="c1"># (3)!</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    <span class="o">...</span>
</code></pre></div>
<ol>
<li>This returns <code class="highlight"><span class="kc">True</span></code> as long as the node is alive, so all the code inside the <code class="highlight"><span class="k">while</span></code> loop will continue to execute as long as this is the case.</li>
<li>What time is it <em>now</em>? Check the time at the start of each iteration of the <code class="highlight"><span class="k">while</span></code> loop, and assign this to a variable called <code>time_now</code>.</li>
<li>Determine how much time has elapsed (in seconds) since the <code>timestamp</code> was last updated.</li>
</ol>
<p><a name="break"></a></p>
<ol>
<li>
<p>An <code class="highlight"><span class="k">if</span></code> statement now controls the state of operation for our robot. </p>
<ol>
<li>
<p>In state <code>1</code> we set velocities that will make the robot move forwards (linear X velocity only) for a certain amount of time and then stop. How long will the robot move forwards for, and at what velocity?</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> 
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>    <span class="k">if</span> <span class="n">elapsed_time</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># (1)!</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="c1"># (2)!</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>    <span class="k">else</span><span class="p">:</span> <span class="c1"># (3)!</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># (4)!</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>        <span class="n">state</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># (5)!</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (6)!</span>
</code></pre></div>
<ol>
<li>If the elapsed time is less than 2 seconds...</li>
<li>Set a linear velocity so that the robot will move forwards.</li>
<li>If the elapsed time has <em>exceeded</em> 2 seconds...</li>
<li>Set our robot's velocities to <code>0.0</code> to make it stop.</li>
<li>In the next loop iteration, go into state 2 instead.</li>
<li>Reset the timestamp to start counting up again. </li>
</ol>
</li>
<li>
<p>In state <code>2</code> we set velocities that will make the robot turn on the spot (angular Z velocity only) for a certain amount of time and then stop. How long will it do this for, and at what velocity?</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">elif</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>    <span class="k">if</span> <span class="n">elapsed_time</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span> <span class="c1"># (1)!</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># (2)!</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>    <span class="k">else</span><span class="p">:</span> <span class="c1"># (3)!</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c1"># (4)!</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>        <span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span> 
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>        <span class="n">state</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># (5)!</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_clock</span><span class="p">()</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">nanoseconds</span> <span class="c1"># (6)!</span>
</code></pre></div>
<ol>
<li>While the elapsed time is less than 4 seconds...</li>
<li>Apply an angular velocity to the robot to make it turn on the spot.</li>
<li>Once the elapsed time has <em>exceeded</em> 4 seconds...</li>
<li>Set the robot's velocities back to <code>0.0</code> to make it stop.</li>
<li>In the next loop iteration, go back into state 1 again (moving forwards).</li>
<li>Reset the timestamp to start counting up once more. </li>
</ol>
</li>
</ol>
</li>
<li>
<p>And after the <code class="highlight"><span class="k">if</span></code> statement:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="n">node</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="c1"># (1)!</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>    <span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">[State = </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">] Publishing velocities:</span><span class="se">\n</span><span class="s2">"</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>    <span class="sa">f</span><span class="s2">"  - linear.x: </span><span class="si">{</span><span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [m/s]</span><span class="se">\n</span><span class="s2">"</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>    <span class="sa">f</span><span class="s2">"  - angular.z: </span><span class="si">{</span><span class="n">vel</span><span class="o">.</span><span class="n">twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> [rad/s]."</span><span class="p">,</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>    <span class="n">throttle_duration_sec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="p">)</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="n">vel_pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel</span><span class="p">)</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>This (and the following 5 lines) will print a message to the terminal, to provide us with regular updates on what state the node is currently in and what velocities have been set (in the <code class="highlight"><span class="k">if</span></code> statement above).</li>
<li>
<p>This line is crucial: this operation actual publishes the velocity commands to the <code>/cmd_vel</code> topic, to make the robot actual act on our instructions.</p>
<p>Regardless of what happens in the <code>if</code> states above, we <em>always</em> publish a velocity command to the <code>/cmd_vel</code> topic here (every loop iteration).</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>We're now ready to build our package so that we can run it. We use a tool called "Colcon" to do this, but this <strong>MUST</strong> be run from the root of the ROS 2 Workspace (i.e.: <code>~/ros2_ws/</code>), so let's navigate there now using <code>cd</code>. Head back to <strong>TERMINAL 3</strong> and run the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/<span class="w"> </span>
</code></pre></div>
<p>Then, use the <code>colcon build</code> command to build your package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>colcon<span class="w"> </span>build<span class="w"> </span>--packages-select<span class="w"> </span>waffle_demo<span class="w"> </span>--symlink-install
</code></pre></div>
<p>And finally, "re-source" the environment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
</li>
<li>
<p>Now we can run the code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure the robot is on the floor and has enough room to roam around before you do this!</p>
</div>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>waffle_demo<span class="w"> </span>basic_velocity_control.py
</code></pre></div>
<p>Observe what the robot does. When you've seen enough, enter <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> to stop the node.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The robot will continue to move even after you've stopped the node! Run the following command to stop it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>waffle_demo<span class="w"> </span>stop_me.py
</code></pre></div>
</div>
</li>
<li>
<p>Now it's time to <strong>adapt the code</strong>:</p>
<p>The aim here is to make the robot follow a square motion path. What you may have observed when you actually ran the code is that the robot doesn't actually do that! We're using a time-based approach to make the robot switch between two different states continuously:</p>
<ol>
<li>Moving forwards</li>
<li>Turning on the spot</li>
</ol>
<p>Have a look at the code to work out how much time the robot will currently spend in each state.</p>
<p>We want the robot to follow a <strong>0.5m x 0.5m square</strong> motion path.  In order to properly achieve this you'll need to adjust the timings, or the robot's velocity, or both. Edit the code so that the robot actually follows a <strong>0.5m x 0.5m square motion path</strong>!</p>
</li>
</ol>
<h2 id="slam">SLAM<a class="headerlink" href="#slam" title="Permanent link">¶</a></h2>
<p>Simultaneous Localisation and Mapping (SLAM) is a sophisticated tool that is built into ROS. Using data from the robot's LiDAR sensor, plus knowledge of how far the robot has moved<sup id="fnref:odom"><a class="footnote-ref" href="#fn:odom">1</a></sup> a robot is able to create a map of its environment <em>and</em> keep track of its location within that environment at the same time. In the exercise that follows you'll see how easy it is to implement SLAM with the Waffle.  </p>
<h4 id="exSlam"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44s-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3z"></path></svg></span> Exercise 6: Using SLAM to create a map of the environment<a class="headerlink" href="#exSlam" title="Permanent link">¶</a></h4>
<ol>
<li>
<p>In <strong>TERMINAL 3</strong> enter the following command to launch all the necessary SLAM nodes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>ros2<span class="w"> </span>launch<span class="w"> </span>tuos_tb3_tools<span class="w"> </span>slam.launch.py<span class="w"> </span>environment:<span class="o">=</span>real
</code></pre></div>
<details class="tip">
<summary>Tip</summary>
<p>On the laptop, this command is also available as an alias: <code>tb3_slam</code>!</p>
</details>
<p>This will launch a new RViz instance, showing a top-down view of the environment, and dots of various colours representing the real-time LiDAR data. </p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/slam_step0.png" width="600px"></a>
</figure><p></p>
<p>SLAM will already have begun processing this data to start building a map of the boundaries that are currently visible to the Waffle based on its location in the environment.</p>
</li>
<li>
<p>Return to <strong>TERMINAL 4</strong> now and launch the <code>teleop_keyboard</code> node. Start to drive the robot around <em>slowly</em> and <em>carefully</em> to build up a complete map of the area.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It's best to do this slowly and perform multiple circuits of the area to build up a more accurate map.</p>
</div>
<p><a name="slam-steps"></a></p>
<p></p><figure markdown>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/slam_step1.png" width="500px"></a>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/slam_step2.png" width="500px"></a>
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../../images/waffle/slam_step3.png" width="500px"></a>
</figure><p></p>
</li>
<li>
<p>Once you're happy that your robot has built up a good map of its environment, you can save this map using the <code>map_saver_cli</code> node from a package called <code>nav2_map_server</code>:</p>
<ol>
<li>
<p>First, create a new directory within your ROS package on the laptop. Return to <strong>TERMINAL 5</strong> and navigate to the root of the <code>waffle_demo</code> package that you created earlier:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src/waffle_demo
</code></pre></div>
</li>
<li>
<p>Create a directory in here called <code>maps</code>: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>mkdir<span class="w"> </span>maps
</code></pre></div>
</li>
<li>
<p>Navigate into this directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nb">cd</span><span class="w"> </span>maps/
</code></pre></div>
</li>
<li>
<p>Then, use <code>ros2 run</code> to run the <code>map_saver_cli</code> node and save a copy of your robot's map:</p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>ros2<span class="w"> </span>run<span class="w"> </span>nav2_map_server<span class="w"> </span>map_saver_cli<span class="w"> </span>-f<span class="w"> </span>MAP_NAME
</code></pre></div>
<p>Replacing <code>MAP_NAME</code> with an appropriate name for your map. This will create two files: </p>
<ol>
<li>a <code>MAP_NAME.pgm</code> </li>
<li>a <code>MAP_NAME.yaml</code> file</li>
</ol>
<p>...both of which contain data related to the map that you have just created.</p>
</li>
<li>
<p>The <code>.pgm</code> file can be opened using an application called <code>eog</code> on the laptop: </p>
<div class="no-copy highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>eog<span class="w"> </span>MAP_NAME.pgm
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Return to <strong>TERMINAL 3</strong> and close down SLAM by pressing <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span>. The process should stop and RViz should close down.</p>
</li>
<li>
<p>Close down the <code>teleop_keyboard</code> node in <strong>TERMINAL 4</strong> as well, if that's still running.</p>
</li>
</ol>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">¶</a></h2>
<p>Having mastered the basics, you should ensure you review some <strong><a href="../essentials/">Essential Considerations</a></strong> before you go much further on this course; these will highlight some challenges students commonly face when working with the robots Indeed, being aware of these early on can make a huge difference and save a lot of head scratching in the lab! </p>
<p>... and when you're all done with your robot at the end of each lab session, make sure you <strong><a href="../shutdown/">power it off properly</a></strong>. </p>
<div class="footnote">
<hr>
<ol>
<li id="fn:odom">
<p>You'll learn much more about "Robot Odometry" in the lab course.&nbsp;<a class="footnote-backref" href="#fnref:odom" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="February 2, 2026 17:05:37 UTC"><span class="timeago" datetime="2026-02-02T17:05:37+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="February 2, 2026 17:05:37 UTC">2026-02-02</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 2, 2025 16:28:55 UTC"><span class="timeago" datetime="2025-01-02T16:28:55+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 2, 2025 16:28:55 UTC">2025-01-02</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../launching-ros/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Launching ROS (and Pairing the Laptop)">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Launching ROS (and Pairing the Laptop)
              </div>
            </div>
          </a>
        
        
          
          <a href="../shutdown/" class="md-footer__link md-footer__link--next" aria-label="Next: Powering Off">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Powering Off
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="../../assets/external/i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>  © <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Tom Howard</a>, The University of Sheffield, 2026.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>